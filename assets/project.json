{"targets":[{"isStage":true,"name":"Stage","variables":{"`jEk@4|i[#Fk?(8x)AV.-my variable":["my variable","0"],"8Y/Sg#LdSC:JVxdcVN.T":["Xv",0],"Xb#gBf3=8,?xg*W]CM?{":["Yv",-1],"-e88v(uJq,+.yyMcSMe7":["playerx",-200],"^XeLT!!fTkOCsT$/-!CL":["playery",-66],"r$PGRH.gT!2zw{HknX(~":["turn animation","left"],"wx):s?PixZr9[}ROV5HG":["ded",200],"M=]zP]CYaMxj7ljY%AHr":["song",0],"fVz+4tzmsgMM~MbX~`cM":["stars",10],"OhA+#gGw6$%y=m1A$V_.":["starc","3/10"],"k$ehDHxcoB|wJpb_e|ix":["laser",0],"|Q76zqrVSue~~!z3Q^M#":["cameraX",-200],"B-wLd3;xn{^W!w^-#$s%":["cameraY",-73],"rDYn81#fT,z[5miFjDNL":["cameraZOOM",100],"9l,AW,-RS`$yZOJ*?BXc":["lo",0],"*I2*f@JUazzg5fPod-Ds":["move?",1],"f}HE=:hB8`Ah8]D9[rDd":["Camera Mode",1],"utg$:-)#KH{fMd^UW7lc":["star bomb???",1]},"lists":{"fsKp%(.,ZD5+uO,NsAOs":["grounds",["Level"]]},"broadcasts":{"}PLkO!9Oaawb]Qbwa6bo":"death!~!!","!C?0ci=[YVe([KfmF`PY":"start","+O`a([vPq^Z~q}!]!}+`":"cam_hunt_zoom_In","xtjgq},,0-)-@#mS+uzM":"ecgo","ul`KqS2(WCL3uLtytK,N":"die bully!"},"customVars":[],"blocks":{"bp":{"opcode":"event_whenflagclicked","next":"bq","parent":null,"inputs":{},"fields":{},"topLevel":true},"bq":{"opcode":"control_forever","next":null,"parent":"bp","inputs":{},"fields":{}},"br":{"opcode":"sound_playuntildone","next":null,"parent":null,"inputs":{"SOUND_MENU":[1,"bs"]},"fields":{},"topLevel":true},"bs":{"opcode":"sound_sounds_menu","next":null,"parent":"br","inputs":{},"fields":{"SOUND_MENU":["wowie","apDRQm[+%j@wGom(k@`l"]},"shadow":true}},"comments":{"dR":{"blockId":null,"x":26,"y":214,"width":351,"height":73,"minimized":false,"text":"Configuration for https://penguinmod.com/\nYou can move, resize, and minimize this comment, but don't edit it by hand. This comment can be deleted to remove the stored settings.\n{\"runtimeOptions\":{\"maxClones\":Infinity,\"miscLimits\":false,\"fencing\":false,\"disableOffscreenRendering\":true},\"interpolation\":true,\"width\":640} // _twconfig_"}},"currentCostume":0,"costumes":[{"name":"backdrop3","bitmapResolution":1,"dataFormat":"svg","assetId":"1a50391c11ca3439ecc26b3880d92ba9","md5ext":"1a50391c11ca3439ecc26b3880d92ba9.svg","rotationCenterX":0,"rotationCenterY":0}],"sounds":[{"name":"wowie","assetId":"e365bdc0bd0d5ec251502cf5f91b3654","dataFormat":"wav","format":"","rate":48000,"sampleCount":2590729,"md5ext":"e365bdc0bd0d5ec251502cf5f91b3654.wav"},{"name":"1-21","assetId":"c7b981cd1d9147f61277cebf22a469dd","dataFormat":"mp3","rate":48000,"sampleCount":6967813,"md5ext":"c7b981cd1d9147f61277cebf22a469dd.mp3"},{"name":"melobytes","assetId":"828861a9e63781efc8302b27e86c92f0","dataFormat":"wav","format":"","rate":48000,"sampleCount":3318452,"md5ext":"828861a9e63781efc8302b27e86c92f0.wav"},{"name":"Record (online-voice-recorder","assetId":"213f919deb9d1d33cdabb58c8b8b24f3","dataFormat":"wav","format":"","rate":48000,"sampleCount":2719462,"md5ext":"213f919deb9d1d33cdabb58c8b8b24f3.wav"}],"id":"/PaDf`)Obv2{fu9,u1~_","volume":100,"layerOrder":0,"tempo":60,"videoTransparency":50,"videoState":"on","textToSpeechLanguage":null},{"isStage":false,"name":"Level","variables":{},"lists":{},"broadcasts":{},"customVars":[],"blocks":{"bt":{"opcode":"event_whenflagclicked","next":"G","parent":null,"inputs":{},"fields":{},"topLevel":true},"G":{"opcode":"looks_changeVisibilityOfSpriteHide","next":"H","parent":"bt","inputs":{"VISIBLE_OPTION":[1,"o"]},"fields":{}},"o":{"opcode":"looks_changeVisibilityOfSprite_menu","next":null,"parent":"G","inputs":{},"fields":{"VISIBLE_OPTION":["Level2","C3-+a-=O,}M}vj59_DVv"]},"shadow":true},"H":{"opcode":"looks_switchcostumeto","next":"~","parent":"G","inputs":{"COSTUME":[1,"p"]},"fields":{}},"p":{"opcode":"looks_costume","next":null,"parent":"H","inputs":{},"fields":{"COSTUME":["test2","Rmht(p]Dk9~cLNj^^U)9"]},"shadow":true},"~":{"opcode":"control_forever","next":null,"parent":"H","inputs":{"SUBSTACK":[2,"q"]},"fields":{}},"q":{"opcode":"motion_gotoxy","next":null,"parent":"~","inputs":{"X":[1,[4,"0"]],"Y":[1,[4,"0"]]},"fields":{}},"r":{"opcode":"control_start_as_clone","next":"I","parent":null,"inputs":{},"fields":{},"topLevel":true},"I":{"opcode":"motion_pointtowards","next":"aa","parent":"r","inputs":{"TOWARDS":[1,"s"]},"fields":{}},"s":{"opcode":"motion_pointtowards_menu","next":null,"parent":"I","inputs":{},"fields":{"TOWARDS":["_random_","V8F,K#%Cgn0!xWUc5,kM"]},"shadow":true},"aa":{"opcode":"motion_goto","next":null,"parent":"I","inputs":{"TO":[1,"t"]},"fields":{}},"t":{"opcode":"motion_goto_menu","next":null,"parent":"aa","inputs":{},"fields":{"TO":["_random_","-))2{t{2WIN7w~^qw2?m"]},"shadow":true}},"comments":{},"currentCostume":0,"costumes":[{"name":"test2","bitmapResolution":1,"dataFormat":"svg","assetId":"dc171ebf56bc3484daae02903d226c26","md5ext":"dc171ebf56bc3484daae02903d226c26.svg","rotationCenterX":495.001475,"rotationCenterY":284.789545}],"sounds":[],"id":"!+9vTNFRZE?5MIs^iv!j","volume":100,"layerOrder":4,"visible":true,"x":0,"y":0,"size":100,"direction":90.14886580496119,"draggable":false,"rotationStyle":"all around"},{"isStage":false,"name":"Player","variables":{},"lists":{},"broadcasts":{},"customVars":[],"blocks":{"ab":{"opcode":"event_whenanything","next":"bu","parent":null,"inputs":{"ANYTHING":[2,"ac"]},"fields":{},"topLevel":true},"ac":{"opcode":"operator_or","next":null,"parent":"ab","inputs":{"OPERAND1":[2,"ad"]},"fields":{}},"ad":{"opcode":"sensing_touchingobject","next":null,"parent":"ac","inputs":{"TOUCHINGOBJECTMENU":[1,"bv"]},"fields":{}},"bv":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"ad","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["killbrick","Gtp42QiQsk#r]?)`i|q~"]},"shadow":true},"bu":{"opcode":"event_broadcast","next":null,"parent":"ab","inputs":{"BROADCAST_INPUT":[1,[11,"death!~!!","}PLkO!9Oaawb]Qbwa6bo"]]},"fields":{}},"bw":{"opcode":"event_whenflagclicked","next":"ae","parent":null,"inputs":{},"fields":{},"topLevel":true},"ae":{"opcode":"looks_seteffectto","next":"af","parent":"bw","inputs":{"VALUE":[1,[4,"100"]]},"fields":{"EFFECT":["GHOST","2k(5@LHvu}1H@_qT2^3]"]}},"af":{"opcode":"data_setvariableto","next":"ag","parent":"ae","inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["Xv","8Y/Sg#LdSC:JVxdcVN.T",""]}},"ag":{"opcode":"data_setvariableto","next":"ah","parent":"af","inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["Yv","Xb#gBf3=8,?xg*W]CM?{",""]}},"ah":{"opcode":"looks_hide","next":"bx","parent":"ag","inputs":{},"fields":{}},"bx":{"opcode":"motion_gotoxy","next":null,"parent":"ah","inputs":{"X":[1,[4,"-200"]],"Y":[1,[4,"0"]]},"fields":{}},"dR":{"opcode":"event_whenbroadcastreceived","next":null,"parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["start","!C?0ci=[YVe([KfmF`PY","broadcast_msg"]},"topLevel":true},"by":{"opcode":"event_whenbroadcastreceived","next":"J","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["death!~!!","}PLkO!9Oaawb]Qbwa6bo","broadcast_msg"]},"topLevel":true},"J":{"opcode":"sound_play","next":"ai","parent":"by","inputs":{"SOUND_MENU":[1,"bz"]},"fields":{}},"bz":{"opcode":"sound_sounds_menu","next":null,"parent":"J","inputs":{},"fields":{"SOUND_MENU":["SE4_P_PEACH_GUARD_HANEKAESU1","pd0[aF@YS--@+w#j,qJ@"]},"shadow":true},"ai":{"opcode":"control_stop","next":"aj","parent":"J","inputs":{},"fields":{"STOP_OPTION":["other scripts in sprite","ohilYI6vD(G1B4^dO`H@"]},"mutation":{"tagName":"mutation","children":[],"hasnext":"true"}},"aj":{"opcode":"control_wait","next":"ak","parent":"ai","inputs":{"DURATION":[1,[5,"0.15"]]},"fields":{}},"ak":{"opcode":"motion_gotoxy","next":"bA","parent":"aj","inputs":{"X":[1,[4,"-200"]],"Y":[1,[4,"0"]]},"fields":{}},"bB":{"opcode":"event_whenflagclicked","next":"bC","parent":null,"inputs":{},"fields":{},"topLevel":true},"al":{"opcode":"data_setvariableto","next":"an","parent":"am","inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["Xv","8Y/Sg#LdSC:JVxdcVN.T",""]}},"an":{"opcode":"data_setvariableto","next":"ao","parent":"al","inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["Yv","Xb#gBf3=8,?xg*W]CM?{",""]}},"ao":{"opcode":"control_forever","next":null,"parent":"an","inputs":{"SUBSTACK":[2,"ap"]},"fields":{}},"ap":{"opcode":"control_if","next":null,"parent":"ao","inputs":{"CONDITION":[2,[12,"move?","*I2*f@JUazzg5fPod-Ds"]],"SUBSTACK":[2,"u"]},"fields":{}},"u":{"opcode":"control_if","next":"v","parent":"ap","inputs":{"CONDITION":[2,"aq"],"SUBSTACK":[2,"bD"]},"fields":{}},"aq":{"opcode":"sensing_keypressed","next":null,"parent":"u","inputs":{"KEY_OPTION":[1,"bE"]},"fields":{}},"bE":{"opcode":"sensing_keyoptions","next":null,"parent":"aq","inputs":{},"fields":{"KEY_OPTION":["left arrow","ht{[:wTIpU^bAUn17Moy"]},"shadow":true},"bD":{"opcode":"data_changevariableby","next":null,"parent":"u","inputs":{"VALUE":[1,[4,"-1"]]},"fields":{"VARIABLE":["Xv","8Y/Sg#LdSC:JVxdcVN.T",""]}},"v":{"opcode":"control_if","next":"K","parent":"u","inputs":{"CONDITION":[2,"ar"],"SUBSTACK":[2,"bF"]},"fields":{}},"ar":{"opcode":"sensing_keypressed","next":null,"parent":"v","inputs":{"KEY_OPTION":[1,"bG"]},"fields":{}},"bG":{"opcode":"sensing_keyoptions","next":null,"parent":"ar","inputs":{},"fields":{"KEY_OPTION":["right arrow","U-*nKz8?uA,pIMnJnTB("]},"shadow":true},"bF":{"opcode":"data_changevariableby","next":null,"parent":"v","inputs":{"VALUE":[1,[4,"1"]]},"fields":{"VARIABLE":["Xv","8Y/Sg#LdSC:JVxdcVN.T",""]}},"K":{"opcode":"data_setvariableto","next":"as","parent":"v","inputs":{"VALUE":[3,"bH",[10,""]]},"fields":{"VARIABLE":["Xv","8Y/Sg#LdSC:JVxdcVN.T",""]}},"bH":{"opcode":"operator_multiply","next":null,"parent":"K","inputs":{"NUM1":[3,[12,"Xv","8Y/Sg#LdSC:JVxdcVN.T"],[4,"10"]],"NUM2":[1,[4,"0.9"]]},"fields":{}},"as":{"opcode":"motion_changexby","next":"w","parent":"K","inputs":{"DX":[3,[12,"Xv","8Y/Sg#LdSC:JVxdcVN.T"],[4,"10"]]},"fields":{}},"w":{"opcode":"control_if","next":"at","parent":"as","inputs":{"CONDITION":[2,"au"],"SUBSTACK":[2,"av"]},"fields":{}},"av":{"opcode":"motion_changeyby","next":"L","parent":"w","inputs":{"DY":[1,[4,"1"]]},"fields":{}},"L":{"opcode":"control_if","next":null,"parent":"av","inputs":{"CONDITION":[2,"aw"],"SUBSTACK":[2,"ax"]},"fields":{}},"ax":{"opcode":"motion_changeyby","next":"M","parent":"L","inputs":{"DY":[1,[4,"1"]]},"fields":{}},"M":{"opcode":"control_if","next":null,"parent":"ax","inputs":{"CONDITION":[2,"a"],"SUBSTACK":[2,"b"]},"fields":{}},"b":{"opcode":"motion_changeyby","next":"x","parent":"M","inputs":{"DY":[1,[4,"1"]]},"fields":{}},"x":{"opcode":"control_if","next":"N","parent":"b","inputs":{"CONDITION":[2,"ay"],"SUBSTACK":[2,"bI"]},"fields":{}},"bI":{"opcode":"motion_changeyby","next":null,"parent":"x","inputs":{"DY":[1,[4,"1"]]},"fields":{}},"N":{"opcode":"control_if","next":null,"parent":"x","inputs":{"CONDITION":[2,"az"],"SUBSTACK":[2,"aA"]},"fields":{}},"aA":{"opcode":"motion_changeyby","next":"O","parent":"N","inputs":{"DY":[1,[4,"1"]]},"fields":{}},"O":{"opcode":"control_if","next":null,"parent":"aA","inputs":{"CONDITION":[2,"aB"],"SUBSTACK":[2,"P"]},"fields":{}},"aC":{"opcode":"sensing_touchingobject","next":null,"parent":"y","inputs":{"TOUCHINGOBJECTMENU":[1,"bJ"]},"fields":{}},"bJ":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"aC","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["Level","}|OJ{z9-~~hQ}r/GK3zj"]},"shadow":true},"P":{"opcode":"motion_changexby","next":"aD","parent":"O","inputs":{"DX":[3,"bK",[4,"10"]]},"fields":{}},"bK":{"opcode":"operator_multiply","next":null,"parent":"P","inputs":{"NUM1":[3,[12,"Xv","8Y/Sg#LdSC:JVxdcVN.T"],[4,"10"]],"NUM2":[1,[4,"-1"]]},"fields":{}},"aD":{"opcode":"motion_changeyby","next":"z","parent":"P","inputs":{"DY":[1,[4,"-5"]]},"fields":{}},"z":{"opcode":"control_if_else","next":null,"parent":"aD","inputs":{"CONDITION":[2,"aE"],"SUBSTACK":[2,"k"],"SUBSTACK2":[2,"bL"]},"fields":{}},"aE":{"opcode":"sensing_keypressed","next":null,"parent":"z","inputs":{"KEY_OPTION":[1,"bM"]},"fields":{}},"bM":{"opcode":"sensing_keyoptions","next":null,"parent":"aE","inputs":{},"fields":{"KEY_OPTION":["up arrow","[#czoc}X1g^vlYjF,4*0"]},"shadow":true},"k":{"opcode":"control_if_else","next":"bN","parent":"z","inputs":{"CONDITION":[2,"bO"],"SUBSTACK":[2,"bP"],"SUBSTACK2":[2,"bQ"]},"fields":{}},"bO":{"opcode":"operator_gt","next":null,"parent":"k","inputs":{"OPERAND1":[3,[12,"Xv","8Y/Sg#LdSC:JVxdcVN.T"],[10,""]],"OPERAND2":[1,[10,"0"]]},"fields":{}},"bP":{"opcode":"data_setvariableto","next":null,"parent":"k","inputs":{"VALUE":[1,[10,"-5"]]},"fields":{"VARIABLE":["Xv","8Y/Sg#LdSC:JVxdcVN.T",""]}},"bQ":{"opcode":"data_setvariableto","next":null,"parent":"k","inputs":{"VALUE":[1,[10,"5"]]},"fields":{"VARIABLE":["Xv","8Y/Sg#LdSC:JVxdcVN.T",""]}},"bN":{"opcode":"data_setvariableto","next":null,"parent":"k","inputs":{"VALUE":[1,[10,"12"]]},"fields":{"VARIABLE":["Yv","Xb#gBf3=8,?xg*W]CM?{",""]}},"bL":{"opcode":"data_setvariableto","next":null,"parent":"z","inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["Xv","8Y/Sg#LdSC:JVxdcVN.T",""]}},"at":{"opcode":"data_changevariableby","next":"aF","parent":"w","inputs":{"VALUE":[1,[4,"-1"]]},"fields":{"VARIABLE":["Yv","Xb#gBf3=8,?xg*W]CM?{",""]}},"aF":{"opcode":"motion_changeyby","next":"A","parent":"at","inputs":{"DY":[3,[12,"Yv","Xb#gBf3=8,?xg*W]CM?{"],[4,"10"]]},"fields":{}},"A":{"opcode":"control_if","next":"aG","parent":"aF","inputs":{"CONDITION":[2,"aH"],"SUBSTACK":[2,"Q"]},"fields":{}},"Q":{"opcode":"motion_changeyby","next":"bR","parent":"A","inputs":{"DY":[3,"bS",[4,"10"]]},"fields":{}},"bS":{"opcode":"operator_multiply","next":null,"parent":"Q","inputs":{"NUM1":[3,[12,"Yv","Xb#gBf3=8,?xg*W]CM?{"],[4,"10"]],"NUM2":[1,[4,"-1"]]},"fields":{}},"bR":{"opcode":"data_setvariableto","next":null,"parent":"Q","inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["Yv","Xb#gBf3=8,?xg*W]CM?{",""]}},"aG":{"opcode":"motion_changeyby","next":"y","parent":"A","inputs":{"DY":[1,[4,"-1"]]},"fields":{}},"y":{"opcode":"control_if","next":"bT","parent":"aG","inputs":{"CONDITION":[2,"aC"],"SUBSTACK":[2,"R"]},"fields":{}},"R":{"opcode":"control_if","next":null,"parent":"y","inputs":{"CONDITION":[2,"aI"],"SUBSTACK":[2,"aJ"]},"fields":{}},"aI":{"opcode":"sensing_keypressed","next":null,"parent":"R","inputs":{"KEY_OPTION":[1,"bU"]},"fields":{}},"bU":{"opcode":"sensing_keyoptions","next":null,"parent":"aI","inputs":{},"fields":{"KEY_OPTION":["up arrow","p!6R4ou(iNth:YPAg@^e"]},"shadow":true},"aJ":{"opcode":"data_setvariableto","next":"aK","parent":"R","inputs":{"VALUE":[1,[10,"13"]]},"fields":{"VARIABLE":["Yv","Xb#gBf3=8,?xg*W]CM?{",""]}},"aK":{"opcode":"sound_play","next":null,"parent":"aJ","inputs":{"SOUND_MENU":[1,"bV"]},"fields":{}},"bV":{"opcode":"sound_sounds_menu","next":null,"parent":"aK","inputs":{},"fields":{"SOUND_MENU":["smw2_yoshi_jump","`RROk4Gc4R3~(3!:qEAJ"]},"shadow":true},"bT":{"opcode":"motion_changeyby","next":null,"parent":"y","inputs":{"DY":[1,[4,"1"]]},"fields":{}},"bW":{"opcode":"event_always","next":"aL","parent":null,"inputs":{},"fields":{},"topLevel":true},"aL":{"opcode":"control_forever","next":null,"parent":"bW","inputs":{"SUBSTACK":[2,"S"]},"fields":{}},"S":{"opcode":"data_setvariableto","next":"aM","parent":"aL","inputs":{"VALUE":[3,"bX",[10,"0"]]},"fields":{"VARIABLE":["playerx","-e88v(uJq,+.yyMcSMe7",""]}},"bX":{"opcode":"motion_xposition","next":null,"parent":"S","inputs":{},"fields":{}},"aM":{"opcode":"data_setvariableto","next":null,"parent":"S","inputs":{"VALUE":[3,"bY",[10,"0"]]},"fields":{"VARIABLE":["playery","^XeLT!!fTkOCsT$/-!CL",""]}},"bY":{"opcode":"motion_yposition","next":null,"parent":"aM","inputs":{},"fields":{}},"dS":{"opcode":"data_setvariableto","next":null,"parent":null,"inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["move?","*I2*f@JUazzg5fPod-Ds",""]},"topLevel":true},"dT":{"opcode":"event_whenflagclicked","next":null,"parent":null,"inputs":{},"fields":{},"topLevel":true},"dU":{"opcode":"data_setvariableto","next":null,"parent":null,"inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["my variable","`jEk@4|i[#Fk?(8x)AV.-my variable",""]},"topLevel":true},"aB":{"opcode":"sensing_touchingobject","next":null,"parent":"O","inputs":{"TOUCHINGOBJECTMENU":[1,"bZ"]},"fields":{}},"bZ":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"aB","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["Level","3gkfwwA|r!`V%)ZKdpC@"]},"shadow":true},"au":{"opcode":"sensing_touchingobject","next":null,"parent":"w","inputs":{"TOUCHINGOBJECTMENU":[1,"b!"]},"fields":{}},"b!":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"au","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["Level","blfpN_]Y8Y6W[sRH0Wde"]},"shadow":true},"aw":{"opcode":"sensing_touchingobject","next":null,"parent":"L","inputs":{"TOUCHINGOBJECTMENU":[1,"b#"]},"fields":{}},"b#":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"aw","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["Level","9TQ[Ly*zxxh3t-!^L81]"]},"shadow":true},"a":{"opcode":"sensing_touchingobject","next":null,"parent":"M","inputs":{"TOUCHINGOBJECTMENU":[1,"b%"]},"fields":{}},"b%":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"a","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["Level","`%Hy|=xI.L}5g[(GLPvu"]},"shadow":true},"ay":{"opcode":"sensing_touchingobject","next":null,"parent":"x","inputs":{"TOUCHINGOBJECTMENU":[1,"b("]},"fields":{}},"b(":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"ay","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["Level","2:RmPP@c:mQemO%B,x?`"]},"shadow":true},"az":{"opcode":"sensing_touchingobject","next":null,"parent":"N","inputs":{"TOUCHINGOBJECTMENU":[1,"b)"]},"fields":{}},"b)":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"az","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["Level","kt0!_7%4I(V^b_cCl_Ob"]},"shadow":true},"aH":{"opcode":"sensing_touchingobject","next":null,"parent":"A","inputs":{"TOUCHINGOBJECTMENU":[1,"b*"]},"fields":{}},"b*":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"aH","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["Level","pD(fWL*J^?,=FlU_TuFL"]},"shadow":true},"am":{"opcode":"looks_show","next":"al","parent":"b+","inputs":{},"fields":{}},"dV":{"opcode":"event_whenbroadcastreceived","next":null,"parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["start","!C?0ci=[YVe([KfmF`PY","broadcast_msg"]},"topLevel":true},"b,":{"opcode":"event_whenbroadcastreceived","next":"T","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["start","!C?0ci=[YVe([KfmF`PY","broadcast_msg"]},"topLevel":true},"T":{"opcode":"control_wait_until","next":"aN","parent":"b,","inputs":{"CONDITION":[2,"b-"]},"fields":{}},"b-":{"opcode":"operator_equals","next":null,"parent":"T","inputs":{"OPERAND1":[3,[12,"Camera Mode","f}HE=:hB8`Ah8]D9[rDd"],[10,""]],"OPERAND2":[1,[10,"1"]]},"fields":{}},"aN":{"opcode":"sound_play","next":null,"parent":"T","inputs":{"SOUND_MENU":[1,"b."]},"fields":{}},"b.":{"opcode":"sound_sounds_menu","next":null,"parent":"aN","inputs":{},"fields":{"SOUND_MENU":["SE4_P_PEACH_GUARD_HANEKAESU1","@Fzm8@!|ZqytjAP]5CJ*"]},"shadow":true},"bA":{"opcode":"event_broadcast","next":null,"parent":"ak","inputs":{"BROADCAST_INPUT":[1,[11,"ecgo","xtjgq},,0-)-@#mS+uzM"]]},"fields":{}},"bC":{"opcode":"event_broadcast","next":null,"parent":"bB","inputs":{"BROADCAST_INPUT":[1,[11,"ecgo","xtjgq},,0-)-@#mS+uzM"]]},"fields":{}},"b+":{"opcode":"event_whenbroadcastreceived","next":"am","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["ecgo","xtjgq},,0-)-@#mS+uzM","broadcast_msg"]},"topLevel":true}},"comments":{},"currentCostume":0,"costumes":[{"name":"hitbox","bitmapResolution":1,"dataFormat":"svg","assetId":"c6616f4fc02651ee75146e57ffb23d2a","md5ext":"c6616f4fc02651ee75146e57ffb23d2a.svg","rotationCenterX":23.419541912312297,"rotationCenterY":54.267221321521205},{"name":"costume1","bitmapResolution":1,"dataFormat":"svg","assetId":"433532baf779999f8f960d8c6151f818","md5ext":"433532baf779999f8f960d8c6151f818.svg","rotationCenterX":40,"rotationCenterY":40}],"sounds":[{"name":"smw2_yoshi_jump","assetId":"a004e98c82f73251cd5719aba4b0af66","dataFormat":"wav","format":"","rate":48000,"sampleCount":12463,"md5ext":"a004e98c82f73251cd5719aba4b0af66.wav"},{"name":"SE4_P_PEACH_GUARD_HANEKAESU1","assetId":"003de69ab77962c532341d62c90fb492","dataFormat":"wav","format":"","rate":48000,"sampleCount":29463,"md5ext":"003de69ab77962c532341d62c90fb492.wav"},{"name":"SE4_P_PEACH_GUARD_HANEKAESU2","assetId":"5d886f497edde5f16974ec847e8e6b16","dataFormat":"wav","format":"","rate":48000,"sampleCount":46769,"md5ext":"5d886f497edde5f16974ec847e8e6b16.wav"}],"id":"|[MVga]]xr`aY;onGeiO","volume":100,"layerOrder":5,"visible":true,"x":-200,"y":-67,"size":30,"direction":90,"draggable":false,"rotationStyle":"all around"},{"isStage":false,"name":"Player Assets","variables":{},"lists":{},"broadcasts":{},"customVars":[],"blocks":{"b/":{"opcode":"event_whenkeypressed","next":"U","parent":null,"inputs":{},"fields":{"KEY_OPTION":["left arrow","Iq0!~BX~c[bG3Nsbdk@@"]},"topLevel":true},"U":{"opcode":"control_if_else","next":null,"parent":"b/","inputs":{"CONDITION":[2,[12,"lo","9l,AW,-RS`$yZOJ*?BXc"]],"SUBSTACK":[2,"aO"],"SUBSTACK2":[2,"aP"]},"fields":{}},"aO":{"opcode":"looks_switchcostumeto","next":null,"parent":"U","inputs":{"COSTUME":[1,"b:"]},"fields":{}},"b:":{"opcode":"looks_costume","next":null,"parent":"aO","inputs":{},"fields":{"COSTUME":["lokkle left","%l@Cmhrd)||QV-exqq+!"]},"shadow":true},"aP":{"opcode":"looks_switchcostumeto","next":null,"parent":"U","inputs":{"COSTUME":[1,"b;"]},"fields":{}},"b;":{"opcode":"looks_costume","next":null,"parent":"aP","inputs":{},"fields":{"COSTUME":["echo left","M0@7.Ap@ha~q9zkQaf0q"]},"shadow":true},"b=":{"opcode":"event_whenkeypressed","next":"V","parent":null,"inputs":{},"fields":{"KEY_OPTION":["right arrow","=S2#e,/vacg7S{5041n+"]},"topLevel":true},"V":{"opcode":"control_if_else","next":null,"parent":"b=","inputs":{"CONDITION":[2,[12,"lo","9l,AW,-RS`$yZOJ*?BXc"]],"SUBSTACK":[2,"aQ"],"SUBSTACK2":[2,"aR"]},"fields":{}},"aQ":{"opcode":"looks_switchcostumeto","next":null,"parent":"V","inputs":{"COSTUME":[1,"b?"]},"fields":{}},"b?":{"opcode":"looks_costume","next":null,"parent":"aQ","inputs":{},"fields":{"COSTUME":["lokkle right","wtFy1LqS[|JEkC/ZdT6."]},"shadow":true},"aR":{"opcode":"looks_switchcostumeto","next":null,"parent":"V","inputs":{"COSTUME":[1,"b@"]},"fields":{}},"b@":{"opcode":"looks_costume","next":null,"parent":"aR","inputs":{},"fields":{"COSTUME":["echo right","jXRvY6L.|K8Kfw;j(27j"]},"shadow":true},"b[":{"opcode":"event_always","next":"aS","parent":null,"inputs":{},"fields":{},"topLevel":true},"aS":{"opcode":"motion_goto","next":null,"parent":"b[","inputs":{"TO":[1,"b]"]},"fields":{}},"b]":{"opcode":"motion_goto_menu","next":null,"parent":"aS","inputs":{},"fields":{"TO":["Player","[O%[P4?:/Sk4ek[Z1)G!"]},"shadow":true},"b^":{"opcode":"event_whenflagclicked","next":"aT","parent":null,"inputs":{},"fields":{},"topLevel":true},"aT":{"opcode":"looks_setsizeto","next":"aU","parent":"b^","inputs":{"SIZE":[1,[4,"30"]]},"fields":{}},"aU":{"opcode":"looks_show","next":"b_","parent":"aT","inputs":{},"fields":{}},"b_":{"opcode":"looks_gotofrontback","next":null,"parent":"aU","inputs":{},"fields":{"FRONT_BACK":["front","yh;[W:vx7t#Q2%ZLQ8Gf"]}},"b`":{"opcode":"event_whenbroadcastreceived","next":"W","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["cam_hunt_zoom_In","+O`a([vPq^Z~q}!]!}+`","broadcast_msg"]},"topLevel":true},"W":{"opcode":"control_if_else","next":null,"parent":"b`","inputs":{"CONDITION":[2,[12,"lo","9l,AW,-RS`$yZOJ*?BXc"]],"SUBSTACK":[2,"aV"],"SUBSTACK2":[2,"aW"]},"fields":{}},"aV":{"opcode":"looks_switchcostumeto","next":null,"parent":"W","inputs":{"COSTUME":[1,"b{"]},"fields":{}},"b{":{"opcode":"looks_costume","next":null,"parent":"aV","inputs":{},"fields":{"COSTUME":["lokkle right","*{WH!*8kIklKAM8k2h`n"]},"shadow":true},"aW":{"opcode":"looks_switchcostumeto","next":null,"parent":"W","inputs":{"COSTUME":[1,"b|"]},"fields":{}},"b|":{"opcode":"looks_costume","next":null,"parent":"aW","inputs":{},"fields":{"COSTUME":["echo right","U%{I(uNv;K*p@-:l3h!`"]},"shadow":true},"dW":{"opcode":"looks_setsizeto","next":null,"parent":null,"inputs":{"SIZE":[1,[4,"200"]]},"fields":{},"topLevel":true},"l":{"opcode":"jgTween_tweenC","next":null,"parent":null,"inputs":{"MODE":[1,"b}"],"DIRECTION":[1,"b~"],"CHANGE":[1,"ca"],"START":[3,"cb",[4,"100"]],"END":[1,[4,"1"]],"SEC":[1,[4,"0.05"]],"SUBSTACK":[2,"aX"]},"fields":{},"topLevel":true},"b}":{"opcode":"jgTween_menu_modes","next":null,"parent":"l","inputs":{},"fields":{"modes":["linear","@dJ|D07CO|QilPZC8j?6"]},"shadow":true},"b~":{"opcode":"jgTween_menu_direction","next":null,"parent":"l","inputs":{},"fields":{"direction":["out","so!B[{Y6IFE#+i-mouAX"]},"shadow":true},"ca":{"opcode":"jgTween_tweenVal","next":null,"parent":"l","inputs":{},"fields":{},"shadow":true},"cb":{"opcode":"looks_stretchGetX","next":null,"parent":"l","inputs":{},"fields":{}},"aX":{"opcode":"looks_setStretch","next":null,"parent":"l","inputs":{"X":[3,"cc",[4,"100"]],"Y":[1,[4,"100"]]},"fields":{}},"cc":{"opcode":"jgTween_tweenVal","next":null,"parent":"aX","inputs":{},"fields":{}},"B":{"opcode":"jgTween_tweenC","next":null,"parent":null,"inputs":{"MODE":[1,"cd"],"DIRECTION":[1,"ce"],"CHANGE":[1,"cf"],"START":[1,[4,"1"]],"END":[1,[4,"100"]],"SEC":[1,[4,"0.05"]],"SUBSTACK":[2,"aY"]},"fields":{},"topLevel":true},"cd":{"opcode":"jgTween_menu_modes","next":null,"parent":"B","inputs":{},"fields":{"modes":["linear","x~%JrcB0qIA%xDRX3jWq"]},"shadow":true},"ce":{"opcode":"jgTween_menu_direction","next":null,"parent":"B","inputs":{},"fields":{"direction":["out","v!#Onh1#(i!,VvCAN3Ws"]},"shadow":true},"cf":{"opcode":"jgTween_tweenVal","next":null,"parent":"B","inputs":{},"fields":{},"shadow":true},"aY":{"opcode":"looks_setStretch","next":null,"parent":"B","inputs":{"X":[3,"cg",[4,"100"]],"Y":[1,[4,"100"]]},"fields":{}},"cg":{"opcode":"jgTween_tweenVal","next":null,"parent":"aY","inputs":{},"fields":{}},"dX":{"opcode":"data_setvariableto","next":null,"parent":null,"inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["lo","9l,AW,-RS`$yZOJ*?BXc",""]},"topLevel":true}},"comments":{},"currentCostume":1,"costumes":[{"name":"echo left","bitmapResolution":1,"dataFormat":"svg","assetId":"380bf6b7008e91665b96ed846b0c7c0d","md5ext":"380bf6b7008e91665b96ed846b0c7c0d.svg","rotationCenterX":72.66750382324469,"rotationCenterY":93.85676657157423},{"name":"echo right","bitmapResolution":1,"dataFormat":"svg","assetId":"e71450cd95b07584878b10c8f20209a9","md5ext":"e71450cd95b07584878b10c8f20209a9.svg","rotationCenterX":72.66749385065802,"rotationCenterY":93.85676157157422}],"sounds":[],"id":"JyU3ciL!!~xD,+1uIu[?","volume":100,"layerOrder":8,"visible":true,"x":-200,"y":-67,"size":30,"direction":90,"draggable":false,"rotationStyle":"all around"},{"isStage":false,"name":"camera","variables":{},"lists":{},"broadcasts":{},"customVars":[],"blocks":{"ch":{"opcode":"event_always","next":"X","parent":null,"inputs":{},"fields":{},"topLevel":true},"X":{"opcode":"pmCamera_gotoXY","next":null,"parent":"ch","inputs":{"X":[3,"ci",[4,"0"]],"Y":[3,"cj",[4,"0"]]},"fields":{}},"ci":{"opcode":"motion_xposition","next":null,"parent":"X","inputs":{},"fields":{}},"cj":{"opcode":"motion_yposition","next":null,"parent":"X","inputs":{},"fields":{}},"ck":{"opcode":"event_whenflagclicked","next":"aZ","parent":null,"inputs":{},"fields":{},"topLevel":true},"aZ":{"opcode":"data_setvariableto","next":"a!","parent":"ck","inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["Camera Mode","f}HE=:hB8`Ah8]D9[rDd",""]}},"Y":{"opcode":"jgRuntime_updateRuntimeConfig","next":"a#","parent":"a!","inputs":{"OPTION":[1,"cl"]},"fields":{"ENABLED":["off","v*e~{hI![cB`*qa2G.tP"]}},"cl":{"opcode":"jgRuntime_menu_runtimeConfig","next":null,"parent":"Y","inputs":{},"fields":{"runtimeConfig":["interpolation","zt-s/VYts|F/?ru7m;/4"]},"shadow":true},"a#":{"opcode":"looks_setsizeto","next":"a%","parent":"Y","inputs":{"SIZE":[1,[4,"200"]]},"fields":{}},"a%":{"opcode":"motion_gotoxy","next":"a(","parent":"a#","inputs":{"X":[1,[4,"0"]],"Y":[1,[4,"0"]]},"fields":{}},"a(":{"opcode":"pmCamera_setSize","next":"a)","parent":"a%","inputs":{"ZOOM":[1,[4,"50"]]},"fields":{}},"a)":{"opcode":"event_broadcast","next":"a*","parent":"a(","inputs":{"BROADCAST_INPUT":[1,[11,"start","!C?0ci=[YVe([KfmF`PY"]]},"fields":{}},"a*":{"opcode":"control_forever","next":null,"parent":"a)","inputs":{"SUBSTACK":[2,"Z"]},"fields":{}},"Z":{"opcode":"control_if","next":null,"parent":"a*","inputs":{"CONDITION":[2,"cm"],"SUBSTACK":[2,"cn"]},"fields":{}},"cm":{"opcode":"operator_equals","next":null,"parent":"Z","inputs":{"OPERAND1":[3,[12,"Camera Mode","f}HE=:hB8`Ah8]D9[rDd"],[10,""]],"OPERAND2":[1,[10,"1"]]},"fields":{}},"cn":{"opcode":"motion_gotoxy","next":null,"parent":"Z","inputs":{"X":[3,[12,"playerx","-e88v(uJq,+.yyMcSMe7"],[4,"-200"]],"Y":[3,[12,"playery","^XeLT!!fTkOCsT$/-!CL"],[4,"0"]]},"fields":{}},"co":{"opcode":"event_whenbroadcastreceived","next":"a+","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["start","!C?0ci=[YVe([KfmF`PY","broadcast_msg"]},"topLevel":true},"a+":{"opcode":"control_wait","next":"m","parent":"co","inputs":{"DURATION":[1,[5,"5"]]},"fields":{}},"m":{"opcode":"jgTween_tweenC","next":null,"parent":"a+","inputs":{"MODE":[1,"cp"],"DIRECTION":[1,"cq"],"CHANGE":[1,"cr"],"START":[1,[4,"200"]],"END":[1,[4,"100"]],"SEC":[1,[4,"0.5"]],"SUBSTACK":[2,"a,"]},"fields":{}},"cp":{"opcode":"jgTween_menu_modes","next":null,"parent":"m","inputs":{},"fields":{"modes":["quad","h@AqhJx8[jJ]DWWwV2{."]},"shadow":true},"cq":{"opcode":"jgTween_menu_direction","next":null,"parent":"m","inputs":{},"fields":{"direction":["out","iDJo|Bi=Zw/p,h~|z;Ms"]},"shadow":true},"cr":{"opcode":"jgTween_tweenVal","next":null,"parent":"m","inputs":{},"fields":{},"shadow":true},"a,":{"opcode":"looks_setsizeto","next":null,"parent":"m","inputs":{"SIZE":[3,"cs",[4,"200"]]},"fields":{}},"cs":{"opcode":"jgTween_tweenVal","next":null,"parent":"a,","inputs":{},"fields":{}},"ct":{"opcode":"event_whenbroadcastreceived","next":"a-","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["start","!C?0ci=[YVe([KfmF`PY","broadcast_msg"]},"topLevel":true},"a-":{"opcode":"control_wait","next":"c","parent":"ct","inputs":{"DURATION":[1,[5,"5"]]},"fields":{}},"c":{"opcode":"jgTween_tweenC","next":"!","parent":"a-","inputs":{"MODE":[1,"cu"],"DIRECTION":[1,"cv"],"CHANGE":[1,"cw"],"START":[1,[4,"50"]],"END":[1,[4,"100"]],"SEC":[1,[4,"0.5"]],"SUBSTACK":[2,"a."]},"fields":{}},"cu":{"opcode":"jgTween_menu_modes","next":null,"parent":"c","inputs":{},"fields":{"modes":["quad","7@vPrrDvy9f??{/q-}%U"]},"shadow":true},"cv":{"opcode":"jgTween_menu_direction","next":null,"parent":"c","inputs":{},"fields":{"direction":["out","3k7e6zsEEg].BGiZ;?`^"]},"shadow":true},"cw":{"opcode":"jgTween_tweenVal","next":null,"parent":"c","inputs":{},"fields":{},"shadow":true},"a.":{"opcode":"pmCamera_setSize","next":null,"parent":"c","inputs":{"ZOOM":[3,"cx",[4,"50"]]},"fields":{}},"cx":{"opcode":"jgTween_tweenVal","next":null,"parent":"a.","inputs":{},"fields":{}},"!":{"opcode":"jgRuntime_updateRuntimeConfig","next":"a/","parent":"c","inputs":{"OPTION":[1,"cy"]},"fields":{"ENABLED":["on","CJIO`l[.v5@[~w_):b5{"]}},"cy":{"opcode":"jgRuntime_menu_runtimeConfig","next":null,"parent":"!","inputs":{},"fields":{"runtimeConfig":["interpolation",".|tffl7M@4_XtoQ/[B2|"]},"shadow":true},"a:":{"opcode":"data_setvariableto","next":"cz","parent":"a/","inputs":{"VALUE":[1,[10,"1"]]},"fields":{"VARIABLE":["Camera Mode","f}HE=:hB8`Ah8]D9[rDd",""]}},"cA":{"opcode":"event_whenbroadcastreceived","next":"a;","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["start","!C?0ci=[YVe([KfmF`PY","broadcast_msg"]},"topLevel":true},"a;":{"opcode":"control_wait","next":"#","parent":"cA","inputs":{"DURATION":[1,[5,"5"]]},"fields":{}},"#":{"opcode":"jgTween_tweenXY","next":null,"parent":"a;","inputs":{"X":[1,[4,"-200"]],"Y":[1,[4,"0"]],"SEC":[1,[4,"0.50"]],"MODE":[1,"cB"],"DIRECTION":[1,"cC"]},"fields":{}},"cB":{"opcode":"jgTween_menu_modes","next":null,"parent":"#","inputs":{},"fields":{"modes":["sine","ho`}evOl[!jA{+m-hpqS"]},"shadow":true},"cC":{"opcode":"jgTween_menu_direction","next":null,"parent":"#","inputs":{},"fields":{"direction":["out",".0`NXcH8`ky|hP;OYe+C"]},"shadow":true},"dY":{"opcode":"control_wait","next":null,"parent":null,"inputs":{"DURATION":[1,[5,"1"]]},"fields":{},"topLevel":true},"dZ":{"opcode":"looks_gotofrontback","next":null,"parent":null,"inputs":{},"fields":{"FRONT_BACK":["back","53#/uA;*iBmif~3oC^R-"]},"topLevel":true},"a/":{"opcode":"control_wait","next":"a:","parent":"!","inputs":{"DURATION":[1,[5,"0.5"]]},"fields":{}},"C":{"opcode":"jgTween_tweenC","next":null,"parent":null,"inputs":{"MODE":[1,"cD"],"DIRECTION":[1,"cE"],"CHANGE":[1,"cF"],"START":[1,[4,"200"]],"END":[1,[4,"100"]],"SEC":[1,[4,"0.5"]],"SUBSTACK":[2,"a="]},"fields":{},"topLevel":true},"cD":{"opcode":"jgTween_menu_modes","next":null,"parent":"C","inputs":{},"fields":{"modes":["quad","rM@~cl=/5pS:obTZO0-P"]},"shadow":true},"cE":{"opcode":"jgTween_menu_direction","next":null,"parent":"C","inputs":{},"fields":{"direction":["out","^8:JUSRe]BFLNrEgA-~."]},"shadow":true},"cF":{"opcode":"jgTween_tweenVal","next":null,"parent":"C","inputs":{},"fields":{},"shadow":true},"a=":{"opcode":"looks_setsizeto","next":null,"parent":"C","inputs":{"SIZE":[3,"cG",[4,"200"]]},"fields":{}},"cG":{"opcode":"jgTween_tweenVal","next":null,"parent":"a=","inputs":{},"fields":{}},"cz":{"opcode":"data_setvariableto","next":null,"parent":"a:","inputs":{"VALUE":[1,[10,"1"]]},"fields":{"VARIABLE":["move?","*I2*f@JUazzg5fPod-Ds",""]}},"a!":{"opcode":"data_setvariableto","next":"Y","parent":"aZ","inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["move?","*I2*f@JUazzg5fPod-Ds",""]}}},"comments":{},"currentCostume":0,"costumes":[{"name":"costume1","bitmapResolution":1,"dataFormat":"svg","assetId":"b195010ec772516d6d96b1b4061c90a2","md5ext":"b195010ec772516d6d96b1b4061c90a2.svg","rotationCenterX":333.15332,"rotationCenterY":196.74331}],"sounds":[],"id":"#L({!)KyoR#DN`nw}c,g","volume":100,"layerOrder":1,"visible":true,"x":-200,"y":-66,"size":100,"direction":90,"draggable":false,"rotationStyle":"all around"},{"isStage":false,"name":"Sprite1","variables":{},"lists":{},"broadcasts":{},"customVars":[],"blocks":{"d!":{"opcode":"pmCamera_xPosition","next":null,"parent":null,"inputs":{},"fields":{},"topLevel":true},"d#":{"opcode":"looks_gotofrontback","next":null,"parent":null,"inputs":{},"fields":{"FRONT_BACK":["back","#C3?n5wqdgBzW[T;4*qC"]},"topLevel":true},"d%":{"opcode":"looks_goforwardbackwardlayers","next":null,"parent":null,"inputs":{"NUM":[1,[7,"1"]]},"fields":{"FORWARD_BACKWARD":["forward","OX_nIv{)[(y}mHEwWF%n"]},"topLevel":true},"d(":{"opcode":"operator_divide","next":null,"parent":null,"inputs":{"NUM1":[1,[4,""]],"NUM2":[1,[4,"2"]]},"fields":{},"topLevel":true},"d)":{"opcode":"operator_divide","next":null,"parent":null,"inputs":{"NUM1":[1,[4,""]],"NUM2":[1,[4,"2"]]},"fields":{},"topLevel":true},"cH":{"opcode":"event_whenflagclicked","next":"a?","parent":null,"inputs":{},"fields":{},"topLevel":true},"a?":{"opcode":"control_forever","next":null,"parent":"cH","inputs":{"SUBSTACK":[2,"%"]},"fields":{}},"%":{"opcode":"motion_gotoxy","next":null,"parent":"a?","inputs":{"X":[3,"a@",[4,"0"]],"Y":[3,"a[",[4,"0"]]},"fields":{}},"a@":{"opcode":"operator_divide","next":null,"parent":"%","inputs":{"NUM1":[3,"cI",[4,""]],"NUM2":[1,[4,"2"]]},"fields":{}},"cI":{"opcode":"pmCamera_xPosition","next":null,"parent":"a@","inputs":{},"fields":{}},"a[":{"opcode":"operator_divide","next":null,"parent":"%","inputs":{"NUM1":[3,"cJ",[4,""]],"NUM2":[1,[4,"2"]]},"fields":{}},"cJ":{"opcode":"pmCamera_yPosition","next":null,"parent":"a[","inputs":{},"fields":{}}},"comments":{},"currentCostume":0,"costumes":[{"name":"unnamed","bitmapResolution":1,"dataFormat":"svg","assetId":"29ec84d03287be1d9fa0cff2f5c791f9","md5ext":"29ec84d03287be1d9fa0cff2f5c791f9.svg","rotationCenterX":450.1604653866877,"rotationCenterY":188.74997977719994}],"sounds":[],"id":"NKn-?2~lGVTAwLDy,v2y","volume":100,"layerOrder":3,"visible":true,"x":-100,"y":-27.5,"size":100,"direction":90,"draggable":false,"rotationStyle":"all around"},{"isStage":false,"name":"Sprite2","variables":{},"lists":{},"broadcasts":{},"customVars":[],"blocks":{"d*":{"opcode":"pmCamera_xPosition","next":null,"parent":null,"inputs":{},"fields":{},"topLevel":true},"d+":{"opcode":"looks_gotofrontback","next":null,"parent":null,"inputs":{},"fields":{"FRONT_BACK":["back","[]5+Zlu:h{Ua*`o]FNWY"]},"topLevel":true},"d,":{"opcode":"looks_goforwardbackwardlayers","next":null,"parent":null,"inputs":{"NUM":[1,[7,"1"]]},"fields":{"FORWARD_BACKWARD":["forward","KqkQ?Q[Cn4mV9NPven=j"]},"topLevel":true},"d-":{"opcode":"operator_divide","next":null,"parent":null,"inputs":{"NUM1":[1,[4,""]],"NUM2":[1,[4,"2"]]},"fields":{},"topLevel":true},"cK":{"opcode":"event_whenflagclicked","next":"a]","parent":null,"inputs":{},"fields":{},"topLevel":true},"a]":{"opcode":"control_forever","next":null,"parent":"cK","inputs":{"SUBSTACK":[2,"("]},"fields":{}},"(":{"opcode":"motion_gotoxy","next":null,"parent":"a]","inputs":{"X":[3,"a^",[4,"0"]],"Y":[3,"a_",[4,"0"]]},"fields":{}},"a^":{"opcode":"operator_divide","next":null,"parent":"(","inputs":{"NUM1":[3,"cL",[4,""]],"NUM2":[1,[4,"1.5"]]},"fields":{}},"cL":{"opcode":"pmCamera_xPosition","next":null,"parent":"a^","inputs":{},"fields":{}},"a_":{"opcode":"operator_divide","next":null,"parent":"(","inputs":{"NUM1":[3,"cM",[4,""]],"NUM2":[1,[4,"1.5"]]},"fields":{}},"cM":{"opcode":"pmCamera_yPosition","next":null,"parent":"a_","inputs":{},"fields":{}}},"comments":{},"currentCostume":0,"costumes":[{"name":"costume3","bitmapResolution":1,"dataFormat":"svg","assetId":"defb0e3a66309ff16ad9bacf8f46e468","md5ext":"defb0e3a66309ff16ad9bacf8f46e468.svg","rotationCenterX":1141.8536550000001,"rotationCenterY":113.88523938183057}],"sounds":[],"id":"Q)SYavn6^RH@2k}]JK,*","volume":100,"layerOrder":2,"visible":true,"x":-133.33333333333334,"y":-36.666666666666664,"size":100,"direction":90,"draggable":false,"rotationStyle":"all around"},{"isStage":false,"name":"Sprite3","variables":{},"lists":{},"broadcasts":{},"customVars":[],"blocks":{"a`":{"opcode":"pmCamera_unbindTarget","next":"cO","parent":"cN","inputs":{},"fields":{"TARGET":["__MYSELF__","jRY=MpIOA+uGh!+~Z9`O"]}},"cP":{"opcode":"event_whenbroadcastreceived","next":"a{","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["start","!C?0ci=[YVe([KfmF`PY","broadcast_msg"]},"topLevel":true},"a{":{"opcode":"looks_setStretch","next":"a|","parent":"cP","inputs":{"X":[1,[4,"100"]],"Y":[1,[4,"100"]]},"fields":{}},"a|":{"opcode":"control_wait","next":"n","parent":"a{","inputs":{"DURATION":[1,[5,"2.5"]]},"fields":{}},"n":{"opcode":"jgTween_tweenC","next":null,"parent":"a|","inputs":{"MODE":[1,"cQ"],"DIRECTION":[1,"cR"],"CHANGE":[1,"cS"],"START":[1,[4,"100"]],"END":[1,[4,"0"]],"SEC":[1,[4,"0.5"]],"SUBSTACK":[2,"a}"]},"fields":{}},"cQ":{"opcode":"jgTween_menu_modes","next":null,"parent":"n","inputs":{},"fields":{"modes":["linear","T~{J7e=:!OlMbmgIthUu"]},"shadow":true},"cR":{"opcode":"jgTween_menu_direction","next":null,"parent":"n","inputs":{},"fields":{"direction":["out","Uq|oH5II,dm;tc}xK68~"]},"shadow":true},"cS":{"opcode":"jgTween_tweenVal","next":null,"parent":"n","inputs":{},"fields":{},"shadow":true},"a}":{"opcode":"looks_setStretch","next":null,"parent":"n","inputs":{"X":[1,[4,"100"]],"Y":[3,"cT",[4,"100"]]},"fields":{}},"cT":{"opcode":"jgTween_tweenVal","next":null,"parent":"a}","inputs":{},"fields":{}},"d.":{"opcode":"event_broadcast","next":null,"parent":null,"inputs":{"BROADCAST_INPUT":[1,[11,"start","!C?0ci=[YVe([KfmF`PY"]]},"fields":{},"topLevel":true},"D":{"opcode":"jgTween_tweenC","next":null,"parent":null,"inputs":{"MODE":[1,"cU"],"DIRECTION":[1,"cV"],"CHANGE":[1,"cW"],"START":[1,[4,"100"]],"END":[1,[4,"0"]],"SEC":[1,[4,"0.5"]],"SUBSTACK":[2,"a~"]},"fields":{},"topLevel":true},"cU":{"opcode":"jgTween_menu_modes","next":null,"parent":"D","inputs":{},"fields":{"modes":["linear","ELU_1=w7WFBT~6RlvGu5"]},"shadow":true},"cV":{"opcode":"jgTween_menu_direction","next":null,"parent":"D","inputs":{},"fields":{"direction":["out","SopZz}]Y/1cmdC|i^pK+"]},"shadow":true},"cW":{"opcode":"jgTween_tweenVal","next":null,"parent":"D","inputs":{},"fields":{},"shadow":true},"a~":{"opcode":"looks_setStretch","next":null,"parent":"D","inputs":{"X":[1,[4,"100"]],"Y":[3,"cX",[4,"100"]]},"fields":{}},"cX":{"opcode":"jgTween_tweenVal","next":null,"parent":"a~","inputs":{},"fields":{}},"cN":{"opcode":"event_always","next":"a`","parent":null,"inputs":{},"fields":{},"topLevel":true},"cO":{"opcode":"looks_gotofrontback","next":null,"parent":"a`","inputs":{},"fields":{"FRONT_BACK":["front","sBnAz}:Mz1XqqH=LRR|d"]}}},"comments":{},"currentCostume":0,"costumes":[{"name":"costume3","bitmapResolution":1,"dataFormat":"svg","assetId":"a16cef166d180e69b22c20ddf899d6c9","md5ext":"a16cef166d180e69b22c20ddf899d6c9.svg","rotationCenterX":393.8552652744986,"rotationCenterY":190.50000000000006}],"sounds":[],"id":"L9,b}!y*bw-t7{e-F/VV","volume":100,"layerOrder":9,"visible":true,"x":0,"y":0,"size":100,"direction":90,"draggable":false,"rotationStyle":"all around"},{"isStage":false,"name":"Sprite4","variables":{},"lists":{},"broadcasts":{},"customVars":[],"blocks":{"ba":{"opcode":"event_whenanything","next":"bb","parent":null,"inputs":{"ANYTHING":[2,"o"]},"fields":{},"topLevel":true},"o":{"opcode":"sensing_touchingobject","next":null,"parent":"ba","inputs":{"TOUCHINGOBJECTMENU":[1,"cY"]},"fields":{}},"cY":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"o","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["Player","BMss4{hB1vJ=L]Zw(X?d"]},"shadow":true},"bb":{"opcode":"data_changevariableby","next":"a","parent":"ba","inputs":{"VALUE":[1,[4,"1"]]},"fields":{"VARIABLE":["stars","fVz+4tzmsgMM~MbX~`cM",""]}},"a":{"opcode":"sound_play","next":"E","parent":"bb","inputs":{"SOUND_MENU":[1,"cZ"]},"fields":{}},"cZ":{"opcode":"sound_sounds_menu","next":null,"parent":"a","inputs":{},"fields":{"SOUND_MENU":["Tada","G?Zs_)],6d*nYLsYO]y+"]},"shadow":true},"E":{"opcode":"control_if","next":"c!","parent":"a","inputs":{"CONDITION":[2,"c#"],"SUBSTACK":[2,"bc"]},"fields":{}},"c#":{"opcode":"operator_equals","next":null,"parent":"E","inputs":{"OPERAND1":[3,[12,"star bomb???","utg$:-)#KH{fMd^UW7lc"],[10,""]],"OPERAND2":[1,[10,"1"]]},"fields":{}},"bc":{"opcode":"looks_show","next":")","parent":"E","inputs":{},"fields":{}},")":{"opcode":"looks_switchcostumeto","next":"*","parent":"bc","inputs":{"COSTUME":[1,"c%"]},"fields":{}},"c%":{"opcode":"looks_costume","next":null,"parent":")","inputs":{},"fields":{"COSTUME":["costume5","w6QHXiqs.@P_;N.zpT]c"]},"shadow":true},"*":{"opcode":"sound_play","next":"d","parent":")","inputs":{"SOUND_MENU":[1,"c("]},"fields":{}},"c(":{"opcode":"sound_sounds_menu","next":null,"parent":"*","inputs":{},"fields":{"SOUND_MENU":["tick3","6ac9XwJ:1G7[MW::cJVg"]},"shadow":true},"d":{"opcode":"jgTween_tweenC","next":"e","parent":"*","inputs":{"MODE":[1,"c)"],"DIRECTION":[1,"c*"],"CHANGE":[1,"c+"],"START":[1,[4,"100"]],"END":[1,[4,"50"]],"SEC":[1,[4,"0.1"]],"SUBSTACK":[2,"+"]},"fields":{}},"c)":{"opcode":"jgTween_menu_modes","next":null,"parent":"d","inputs":{},"fields":{"modes":["linear","n?VwV}{zpcpt49.`c]I3"]},"shadow":true},"c*":{"opcode":"jgTween_menu_direction","next":null,"parent":"d","inputs":{},"fields":{"direction":["out","mLf[NecWCph47V?0Hc-C"]},"shadow":true},"c+":{"opcode":"jgTween_tweenVal","next":null,"parent":"d","inputs":{},"fields":{},"shadow":true},"+":{"opcode":"looks_setStretch","next":null,"parent":"d","inputs":{"X":[3,"c,",[4,"100"]],"Y":[3,"c-",[4,"100"]]},"fields":{}},"c,":{"opcode":"looks_stretchGetX","next":null,"parent":"+","inputs":{},"fields":{}},"c-":{"opcode":"jgTween_tweenVal","next":null,"parent":"+","inputs":{},"fields":{}},"e":{"opcode":"jgTween_tweenC","next":",","parent":"d","inputs":{"MODE":[1,"c."],"DIRECTION":[1,"c/"],"CHANGE":[1,"c:"],"START":[1,[4,"100"]],"END":[1,[4,"150"]],"SEC":[1,[4,"0.1"]],"SUBSTACK":[2,"-"]},"fields":{}},"c.":{"opcode":"jgTween_menu_modes","next":null,"parent":"e","inputs":{},"fields":{"modes":["linear","v[^yEA6Je?XEg|6fl+Jt"]},"shadow":true},"c/":{"opcode":"jgTween_menu_direction","next":null,"parent":"e","inputs":{},"fields":{"direction":["out","sIHO~#[IS06W0*iic:22"]},"shadow":true},"c:":{"opcode":"jgTween_tweenVal","next":null,"parent":"e","inputs":{},"fields":{},"shadow":true},"-":{"opcode":"looks_setStretch","next":null,"parent":"e","inputs":{"X":[3,"c;",[4,"100"]],"Y":[3,"c=",[4,"100"]]},"fields":{}},"c;":{"opcode":"jgTween_tweenVal","next":null,"parent":"-","inputs":{},"fields":{}},"c=":{"opcode":"looks_stretchGetY","next":null,"parent":"-","inputs":{},"fields":{}},",":{"opcode":"looks_switchcostumeto","next":".","parent":"e","inputs":{"COSTUME":[1,"c?"]},"fields":{}},"c?":{"opcode":"looks_costume","next":null,"parent":",","inputs":{},"fields":{"COSTUME":["costume6","=Q-!oY^]ZCHVvtlKC`Y="]},"shadow":true},".":{"opcode":"sound_play","next":"f","parent":",","inputs":{"SOUND_MENU":[1,"c@"]},"fields":{}},"c@":{"opcode":"sound_sounds_menu","next":null,"parent":".","inputs":{},"fields":{"SOUND_MENU":["tick3","6Cwe]eI?MA`)]]emc%Gs"]},"shadow":true},"f":{"opcode":"jgTween_tweenC","next":"g","parent":".","inputs":{"MODE":[1,"c["],"DIRECTION":[1,"c]"],"CHANGE":[1,"c^"],"START":[1,[4,"100"]],"END":[1,[4,"50"]],"SEC":[1,[4,"0.1"]],"SUBSTACK":[2,"/"]},"fields":{}},"c[":{"opcode":"jgTween_menu_modes","next":null,"parent":"f","inputs":{},"fields":{"modes":["linear","_ux*M(q(z6aqr_0qdxOP"]},"shadow":true},"c]":{"opcode":"jgTween_menu_direction","next":null,"parent":"f","inputs":{},"fields":{"direction":["out","|fhszBx(~g8^grT*s0A2"]},"shadow":true},"c^":{"opcode":"jgTween_tweenVal","next":null,"parent":"f","inputs":{},"fields":{},"shadow":true},"/":{"opcode":"looks_setStretch","next":null,"parent":"f","inputs":{"X":[3,"c_",[4,"100"]],"Y":[3,"c`",[4,"100"]]},"fields":{}},"c_":{"opcode":"looks_stretchGetX","next":null,"parent":"/","inputs":{},"fields":{}},"c`":{"opcode":"jgTween_tweenVal","next":null,"parent":"/","inputs":{},"fields":{}},"g":{"opcode":"jgTween_tweenC","next":":","parent":"f","inputs":{"MODE":[1,"c{"],"DIRECTION":[1,"c|"],"CHANGE":[1,"c}"],"START":[1,[4,"100"]],"END":[1,[4,"150"]],"SEC":[1,[4,"0.1"]],"SUBSTACK":[2,";"]},"fields":{}},"c{":{"opcode":"jgTween_menu_modes","next":null,"parent":"g","inputs":{},"fields":{"modes":["linear","TM2;a?zAq`Qn76Kb9tF["]},"shadow":true},"c|":{"opcode":"jgTween_menu_direction","next":null,"parent":"g","inputs":{},"fields":{"direction":["out","xig45Zt?+)jEuMI4`91l"]},"shadow":true},"c}":{"opcode":"jgTween_tweenVal","next":null,"parent":"g","inputs":{},"fields":{},"shadow":true},";":{"opcode":"looks_setStretch","next":null,"parent":"g","inputs":{"X":[3,"c~",[4,"100"]],"Y":[3,"da",[4,"100"]]},"fields":{}},"c~":{"opcode":"jgTween_tweenVal","next":null,"parent":";","inputs":{},"fields":{}},"da":{"opcode":"looks_stretchGetY","next":null,"parent":";","inputs":{},"fields":{}},":":{"opcode":"looks_switchcostumeto","next":"=","parent":"g","inputs":{"COSTUME":[1,"db"]},"fields":{}},"db":{"opcode":"looks_costume","next":null,"parent":":","inputs":{},"fields":{"COSTUME":["costume7","^2d0muIB5C!SEv]=9n:I"]},"shadow":true},"=":{"opcode":"sound_play","next":"h","parent":":","inputs":{"SOUND_MENU":[1,"dc"]},"fields":{}},"dc":{"opcode":"sound_sounds_menu","next":null,"parent":"=","inputs":{},"fields":{"SOUND_MENU":["tick3","{a=,#hVshKPW{haL=9~s"]},"shadow":true},"h":{"opcode":"jgTween_tweenC","next":"i","parent":"=","inputs":{"MODE":[1,"dd"],"DIRECTION":[1,"de"],"CHANGE":[1,"df"],"START":[1,[4,"100"]],"END":[1,[4,"50"]],"SEC":[1,[4,"0.1"]],"SUBSTACK":[2,"?"]},"fields":{}},"dd":{"opcode":"jgTween_menu_modes","next":null,"parent":"h","inputs":{},"fields":{"modes":["linear","l0qQ{tV2R50*wU83Ow[8"]},"shadow":true},"de":{"opcode":"jgTween_menu_direction","next":null,"parent":"h","inputs":{},"fields":{"direction":["out",";Do?M*|eE,!nUAbAi8U."]},"shadow":true},"df":{"opcode":"jgTween_tweenVal","next":null,"parent":"h","inputs":{},"fields":{},"shadow":true},"?":{"opcode":"looks_setStretch","next":null,"parent":"h","inputs":{"X":[3,"dg",[4,"100"]],"Y":[3,"dh",[4,"100"]]},"fields":{}},"dg":{"opcode":"looks_stretchGetX","next":null,"parent":"?","inputs":{},"fields":{}},"dh":{"opcode":"jgTween_tweenVal","next":null,"parent":"?","inputs":{},"fields":{}},"i":{"opcode":"jgTween_tweenC","next":"bd","parent":"h","inputs":{"MODE":[1,"di"],"DIRECTION":[1,"dj"],"CHANGE":[1,"dk"],"START":[1,[4,"100"]],"END":[1,[4,"150"]],"SEC":[1,[4,"0.1"]],"SUBSTACK":[2,"@"]},"fields":{}},"di":{"opcode":"jgTween_menu_modes","next":null,"parent":"i","inputs":{},"fields":{"modes":["linear","ZLx2klGc[M*aeCK~vzXd"]},"shadow":true},"dj":{"opcode":"jgTween_menu_direction","next":null,"parent":"i","inputs":{},"fields":{"direction":["out","2eU:TR,kwFWKaqd9E(v3"]},"shadow":true},"dk":{"opcode":"jgTween_tweenVal","next":null,"parent":"i","inputs":{},"fields":{},"shadow":true},"@":{"opcode":"looks_setStretch","next":null,"parent":"i","inputs":{"X":[3,"dl",[4,"100"]],"Y":[3,"dm",[4,"100"]]},"fields":{}},"dl":{"opcode":"jgTween_tweenVal","next":null,"parent":"@","inputs":{},"fields":{}},"dm":{"opcode":"looks_stretchGetY","next":null,"parent":"@","inputs":{},"fields":{}},"bd":{"opcode":"looks_setStretch","next":"[","parent":"i","inputs":{"X":[1,[4,"100"]],"Y":[1,[4,"100"]]},"fields":{}},"[":{"opcode":"looks_switchcostumeto","next":"]","parent":"bd","inputs":{"COSTUME":[1,"dn"]},"fields":{}},"dn":{"opcode":"looks_costume","next":null,"parent":"[","inputs":{},"fields":{"COSTUME":["costume1","H/6`PAA0P40BhRn%mK=;"]},"shadow":true},"]":{"opcode":"sound_play","next":"^","parent":"[","inputs":{"SOUND_MENU":[1,"do"]},"fields":{}},"do":{"opcode":"sound_sounds_menu","next":null,"parent":"]","inputs":{},"fields":{"SOUND_MENU":["expode","%Ph12a?Q.^JRr.2Pj9GZ"]},"shadow":true},"^":{"opcode":"control_repeatForSeconds","next":"j","parent":"]","inputs":{"TIMES":[1,[5,"1"]],"SUBSTACK":[2,"F"]},"fields":{}},"F":{"opcode":"control_if","next":"_","parent":"^","inputs":{"CONDITION":[2,"be"],"SUBSTACK":[2,"dp"]},"fields":{}},"be":{"opcode":"sensing_touchingobject","next":null,"parent":"F","inputs":{"TOUCHINGOBJECTMENU":[1,"dq"]},"fields":{}},"dq":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"be","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["Player","ygg^XkQ+=bzm*i8oRh`l"]},"shadow":true},"dp":{"opcode":"event_broadcast","next":null,"parent":"F","inputs":{"BROADCAST_INPUT":[1,[11,"death!~!!","}PLkO!9Oaawb]Qbwa6bo"]]},"fields":{}},"_":{"opcode":"control_if","next":null,"parent":"F","inputs":{"CONDITION":[2,"bf"],"SUBSTACK":[2,"dr"]},"fields":{}},"bf":{"opcode":"sensing_touchingobject","next":null,"parent":"_","inputs":{"TOUCHINGOBJECTMENU":[1,"ds"]},"fields":{}},"ds":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"bf","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["killbrick","|;k~3JALA.U!fALjkj_C"]},"shadow":true},"dr":{"opcode":"event_broadcast","next":null,"parent":"_","inputs":{"BROADCAST_INPUT":[1,[11,"die bully!","ul`KqS2(WCL3uLtytK,N"]]},"fields":{}},"j":{"opcode":"jgTween_tweenC","next":"dt","parent":"^","inputs":{"MODE":[1,"du"],"DIRECTION":[1,"dv"],"CHANGE":[1,"dw"],"START":[1,[4,"0"]],"END":[1,[4,"150"]],"SEC":[1,[4,"1"]],"SUBSTACK":[2,"bg"]},"fields":{}},"du":{"opcode":"jgTween_menu_modes","next":null,"parent":"j","inputs":{},"fields":{"modes":["linear","gslDT*H(xRI=0KVk-.R4"]},"shadow":true},"dv":{"opcode":"jgTween_menu_direction","next":null,"parent":"j","inputs":{},"fields":{"direction":["out","EwAGue.IN.-y|F68|NrS"]},"shadow":true},"dw":{"opcode":"jgTween_tweenVal","next":null,"parent":"j","inputs":{},"fields":{},"shadow":true},"bg":{"opcode":"looks_seteffectto","next":null,"parent":"j","inputs":{"VALUE":[3,"dx",[4,"0"]]},"fields":{"EFFECT":["GHOST","n_z~KC6vq@;2y@Vo*7Xf"]}},"dx":{"opcode":"jgTween_tweenVal","next":null,"parent":"bg","inputs":{},"fields":{}},"dt":{"opcode":"looks_hide","next":null,"parent":"j","inputs":{},"fields":{}},"c!":{"opcode":"control_delete_this_clone","next":null,"parent":"E","inputs":{},"fields":{}},"dy":{"opcode":"control_start_as_clone","next":"t","parent":null,"inputs":{},"fields":{},"topLevel":true},"t":{"opcode":"motion_glideto","next":null,"parent":"dy","inputs":{"SECS":[1,[4,"1"]],"TO":[1,"dz"]},"fields":{}},"dz":{"opcode":"motion_glideto_menu","next":null,"parent":"t","inputs":{},"fields":{"TO":["_random_","1d-3VU_AkWr%O[8nd.A6"]},"shadow":true},"dA":{"opcode":"event_whenbroadcastreceived","next":"bh","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["start","!C?0ci=[YVe([KfmF`PY","broadcast_msg"]},"topLevel":true},"bh":{"opcode":"control_wait","next":"bi","parent":"dA","inputs":{"DURATION":[1,[5,"3"]]},"fields":{}},"bi":{"opcode":"looks_show","next":"p","parent":"bh","inputs":{},"fields":{}},"p":{"opcode":"data_setvariableto","next":"q","parent":"bi","inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["stars","fVz+4tzmsgMM~MbX~`cM",""]}},"q":{"opcode":"theshovelcanvaseffects_cleareffects","next":"r","parent":"p","inputs":{},"fields":{}},"r":{"opcode":"motion_gotoxy","next":"b","parent":"q","inputs":{"X":[1,[4,"76"]],"Y":[1,[4,"46"]]},"fields":{}},"b":{"opcode":"control_repeat","next":"dB","parent":"r","inputs":{"TIMES":[1,[6,"150"]],"SUBSTACK":[2,"s"]},"fields":{}},"s":{"opcode":"control_create_clone_of","next":null,"parent":"b","inputs":{"CLONE_OPTION":[1,"dC"]},"fields":{}},"dC":{"opcode":"control_create_clone_of_menu","next":null,"parent":"s","inputs":{},"fields":{"CLONE_OPTION":["_myself_","+]pi-hG[%FU}5l0Z]oiE"]},"shadow":true},"dB":{"opcode":"looks_hide","next":null,"parent":"b","inputs":{},"fields":{}},"bj":{"opcode":"looks_switchcostumeto","next":"bk","parent":null,"inputs":{"COSTUME":[1,"dD"]},"fields":{},"topLevel":true},"dD":{"opcode":"looks_costume","next":null,"parent":"bj","inputs":{},"fields":{"COSTUME":["costume5","qaDTp3h=jh1]X=#-R%U6"]},"shadow":true},"bk":{"opcode":"control_wait","next":"`","parent":"bj","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"`":{"opcode":"looks_switchcostumeto","next":"bl","parent":"bk","inputs":{"COSTUME":[1,"dE"]},"fields":{}},"dE":{"opcode":"looks_costume","next":null,"parent":"`","inputs":{},"fields":{"COSTUME":["costume6","YJvgLU.x2~Dr9jA2xR`b"]},"shadow":true},"bl":{"opcode":"control_wait","next":"{","parent":"`","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"{":{"opcode":"looks_switchcostumeto","next":"dF","parent":"bl","inputs":{"COSTUME":[1,"dG"]},"fields":{}},"dG":{"opcode":"looks_costume","next":null,"parent":"{","inputs":{},"fields":{"COSTUME":["costume7","bF.es)m~#S6(OBiMFp{B"]},"shadow":true},"dF":{"opcode":"control_wait","next":null,"parent":"{","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}}},"comments":{},"currentCostume":0,"costumes":[{"name":"costume4","bitmapResolution":1,"dataFormat":"svg","assetId":"b36979f4616e0da7b8bdac2559a0a178","md5ext":"b36979f4616e0da7b8bdac2559a0a178.svg","rotationCenterX":44.79733678436588,"rotationCenterY":57.660841292925326},{"name":"costume5","bitmapResolution":1,"dataFormat":"svg","assetId":"1591663dab403054fd4a95c9de578c94","md5ext":"1591663dab403054fd4a95c9de578c94.svg","rotationCenterX":44.79733432225464,"rotationCenterY":83.07064241496},{"name":"costume6","bitmapResolution":1,"dataFormat":"svg","assetId":"ec3e92540b11805f8181fb7ede6ec683","md5ext":"ec3e92540b11805f8181fb7ede6ec683.svg","rotationCenterX":44.79734364450917,"rotationCenterY":83.07054251978786},{"name":"costume7","bitmapResolution":1,"dataFormat":"svg","assetId":"14284ccd43b8091432c80b45d7d44a4c","md5ext":"14284ccd43b8091432c80b45d7d44a4c.svg","rotationCenterX":44.79734296676372,"rotationCenterY":83.07054262461574},{"name":"costume1","bitmapResolution":1,"dataFormat":"svg","assetId":"6f919f88bcd4aae0a51f081dfd2d15c7","md5ext":"6f919f88bcd4aae0a51f081dfd2d15c7.svg","rotationCenterX":214.88839713223226,"rotationCenterY":214.88840414759363}],"sounds":[{"name":"new-inest-2","assetId":"b5715bbe759030fbdd7275e7a698d930","dataFormat":"wav","format":"","rate":48000,"sampleCount":1207654,"md5ext":"b5715bbe759030fbdd7275e7a698d930.wav"},{"name":"Basically Green","assetId":"0355cd325317b1369a31a56621c98d65","dataFormat":"wav","format":"","rate":48000,"sampleCount":594284,"md5ext":"0355cd325317b1369a31a56621c98d65.wav"},{"name":"Tada","assetId":"8fae53041f277fbabeb26ab6fc5f6373","dataFormat":"wav","format":"","rate":48000,"sampleCount":38312,"md5ext":"8fae53041f277fbabeb26ab6fc5f6373.wav"},{"name":"expode","assetId":"2abf606d5f0cdc78da65bb69bae48d80","dataFormat":"wav","format":"","rate":48000,"sampleCount":21857,"md5ext":"2abf606d5f0cdc78da65bb69bae48d80.wav"},{"name":"tick2","assetId":"18918c960bb48af56cee3f3a473ab350","dataFormat":"wav","format":"","rate":48000,"sampleCount":44669,"md5ext":"18918c960bb48af56cee3f3a473ab350.wav"},{"name":"tick3","assetId":"58bb8778ca4eca859a91db21f277ffdc","dataFormat":"wav","format":"","rate":48000,"sampleCount":1676,"md5ext":"58bb8778ca4eca859a91db21f277ffdc.wav"}],"id":"ODM]gki@iPd66{o`L}s^","volume":100,"layerOrder":6,"visible":false,"x":76,"y":46,"size":50,"direction":90,"draggable":false,"rotationStyle":"all around"},{"isStage":false,"name":"killbrick","variables":{},"lists":{},"broadcasts":{},"customVars":[],"blocks":{"bm":{"opcode":"control_forever","next":null,"parent":"dH","inputs":{"SUBSTACK":[2,"bn"]},"fields":{}},"bn":{"opcode":"looks_nextcostume","next":"|","parent":"bm","inputs":{},"fields":{}},"|":{"opcode":"motion_pointtowards","next":"dI","parent":"bn","inputs":{"TOWARDS":[1,"dJ"]},"fields":{}},"dJ":{"opcode":"motion_pointtowards_menu","next":null,"parent":"|","inputs":{},"fields":{"TOWARDS":["Player","yfs36c=:uIAYkgA@~M2B"]},"shadow":true},"dI":{"opcode":"motion_movesteps","next":null,"parent":"|","inputs":{"STEPS":[1,[4,"2"]]},"fields":{}},"dK":{"opcode":"event_whenbroadcastreceived","next":"}","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["die bully!","ul`KqS2(WCL3uLtytK,N","broadcast_msg"]},"topLevel":true},"dL":{"opcode":"sound_playuntildone","next":null,"parent":null,"inputs":{"SOUND_MENU":[1,"dM"]},"fields":{},"topLevel":true},"dM":{"opcode":"sound_sounds_menu","next":null,"parent":"dL","inputs":{},"fields":{"SOUND_MENU":["SE4_P_PEACH_GUARD_HANEKAESU2",")ni`PBE!+8C[q1mH%*~w"]},"shadow":true},"}":{"opcode":"sound_play","next":"bo","parent":"dK","inputs":{"SOUND_MENU":[1,"dN"]},"fields":{}},"dN":{"opcode":"sound_sounds_menu","next":null,"parent":"}","inputs":{},"fields":{"SOUND_MENU":["SE4_P_PEACH_GUARD_HANEKAESU2","X-DHT,[2#NhHOKYmN0!F"]},"shadow":true},"dO":{"opcode":"sensing_distanceto","next":null,"parent":null,"inputs":{"DISTANCETOMENU":[1,"dP"]},"fields":{},"topLevel":true},"dP":{"opcode":"sensing_distancetomenu","next":null,"parent":"dO","inputs":{},"fields":{"DISTANCETOMENU":["Player","O4d~[+9zH8Bto};yvW]f"]},"shadow":true},"dH":{"opcode":"event_whenbroadcastreceived","next":"bm","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["ecgo","xtjgq},,0-)-@#mS+uzM","broadcast_msg"]},"topLevel":true},"bo":{"opcode":"motion_goto","next":null,"parent":"}","inputs":{"TO":[1,"dQ"]},"fields":{}},"dQ":{"opcode":"motion_goto_menu","next":null,"parent":"bo","inputs":{},"fields":{"TO":["_random_","hbSH{wDq;AnrG|rMpAOH"]},"shadow":true}},"comments":{},"currentCostume":2,"costumes":[{"name":"costume1","bitmapResolution":1,"dataFormat":"svg","assetId":"6502e2e8ac2bbbe9d673f5e40a7b02aa","md5ext":"6502e2e8ac2bbbe9d673f5e40a7b02aa.svg","rotationCenterX":99.96742291938494,"rotationCenterY":187.3742087580806},{"name":"costume2","bitmapResolution":1,"dataFormat":"svg","assetId":"9ce773eabc208431147734e1fb4385ea","md5ext":"9ce773eabc208431147734e1fb4385ea.svg","rotationCenterX":105.68014829613776,"rotationCenterY":197.8225231459576},{"name":"costume3","bitmapResolution":1,"dataFormat":"svg","assetId":"76a676a336b46755f1b61c0ce44cebe6","md5ext":"76a676a336b46755f1b61c0ce44cebe6.svg","rotationCenterX":188.04675449365243,"rotationCenterY":200.1304321390175},{"name":"costume4","bitmapResolution":1,"dataFormat":"svg","assetId":"9ce773eabc208431147734e1fb4385ea","md5ext":"9ce773eabc208431147734e1fb4385ea.svg","rotationCenterX":105.68014829613776,"rotationCenterY":197.8225231459576}],"sounds":[{"name":"SE4_P_PEACH_GUARD_HANEKAESU2","assetId":"5d886f497edde5f16974ec847e8e6b16","dataFormat":"wav","format":"","rate":48000,"sampleCount":46769,"md5ext":"5d886f497edde5f16974ec847e8e6b16.wav"}],"id":"RS6zucar4w5Sq6;Oha)}","volume":100,"layerOrder":7,"visible":true,"x":-199.9981476406528,"y":-37.512498797966785,"size":20,"direction":180.00372557676553,"draggable":false,"rotationStyle":"all around"}],"monitors":[{"id":"-e88v(uJq,+.yyMcSMe7","mode":"default","opcode":"data_variable","params":{"VARIABLE":"playerx"},"spriteName":null,"value":0,"width":0,"height":0,"x":0,"y":0,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"^XeLT!!fTkOCsT$/-!CL","mode":"default","opcode":"data_variable","params":{"VARIABLE":"playery"},"spriteName":null,"value":0,"width":0,"height":0,"x":0,"y":22,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"8Y/Sg#LdSC:JVxdcVN.T","mode":"default","opcode":"data_variable","params":{"VARIABLE":"Xv"},"spriteName":null,"value":0,"width":0,"height":0,"x":0,"y":0,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"Xb#gBf3=8,?xg*W]CM?{","mode":"default","opcode":"data_variable","params":{"VARIABLE":"Yv"},"spriteName":null,"value":0,"width":0,"height":0,"x":0,"y":22,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"r$PGRH.gT!2zw{HknX(~","mode":"default","opcode":"data_variable","params":{"VARIABLE":"turn animation"},"spriteName":null,"value":0,"width":0,"height":0,"x":0,"y":0,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"fsKp%(.,ZD5+uO,NsAOs","mode":"list","opcode":"data_listcontents","params":{"LIST":"grounds"},"spriteName":null,"value":[],"width":0,"height":0,"x":378,"y":0,"visible":false},{"id":"`jEk@4|i[#Fk?(8x)AV.-my variable","mode":"default","opcode":"data_variable","params":{"VARIABLE":"my variable"},"spriteName":null,"value":0,"width":0,"height":0,"x":5,"y":113,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"current_year","mode":"default","opcode":"sensing_current","params":{"CURRENTMENU":"YEAR"},"spriteName":null,"value":0,"width":0,"height":0,"x":5,"y":113,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"current_second","mode":"large","opcode":"sensing_current","params":{"CURRENTMENU":"SECOND"},"spriteName":null,"value":0,"width":0,"height":0,"x":99,"y":48,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"wx):s?PixZr9[}ROV5HG","mode":"large","opcode":"data_variable","params":{"VARIABLE":"ded"},"spriteName":null,"value":0,"width":0,"height":0,"x":358,"y":252,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"M=]zP]CYaMxj7ljY%AHr","mode":"default","opcode":"data_variable","params":{"VARIABLE":"song"},"spriteName":null,"value":0,"width":0,"height":0,"x":0,"y":5,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"fVz+4tzmsgMM~MbX~`cM","mode":"large","opcode":"data_variable","params":{"VARIABLE":"stars"},"spriteName":null,"value":0,"width":0,"height":0,"x":-80,"y":0,"visible":true,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"OhA+#gGw6$%y=m1A$V_.","mode":"large","opcode":"data_variable","params":{"VARIABLE":"starc"},"spriteName":null,"value":0,"width":0,"height":0,"x":-80,"y":0,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"|Q76zqrVSue~~!z3Q^M#","mode":"default","opcode":"data_variable","params":{"VARIABLE":"cameraX"},"spriteName":null,"value":0,"width":0,"height":0,"x":5,"y":5,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"B-wLd3;xn{^W!w^-#$s%","mode":"default","opcode":"data_variable","params":{"VARIABLE":"cameraY"},"spriteName":null,"value":0,"width":0,"height":0,"x":5,"y":34,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"rDYn81#fT,z[5miFjDNL","mode":"default","opcode":"data_variable","params":{"VARIABLE":"cameraZOOM"},"spriteName":null,"value":0,"width":0,"height":0,"x":5,"y":63,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"9l,AW,-RS`$yZOJ*?BXc","mode":"slider","opcode":"data_variable","params":{"VARIABLE":"lo"},"spriteName":null,"value":0,"width":0,"height":0,"x":0,"y":5,"visible":false,"sliderMin":0,"sliderMax":1,"isDiscrete":true},{"id":"*I2*f@JUazzg5fPod-Ds","mode":"slider","opcode":"data_variable","params":{"VARIABLE":"move?"},"spriteName":null,"value":0,"width":0,"height":0,"x":-9,"y":34,"visible":false,"sliderMin":0,"sliderMax":1,"isDiscrete":true},{"id":"utg$:-)#KH{fMd^UW7lc","mode":"slider","opcode":"data_variable","params":{"VARIABLE":"star bomb???"},"spriteName":null,"value":0,"width":0,"height":0,"x":-4,"y":17,"visible":false,"sliderMin":0,"sliderMax":1,"isDiscrete":true}],"extensionData":{"pmMotionExpansion":{}},"extensions":["cst12293d","jgRuntime","shovelcss","jgTween","DICandSPmonitorsPlus","music","pen","theshovelcanvaseffects","pmMotionExpansion","text","lmsVideo","SPspotify","dogeiscutbeepboxplayer","SPpopups","pmCamera"],"extensionURLs":{"cst12293d":"data:application/javascript,%2F%2F%20Name%3A%20CST%203D%0A%2F%2F%20ID%3A%20cst12293d%0A%2F%2F%20Description%3A%20Bring%20your%20sprites%20into%20the%20third%20dimension.%0A%2F%2F%20By%3A%20CST1229%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FCST1229%2F%3E%0A%2F%2F%20License%3A%20MPL-2.0%0A%0A%2F%2F%20Special%20thanks%20to%20Drago%20NrxThulitech%20Cuven%20for%20finding%20lots%20of%20bugs%0A%0A%2F*%0A%20%20TODO%3A%0A%20%20-%20bugs%0A%20%20%0A%20%20-%20model%20support%3F%3F%3F%0A%20%20%20%20-%20%22load%20(OBJ%2FMTL%2FGLTF)%20(text%2Fdata%3A%20URL)%20%5B%5D%20into%20model%20%5B%5D%22%0A%20%20%20%20-%20%22set%203d%20mode%20to%20model%20%5B%5D%22%0A%20%20%20%20-%20collision%20support%20unlikely%20(if%20it%20did%20happen%20it%20would%20probably%20be%20very%20laggy)%0A%0A%20%20-%20materials%2Ftextures%0A%20%20%20%20-%20%22set%20material%20%5B0%5D%20texture%20to%20%5Bcurrent%20costume%5D%22%0A%20%20%20%20-%20%22set%20material%20%5B0%5D%20color%20to%20()%22%3F%0A%20%20%20%20-%20built-in%20shape%20materials%20would%20be%20in%20docs%20because%20docs%20will%20exist%20(they%20are%20essential)%0A%0A%20%20-%203d%20stamping%0A%20%20%20%20-%20%223d%20stamp%20named%20%5B%5D%22%20block%20that%20copies%20the%20current%203d%20object%0A%20%20%20%20-%20%22duplicate%203d%20stamp%20%5B%5D%20as%20%5B%5D%22%0A%20%20%20%20-%20%22move%203d%20stamp%20%5B%5D%20to%20myself%22%0A%20%20%20%20-%20%22delete%203d%20stamp%20%5B%5D%22%0A%20%20%20%20-%20%22erase%20all%203d%20stamps%22%0A%20%20%0A%20%20-%20lighting%0A%20%20%20%20-%20could%20be%20in%20the%20set%203d%20mode%20block%2C%20as%20in%20%22set%203d%20mode%20to%20(point%2Fspotlight)%22%0A%20%20%20%20-%20spotlights%20point%20in%20the%20direction%20the%20sprite%20is%20pointing%0A%20%20%20%20-%20light%20color%2Fintensity%20blocks%0A%20%20%20%20-%20glow%3F%0A%20%20%20%20-%20world%20light%20blocks%20(direction%2Fdisable%2Fflat%2Fcolor%2Fintensity)%0A%20%20%0A%20%20-%20WHEN%20RELEASING%2C%20DATA-URLIFY%20THREEJS%0A*%2F%0A%0A(async%20function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20const%20IN_3D%20%3D%20%22threed.in3d%22%3B%0A%20%20const%20OBJECT%20%3D%20%22threed.object%22%3B%0A%20%20const%20THREED_DIRTY%20%3D%20%22threed.dirty%22%3B%0A%20%20const%20SIDE_MODE%20%3D%20%22threed.sidemode%22%3B%0A%20%20const%20TEX_FILTER%20%3D%20%22threed.texfilter%22%3B%0A%20%20const%20Z_POS%20%3D%20%22threed.zpos%22%3B%0A%20%20const%20Z_STRETCH%20%3D%20%22threed.zstretch%22%3B%0A%20%20const%20YAW%20%3D%20%22threed.yaw%22%3B%0A%20%20const%20PITCH%20%3D%20%22threed.pitch%22%3B%0A%20%20const%20ROLL%20%3D%20%22threed.roll%22%3B%0A%20%20const%20ATTACHED_TO%20%3D%20%22threed.attachedto%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22CST%203D%20must%20be%20run%20unsandboxed%22)%3B%0A%20%20%7D%0A%0A%20%20const%20extId%20%3D%20%22cst12293d%22%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%20%20const%20renderer%20%3D%20Scratch.renderer%3B%0A%0A%09const%20PATCHES_ID%20%3D%20%22__patches%22%20%2B%20extId%3B%0A%09const%20patch%20%3D%20(obj%2C%20functions)%20%3D%3E%20%7B%0A%09%09if%20(obj%5BPATCHES_ID%5D)%20return%3B%0A%09%09obj%5BPATCHES_ID%5D%20%3D%20%7B%7D%3B%0A%09%09for%20(const%20name%20in%20functions)%20%7B%0A%09%09%09const%20original%20%3D%20obj%5Bname%5D%3B%0A%09%09%09obj%5BPATCHES_ID%5D%5Bname%5D%20%3D%20obj%5Bname%5D%3B%0A%09%09%09if%20(original)%20%7B%0A%09%09%09%09obj%5Bname%5D%20%3D%20function(...args)%20%7B%0A%09%09%09%09%09const%20callOriginal%20%3D%20(...ogArgs)%20%3D%3E%20original.call(this%2C%20...ogArgs)%3B%0A%09%09%09%09%09return%20functions%5Bname%5D.call(this%2C%20callOriginal%2C%20...args)%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09obj%5Bname%5D%20%3D%20function%20(...args)%20%7B%0A%09%09%09%09%09return%20functions%5Bname%5D.call(this%2C%20()%20%3D%3E%20%7B%7D%2C%20...args)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%09const%20_unpatch%20%3D%20(obj)%20%3D%3E%20%7B%0A%09%09if%20(!obj%5BPATCHES_ID%5D)%20return%3B%0A%09%09for%20(const%20name%20in%20obj%5BPATCHES_ID%5D)%20%7B%0A%09%09%09obj%5Bname%5D%20%3D%20obj%5BPATCHES_ID%5D%5Bname%5D%3B%0A%09%09%7D%0A%09%09delete%20obj%5BPATCHES_ID%5D%3B%0A%09%7D%0A%0A%20%20const%20Skin%20%3D%20renderer.exports.Skin%3B%0A%0A%20%20%2F%2F%20this%20class%20was%20originally%20made%20by%20Vadik1%0A%20%20class%20SimpleSkin%20extends%20Skin%20%7B%0A%20%20%20%20constructor(id%2C%20renderer)%20%7B%0A%20%20%20%20%20%20super(id%2C%20renderer)%3B%0A%20%20%20%20%20%20const%20gl%20%3D%20renderer.gl%3B%0A%20%20%20%20%20%20const%20texture%20%3D%20gl.createTexture()%3B%0A%20%20%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20texture)%3B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_S%2C%20gl.CLAMP_TO_EDGE)%3B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_T%2C%20gl.CLAMP_TO_EDGE)%3B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_MIN_FILTER%2C%20gl.NEAREST)%3B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_MAG_FILTER%2C%20gl.NEAREST)%3B%0A%20%20%20%20%20%20%2F%2Fgl.texImage2D(gl.TEXTURE_2D%2C%200%2C%20gl.RGBA%2C%201%2C%201%2C%200%2C%20gl.RGBA%2C%20gl.UNSIGNED_BYTE%2C%20new%20Uint8Array(%5B0%2C255%2C0%2C255%5D))%3B%0A%20%20%20%20%20%20this._texture%20%3D%20texture%3B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40type%20%7B%5Bnumber%2C%20number%5D%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20this._rotationCenter%20%3D%20%5B240%2C%20180%5D%3B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40type%20%7B%5Bnumber%2C%20number%5D%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20this._size%20%3D%20%5B480%2C%20360%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20dispose()%20%7B%0A%20%20%20%20%20%20if%20(this._texture)%20%7B%0A%20%20%20%20%20%20%20%20this._renderer.gl.deleteTexture(this._texture)%3B%0A%20%20%20%20%20%20%20%20this._texture%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20super.dispose()%3B%0A%20%20%20%20%7D%0A%20%20%20%20set%20size(value)%20%7B%0A%20%20%20%20%20%20this._size%20%3D%20value%3B%0A%20%20%20%20%20%20this._rotationCenter%20%3D%20%5Bvalue%5B0%5D%20%2F%202%2C%20value%5B1%5D%20%2F%202%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20get%20size()%20%7B%0A%20%20%20%20%20%20return%20this._size%3B%0A%20%20%20%20%7D%0A%20%20%20%20getTexture(scale)%20%7B%0A%20%20%20%20%20%20return%20this._texture%20%7C%7C%20super.getTexture(scale)%3B%0A%20%20%20%20%7D%0A%20%20%20%20setContent(textureData)%20%7B%0A%20%20%20%20%20%20const%20gl%20%3D%20this._renderer.gl%3B%0A%20%20%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20this._texture)%3B%0A%20%20%20%20%20%20gl.texImage2D(%0A%20%20%20%20%20%20%20%20gl.TEXTURE_2D%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20gl.RGBA%2C%0A%20%20%20%20%20%20%20%20gl.RGBA%2C%0A%20%20%20%20%20%20%20%20gl.UNSIGNED_BYTE%2C%0A%20%20%20%20%20%20%20%20textureData%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.emitWasAltered()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20to%20convert%20to%20data%20url%2C%20use%20https%3A%2F%2Fwww.adminbooster.com%2Ftool%2Fdata_uri%0A%20%20%2F%2F%20%40ts-expect-error%20we're%20running%20in%20a%20browser%0A%20%20const%20THREE%20%3D%20await%20import(%22https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fthree%400.169%2Fbuild%2Fthree.module.min.js%22)%3B%0A%0A%0A%20%20class%20ThreeD%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%0A%20%20%20%20%20%20window.threed%20%3D%20this%3B%0A%20%20%20%20%20%20runtime%5BextId%5D%20%3D%20this%3B%0A%20%20%20%20%20%20this.THREE%20%3D%20THREE%3B%0A%0A%20%20%20%20%20%20%2F%2F%20%40ts-ignore%0A%20%20%20%20%20%20this.hideVanillaBlocks%20%3D%20!!runtime.extensionStorage%3F.%5BextId%5D%3F.hideVanillaBlocks%3B%0A%20%20%20%20%20%20runtime.on(%22PROJECT_LOADED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.uninit()%3B%0A%20%20%20%20%20%20%20%20const%20oldHideVanillaBlocks%20%3D%20this.hideVanillaBlocks%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20%40ts-ignore%0A%20%20%20%20%20%20%20%20this.hideVanillaBlocks%20%3D%20!!runtime.extensionStorage%3F.%5BextId%5D%3F.hideVanillaBlocks%3B%0A%20%20%20%20%20%20%20%20if%20(oldHideVanillaBlocks%20!%3D%20this.hideVanillaBlocks)%20%7B%0A%20%20%20%20%20%20%20%20%20%20vm.extensionManager.refreshBlocks()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20extId%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22CST%203D%22)%2C%0A%0A%20%20%20%20%20%20%20%20color1%3A%20%22%232a47e8%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%232439ad%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%231b2d94%22%2C%0A%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Open%20Documentation%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22viewDocs%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20this.hideVanillaBlocks%20%3F%20Scratch.translate(%22Show%20Vanilla%20Blocks%22)%20%3A%20Scratch.translate(%22Hide%20Vanilla%20Blocks%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22toggleVanillaBlocks%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setMode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%203D%20mode%20to%20%5BMODE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22MODE_MENU%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22flat%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20this.vanillaBlock(%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cblock%20type%3D%22motion_setx%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cvalue%20name%3D%22X%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cshadow%20id%3D%22setx%22%20type%3D%22math_number%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cfield%20name%3D%22NUM%22%3E0%3C%2Ffield%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fshadow%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fvalue%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fblock%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cblock%20type%3D%22motion_sety%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cvalue%20name%3D%22Y%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cshadow%20id%3D%22sety%22%20type%3D%22math_number%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cfield%20name%3D%22NUM%22%3E0%3C%2Ffield%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fshadow%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fvalue%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fblock%3E%0A%20%20%20%20%20%20%20%20%20%20%60)%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setZ%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20z%20to%20%5BZ%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Z%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20this.vanillaBlock(%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cblock%20type%3D%22motion_changexby%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cvalue%20name%3D%22DX%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cshadow%20type%3D%22math_number%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cfield%20name%3D%22NUM%22%3E0%3C%2Ffield%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fshadow%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fvalue%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fblock%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cblock%20type%3D%22motion_changeyby%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cvalue%20name%3D%22DY%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cshadow%20type%3D%22math_number%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cfield%20name%3D%22NUM%22%3E0%3C%2Ffield%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fshadow%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fvalue%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fblock%3E%0A%20%20%20%20%20%20%20%20%20%20%60)%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeZ%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20z%20by%20%5BZ%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Z%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20this.vanillaBlock(%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cblock%20type%3D%22motion_xposition%22%3E%3C%2Fblock%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cblock%20type%3D%22motion_yposition%22%3E%3C%2Fblock%3E%0A%20%20%20%20%20%20%20%20%20%20%60)%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getZ%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22z%20position%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22set3DPos%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22go%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20z%3A%20%5BZ%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Z%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22change3DPos%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20position%20by%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20z%3A%20%5BZ%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Z%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22moveSteps%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22move%20%5BSTEPS%5D%20steps%20in%203D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STEPS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2210%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22set3DDir%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22point%20in%20%5BDIRECTION%5D%20%5BDEGREES%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22y%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DEGREES%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rotate3D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22turn%20%5BDIRECTION%5D%20%5BDEGREES%5D%20degrees%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22turnDirection%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22right%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DEGREES%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2015%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22direction3D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22direction%20around%20%5BDIRECTION%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22y%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20this.vanillaBlock(%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cblock%20type%3D%22sensing_touchingobject%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cvalue%20name%3D%22TOUCHINGOBJECTMENU%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cshadow%20type%3D%22sensing_touchingobjectmenu%22%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fvalue%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fblock%3E%0A%20%20%20%20%20%20%20%20%20%20%60)%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setZStretch%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20stretch%20z%20to%20%5BSTRETCH%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRETCH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getZStretch%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22stretch%20z%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setTexFilter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20texture%20filter%20to%20%5BFILTER%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FILTER%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22texFilter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22nearest%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSideMode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20shown%20faces%20to%20%5BSIDE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIDE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22side%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22both%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22attach%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22attach%20myself%20to%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22attachVar%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22attach%20myself%20to%20sprite%20with%20variable%20%5BVARIABLE%5D%20set%20to%20%5BVALUE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VARIABLE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22my%20variable%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%220%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22detach%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22detach%20myself%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22attachedSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22sprite%20I'm%20attached%20to%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22attachedSpriteVar%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22variable%20%5BVARIABLE%5D%20of%20sprite%20I'm%20attached%20to%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VARIABLE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22my%20variable%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setCam%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22move%20camera%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20z%3A%20%5BZ%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Z%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeCam%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20camera%20by%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20z%3A%20%5BZ%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Z%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22camX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22camera%20x%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22camY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22camera%20y%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22camZ%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22camera%20z%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22moveCamSteps%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22move%20camera%20%5BSTEPS%5D%20steps%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STEPS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2210%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setCamDir%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22point%20camera%20in%20%5BDIRECTION%5D%20%5BDEGREES%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22y%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DEGREES%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rotateCam%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22turn%20camera%20%5BDIRECTION%5D%20%5BDEGREES%5D%20degrees%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22turnDirection%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22right%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DEGREES%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2015%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22camDir%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22camera%20direction%20around%20%5BDIRECTION%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22y%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setCameraParam%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20camera%20%5BPARAM%5D%20to%20%5BVALUE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PARAM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22cameraParam%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22vertical%20FOV%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2250%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getCameraParam%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22camera%20%5BPARAM%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PARAM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22cameraParam%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22vertical%20FOV%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20MODE_MENU%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22disabled%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22flat%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22flat%20triangle%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22cube%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22sphere%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22low-poly%20sphere%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20turnDirection%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22left%22%2C%20%22right%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22up%22%2C%20%22down%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%E2%9F%B2%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22ccw%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%E2%9F%B3%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22cw%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20direction%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bvalue%3A%20%22y%22%2C%20text%3A%20Scratch.translate(%22y%20(yaw)%22)%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bvalue%3A%20%22x%22%2C%20text%3A%20Scratch.translate(%22x%20(pitch)%22)%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bvalue%3A%20%22z%22%2C%20text%3A%20Scratch.translate(%22z%20(roll)%22)%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20cameraParam%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22vertical%20FOV%22%2C%20%22minimum%20render%20distance%22%2C%20%22maximum%20render%20distance%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20side%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22both%22%2C%20%22front%22%2C%20%22back%22%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20texFilter%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22nearest%22%2C%20%22linear%22%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20spriteMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getSprites%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20viewDocs()%20%7B%0A%20%20%20%20%20%20alert(%60This%20extension%20also%20makes%20many%20other%20vanilla%20blocks%20(e.g%20most%20of%20Motion)%20work%20with%203D%20sprites%2C%20try%20them%20out!%0ADefault%20camera%20position%3A%20x0%2C%20y0%2C%20z200.%0ADefault%20camera%20parameters%3A%20vertical%20FOV%2060%2C%20min%20render%20distance%200.5%2C%20max%20render%20distance%204800.%0A%0AMore%20things%20will%20be%20added%20here%20as%20things%20that%20need%20explaining%20are%20added.%0AIf%20I%20ever%20decide%20to%20release%20this%20extension%20on%20the%20gallery%2C%20this%20will%20be%20replaced%20with%20an%20actual%20docs%20page.%60)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20toggleVanillaBlocks()%20%7B%0A%20%20%20%20%20%20this.hideVanillaBlocks%20%3D%20!this.hideVanillaBlocks%3B%0A%20%20%20%20%20%20vm.extensionManager.refreshBlocks()%3B%0A%20%20%20%20%20%20if%20(!runtime.extensionStorage)%20return%3B%0A%20%20%20%20%20%20if%20(!runtime.extensionStorage%5BextId%5D)%20%7B%0A%20%20%20%20%20%20%20%20runtime.extensionStorage%5BextId%5D%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20%40ts-ignore%0A%20%20%20%20%20%20runtime.extensionStorage%5BextId%5D.hideVanillaBlocks%20%3D%20this.hideVanillaBlocks%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20vanillaBlock(xml)%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.XML%2C%0A%20%20%20%20%20%20%20%20xml%2C%0A%20%20%20%20%20%20%20%20hideFromPalette%3A%20this.hideVanillaBlocks%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20init()%20%7B%0A%20%20%20%20%20%20if%20(this.scene)%20return%3B%0A%0A%20%20%20%20%20%20%2F%2F%20create%20everything%0A%20%20%20%20%20%20this.scene%20%3D%20new%20THREE.Scene()%3B%0A%20%20%20%20%20%20this.camera%20%3D%20new%20THREE.PerspectiveCamera(60%2C%201%2C%200.1%2C%201000)%3B%0A%20%20%20%20%20%20this.camera.position.set(0%2C%200%2C%20200)%3B%0A%20%20%20%20%20%20this.camera.lookAt(0%2C%200%2C%200)%3B%0A%20%20%20%20%20%20this.camera.near%20%3D%200.5%3B%0A%20%20%20%20%20%20this.camera.far%20%3D%204800%3B%0A%0A%20%20%20%20%20%20this.renderer%20%3D%20new%20THREE.WebGLRenderer()%3B%0A%20%20%20%20%20%20this.renderer.useLegacyLights%20%3D%20true%3B%0A%20%20%20%20%20%20this.renderer.setClearAlpha(0)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20create%20the%20scratch%20stuff%0A%20%20%20%20%20%20this.threeSkinId%20%3D%20renderer._nextSkinId%2B%2B%3B%0A%20%20%20%20%20%20this.threeSkin%20%3D%20new%20SimpleSkin(%0A%20%20%20%20%20%20%20%20this.threeSkinId%2C%0A%20%20%20%20%20%20%20%20renderer%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20renderer._allSkins%5Bthis.threeSkinId%5D%20%3D%20this.threeSkin%3B%0A%20%20%20%20%20%20this.threeDrawableId%20%3D%20renderer.createDrawable(%22pen%22)%3B%0A%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%20not%20typed%0A%20%20%20%20%20%20renderer._allDrawables%5Bthis.threeDrawableId%5D.customDrawableName%20%3D%20%22CST%203D%20Layer%22%0A%20%20%20%20%20%20renderer.updateDrawableSkinId(%0A%20%20%20%20%20%20%20%20this.threeDrawableId%2C%0A%20%20%20%20%20%20%20%20this.threeSkinId%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20this.stageSizeEvent%20%3D%20(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.updateScale()%3B%0A%20%20%20%20%20%20%7D).bind(this)%3B%0A%20%20%20%20%20%20vm.on(%22STAGE_SIZE_CHANGED%22%2C%20this.stageSizeEvent)%3B%0A%0A%20%20%20%20%20%20this.stampRenderTarget%20%3D%20new%20THREE.WebGLRenderTarget()%3B%0A%0A%20%20%20%20%20%20this.raycaster%20%3D%20new%20THREE.Raycaster()%3B%0A%0A%20%20%20%20%20%20this.applyPatches()%3B%0A%20%20%20%20%20%20this.updateScale()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20uninit()%20%7B%0A%20%20%20%20%20%20%2F%2F%20delete%20everything%0A%20%20%20%20%20%20for%20(const%20dr%20of%20renderer._allDrawables)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!dr)%20continue%3B%0A%20%20%20%20%20%20%20%20this.disable3DForDrawable(dr.id)%3B%0A%20%20%20%20%20%20%20%20delete%20dr%5BIN_3D%5D%3B%0A%20%20%20%20%20%20%20%20delete%20dr%5BOBJECT%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.scene)%20this.scene.clear()%3B%0A%20%20%20%20%20%20this.scene%20%3D%20undefined%3B%0A%20%20%20%20%20%20this.camera%20%3D%20undefined%3B%0A%20%20%20%20%20%20if%20(this.renderer)%20this.renderer.dispose()%3B%0A%20%20%20%20%20%20this.renderer%20%3D%20undefined%3B%0A%20%20%20%20%20%20if%20(this.threeSkinId)%0A%20%20%20%20%20%20%20%20this.threeSkin.dispose()%3B%0A%20%20%20%20%20%20this.threeSkinId%20%3D%20undefined%3B%0A%20%20%20%20%20%20if%20(this.threeDrawableId)%0A%20%20%20%20%20%20%20%20renderer._allDrawables%5Bthis.threeDrawableId%5D.dispose()%3B%0A%20%20%20%20%20%20this.threeDrawableId%20%3D%20undefined%3B%0A%20%20%20%20%20%20if%20(this.stageSizeEvent)%0A%20%20%20%20%20%20%20%20vm.off(%22STAGE_SIZE_CHANGED%22%2C%20this.stageSizeEvent)%3B%0A%20%20%20%20%20%20this.stageSizeEvent%20%3D%20undefined%3B%0A%20%20%20%20%20%20if%20(this.stampRenderTarget)%0A%20%20%20%20%20%20%20%20this.stampRenderTarget.dispose()%3B%0A%20%20%20%20%20%20this.stampRenderTarget%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20call%20when%20the%20native%20size%20of%20the%20canvas%20changes%0A%20%20%20%20updateScale()%20%7B%0A%20%20%20%20%20%20const%20w%20%3D%20runtime.stageWidth%20%7C%7C%20480%3B%0A%20%20%20%20%20%20const%20h%20%3D%20runtime.stageHeight%20%7C%7C%20360%3B%0A%0A%20%20%20%20%20%20this.threeSkin.size%20%3D%20%5Bw%2C%20h%5D%3B%0A%0A%20%20%20%20%20%20this.camera.aspect%20%3D%20w%20%2F%20h%3B%0A%20%20%20%20%20%20this.renderer.setSize(w%2C%20h)%3B%0A%20%20%20%20%20%20this.stampRenderTarget.setSize(w%2C%20h)%3B%0A%20%20%20%20%20%20this.camera.updateProjectionMatrix()%3B%0A%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20patches%20for%20stuff%0A%20%20%20%20applyPatches()%20%7B%0A%20%20%20%20%20%20const%20Drawable%20%3D%20renderer.exports.Drawable%3B%0A%0A%20%20%20%20%20%20const%20threed%20%3D%20this%3B%0A%20%20%20%20%20%20patch(Drawable.prototype%2C%20%7B%0A%20%20%20%20%20%20%20%20getVisible(og)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this%5BIN_3D%5D)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20return%20og()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20updateVisible(og%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this%5BIN_3D%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20o%20%3D%20this%5BOBJECT%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(o.visible%20!%3D%3D%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o.visible%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20threed.updateRenderer()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20og(value)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20updatePosition(og%2C%20position)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this%5BIN_3D%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20o%20%3D%20this%5BOBJECT%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20o.position.x%20%3D%20position%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20o.position.y%20%3D%20position%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20threed.updateRenderer()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20og(position)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20updateDirection(og%2C%20direction)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this%5BIN_3D%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%5BROLL%5D%20%3D%20THREE.MathUtils.degToRad(direction)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20threed.updateSpriteAngle(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20threed.updateRenderer()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20og(direction)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20updateScale(og%2C%20scale)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this%5BIN_3D%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20obj%20%3D%20this%5BOBJECT%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20obj.scale.x%20%3D%20(obj._sizeX%20%3F%3F%20100)%20%2F%20100%20*%20scale%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20obj.scale.y%20%3D%20(obj._sizeY%20%3F%3F%20100)%20%2F%20100%20*%20scale%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20obj.scale.z%20%3D%20(obj._sizeZ%20%3F%3F%20100)%20%2F%20100%20*%20(this%5BZ_STRETCH%5D%20%3F%3F%20scale%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20threed.updateRenderer()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20og(scale)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20dispose(og)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this%5BOBJECT%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%5BOBJECT%5D.removeFromParent()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%5BOBJECT%5D.material.dispose()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this%5BOBJECT%5D.material.map)%20this%5BOBJECT%5D.material.map.dispose()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%5BOBJECT%5D.geometry.dispose()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%5BOBJECT%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20threed.updateRenderer()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20og()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20_skinWasAltered(og)%20%7B%0A%20%20%20%20%20%20%20%20%20%20og()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this%5BIN_3D%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20threed.updateDrawableSkin(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20threed.updateRenderer()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20patch(renderer%2C%20%7B%0A%20%20%20%20%20%20%20%20draw(og)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this%5BTHREED_DIRTY%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Do%20a%203D%20redraw%0A%20%20%20%20%20%20%20%20%20%20%20%20threed.doUpdateRenderer()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%5BTHREED_DIRTY%5D%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20og()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20isTouchingDrawables(og%2C%20drawableID%2C%20candidateIDs%20%3D%20this._drawList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20dr%20%3D%20this._allDrawables%5BdrawableID%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(dr%5BIN_3D%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%203D%20sprites%20can't%20collide%20with%202D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20candidates%20%3D%20candidateIDs.filter(id%20%3D%3E%20this._allDrawables%5Bid%5D%5BIN_3D%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(const%20candidate%20of%20candidates)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(threed.touching3D(dr%5BOBJECT%5D%2C%20this._allDrawables%5Bcandidate%5D%5BOBJECT%5D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20return%20og(drawableID%2C%20candidateIDs.filter(id%20%3D%3E%20!(this._allDrawables%5Bid%5D%5BIN_3D%5D)))%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20penStamp(og%2C%20penSkinID%2C%20stampID)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20dr%20%3D%20this._allDrawables%5BstampID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!dr)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(dr%5BIN_3D%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Draw%20the%20sprite%20to%20the%203D%20drawable%20then%20stamp%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20threed.renderer.render(dr%5BOBJECT%5D%2C%20threed.camera)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._allSkins%5Bthreed.threeSkinId%5D.setContent(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20threed.renderer.domElement%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20og(penSkinID%2C%20threed.threeDrawableId)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20threed.updateRenderer()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20og(penSkinID%2C%20stampID)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20pick(og%2C%20centerX%2C%20centerY%2C%20touchWidth%2C%20touchHeight%2C%20candidateIDs)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20pick2d%20%3D%20og(centerX%2C%20centerY%2C%20touchWidth%2C%20touchHeight%2C%20candidateIDs)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(pick2d%20!%3D%3D%20-1)%20return%20pick2d%3B%0A%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20if%20(!threed.raycaster)%20return%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20bounds%20%3D%20this.clientSpaceToScratchBounds(centerX%2C%20centerY%2C%20touchWidth%2C%20touchHeight)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(bounds.left%20%3D%3D%3D%20-Infinity%20%7C%7C%20bounds.bottom%20%3D%3D%3D%20-Infinity)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20const%20candidates%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20(candidateIDs%20%7C%7C%20this._drawList).map(id%20%3D%3E%20this._allDrawables%5Bid%5D).filter(dr%20%3D%3E%20dr%5BIN_3D%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(candidates.length%20%3C%3D%200)%20return%20-1%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20scratchCenterX%20%3D%20(bounds.left%20%2B%20bounds.right)%20%2F%20this._gl.canvas.clientWidth%3B%0A%20%20%20%20%20%20%20%20%20%20const%20scratchCenterY%20%3D%20(bounds.top%20%2B%20bounds.bottom)%20%2F%20this._gl.canvas.clientHeight%3B%0A%20%20%20%20%20%20%20%20%20%20threed.raycaster.setFromCamera(new%20THREE.Vector2(scratchCenterX%2C%20scratchCenterY)%2C%20threed.camera)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20object%20%3D%20threed.raycaster.intersectObject(threed.scene%2C%20true)%5B0%5D%3F.object%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!object)%20return%20-1%3B%0A%20%20%20%20%20%20%20%20%20%20const%20drawable%20%3D%20candidates.find(c%20%3D%3E%20(c%5BIN_3D%5D%20%26%26%20c%5BOBJECT%5D%20%3D%3D%3D%20object))%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!drawable)%20return%20-1%3B%0A%20%20%20%20%20%20%20%20%20%20return%20drawable._id%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20drawableTouching(og%2C%20drawableID%2C%20centerX%2C%20centerY%2C%20touchWidth%2C%20touchHeight)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20drawable%20%3D%20this._allDrawables%5BdrawableID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!drawable)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(!drawable%5BIN_3D%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20og(drawableID%2C%20centerX%2C%20centerY%2C%20touchWidth%2C%20touchHeight)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%0A%20%20%20%20%20%20%20%20%20%20if%20(!threed.raycaster)%20return%20false%3B%0A%20%20%0A%20%20%20%20%20%20%20%20%20%20const%20bounds%20%3D%20this.clientSpaceToScratchBounds(centerX%2C%20centerY%2C%20touchWidth%2C%20touchHeight)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20scratchCenterX%20%3D%20(bounds.left%20%2B%20bounds.right)%20%2F%20this._gl.canvas.clientWidth%3B%0A%20%20%20%20%20%20%20%20%20%20const%20scratchCenterY%20%3D%20(bounds.top%20%2B%20bounds.bottom)%20%2F%20this._gl.canvas.clientHeight%3B%0A%20%20%20%20%20%20%20%20%20%20threed.raycaster.setFromCamera(new%20THREE.Vector2(scratchCenterX%2C%20scratchCenterY)%2C%20threed.camera)%3B%0A%20%20%0A%20%20%20%20%20%20%20%20%20%20const%20intersect%20%3D%20(threed.raycaster.intersectObject(threed.scene%2C%20true))%3B%0A%20%20%20%20%20%20%20%20%20%20const%20object%20%3D%20intersect%5B0%5D%3F.object%3B%0A%20%20%20%20%20%20%20%20%20%20return%20object%20%3D%3D%3D%20drawable%5BOBJECT%5D%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20extractDrawableScreenSpace(og%2C%20drawableID)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20drawable%20%3D%20this._allDrawables%5BdrawableID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!drawable)%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60Could%20not%20extract%20drawable%20with%20ID%20%24%7BdrawableID%7D%3B%20it%20does%20not%20exist%60)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!drawable%5BIN_3D%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20og(drawableID)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Draw%20the%20sprite%20to%20the%203D%20drawable%20then%20extract%20it%0A%20%20%20%20%20%20%20%20%20%20threed.renderer.render(drawable%5BOBJECT%5D%2C%20threed.camera)%3B%0A%20%20%20%20%20%20%20%20%20%20this._allSkins%5Bthreed.threeSkinId%5D.setContent(%0A%20%20%20%20%20%20%20%20%20%20%20%20threed.renderer.domElement%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20extracted%20%3D%20og(threed.threeDrawableId)%3B%0A%20%20%20%20%20%20%20%20%20%20threed.updateRenderer()%3B%0A%20%20%20%20%20%20%20%20%20%20return%20extracted%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20patch(renderer.exports.Skin%2C%20%7B%0A%20%20%20%20%20%20%20%20dispose(og)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this._3dCachedTexture)%20this._3dCachedTexture.dispose()%3B%0A%20%20%20%20%20%20%20%20%20%20og()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20_setTexture(og%2C%20textureData)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this._3dCachedTexture)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._3dCachedTexture.dispose()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._3dCachedTexture%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20returnValue%20%3D%20og(textureData)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20threed.getThreeTextureFromSkin(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20returnValue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20og(textureData)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20updateRenderer()%20%7B%0A%20%20%20%20%20%20%2F%2F%20Schedule%20a%203D%20redraw%0A%20%20%20%20%20%20renderer%5BTHREED_DIRTY%5D%20%3D%20true%3B%0A%20%20%20%20%20%20runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20pushes%20the%20current%203d%20render%20state%20into%20the%20drawable%0A%20%20%20%20doUpdateRenderer()%20%7B%0A%20%20%20%20%20%20this.init()%3B%0A%20%20%20%20%20%20this.renderer.render(this.scene%2C%20this.camera)%3B%0A%0A%20%20%20%20%20%20if%20(!this.threeSkinId)%20return%3B%0A%0A%20%20%20%20%20%20this.threeSkin.setContent(%0A%20%20%20%20%20%20%20%20this.renderer.domElement%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20updateDrawableSkin(drawable)%20%7B%0A%20%20%20%20%20%20if%20(drawable%5BOBJECT%5D%20%26%26%20drawable%5BOBJECT%5D.material)%20%7B%0A%20%20%20%20%20%20%20%20drawable%5BOBJECT%5D.material.map%20%3D%20this.getThreeTextureFromSkin(drawable.skin)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20%2F%2F%2F%20MISC%20OBJECT%20UTILS%20%2F%2F%2F%2F%0A%0A%20%20%20%20getThreeTextureFromSkin(skin)%20%7B%0A%20%20%20%20%20%20if%20(skin._3dCachedTexture)%20return%20skin._3dCachedTexture%3B%0A%20%20%20%20%20%20skin._3dCachedTexture%20%3D%20new%20THREE.CanvasTexture(this.getCanvasFromSkin(skin))%3B%0A%20%20%20%20%20%20skin._3dCachedTexture.colorSpace%20%3D%20THREE.SRGBColorSpace%3B%0A%20%20%20%20%20%20return%20skin._3dCachedTexture%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20objectShape(obj)%20%7B%0A%20%20%20%20%20%20let%20shape%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(obj.geometry)%20%7B%0A%20%20%20%20%20%20%20%20if%20(obj.geometry%20instanceof%20THREE.SphereGeometry)%20%7B%0A%20%20%20%20%20%20%20%20%20%20obj.geometry.computeBoundingSphere()%3B%0A%20%20%20%20%20%20%20%20%20%20shape%20%3D%20obj.geometry.boundingSphere%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20obj.geometry.computeBoundingBox()%3B%0A%20%20%20%20%20%20%20%20%20%20shape%20%3D%20obj.geometry.boundingBox%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20(obj%20instanceof%20THREE.SPRITE)%20%7B%0A%20%20%20%20%20%20%20%20const%20sx%20%3D%20obj.scale.x%20%2F%202%3B%0A%20%20%20%20%20%20%20%20const%20sy%20%3D%20obj.scale.y%20%2F%202%3B%0A%0A%20%20%20%20%20%20%20%20shape%20%3D%20new%20THREE.Box3(%0A%20%20%20%20%20%20%20%20%20%20new%20THREE.Vector3(-sx%2C%20-sy%2C%200.5)%2C%0A%20%20%20%20%20%20%20%20%20%20new%20THREE.Vector3(sx%2C%20sy%2C%200.5)%2C%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20shape%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20objectShapeTransformed(obj)%20%7B%0A%20%20%20%20%20%20const%20shape%20%3D%20this.objectShape(obj)%3B%0A%20%20%20%20%20%20if%20(!shape)%20return%20null%3B%0A%20%20%20%20%20%20obj.updateMatrixWorld()%3B%0A%20%20%20%20%20%20return%20shape.applyMatrix4(obj.matrixWorld)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20touching3D(objA%2C%20objB)%20%7B%0A%20%20%20%20%20%20const%20shapeA%20%3D%20this.objectShapeTransformed(objA)%3B%0A%20%20%20%20%20%20const%20shapeB%20%3D%20this.objectShapeTransformed(objB)%3B%0A%20%20%20%20%20%20if%20(!shapeA%20%7C%7C%20!shapeB)%20return%20false%3B%0A%20%20%20%20%20%20const%20nameB%20%3D%20(shapeB%20instanceof%20THREE.Sphere)%20%3F%20%22Sphere%22%20%3A%20%22Box%22%3B%0A%20%20%20%20%20%20const%20func%20%3D%20shapeA%5B%22intersects%22%20%2B%20nameB%5D%3B%0A%20%20%20%20%20%20if%20(!func)%20return%20false%3B%0A%20%20%20%20%20%20return%20func.call(shapeA%2C%20shapeB)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%2F%20MENUS%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20originally%20from%20clones%20plus%3A%20https%3A%2F%2Fextensions.turbowarp.org%2FLily%2FClonesPlus.js%0A%20%20%20%20getSprites()%20%7B%0A%20%20%20%20%20%20let%20spriteNames%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20const%20targets%20%3D%20runtime.targets%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20curTarget%20%3D%20targets%5Bindex%5D.sprite%3B%0A%20%20%20%20%20%20%20%20if%20(targets%5Bindex%5D.isOriginal)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20jsonOBJ%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20curTarget.name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20curTarget.name%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20spriteNames.push(jsonOBJ)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(spriteNames.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20spriteNames%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%7B%20text%3A%20%22%22%2C%20value%3A%200%20%7D%5D%3B%20%2F%2Fthis%20should%20never%20happen%20but%20it's%20a%20failsafe%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%2F%0A%0A%0A%20%20%20%20%2F%2F%2F%20DRAWABLE%20STUFF%20%2F%2F%2F%0A%0A%20%20%20%20%2F%2F%20thanks%20stackoverflow%0A%20%20%20%20%2F%2F%20https%3A%2F%2Fstackoverflow.com%2Fa%2F18804083%0A%20%20%20%20getCanvasFromTexture(gl%2C%20texture%2C%20width%2C%20height)%20%7B%0A%20%20%20%20%20%20const%20framebuffer%20%3D%20gl.createFramebuffer()%3B%0A%20%20%20%20%20%20gl.bindFramebuffer(gl.FRAMEBUFFER%2C%20framebuffer)%3B%0A%20%20%20%20%20%20gl.framebufferTexture2D(gl.FRAMEBUFFER%2C%20gl.COLOR_ATTACHMENT0%2C%20gl.TEXTURE_2D%2C%20texture%2C%200)%3B%0A%0A%20%20%20%20%20%20const%20data%20%3D%20new%20Uint8Array(width%20*%20height%20*%204)%3B%0A%20%20%20%20%20%20gl.readPixels(0%2C%200%2C%20width%2C%20height%2C%20gl.RGBA%2C%20gl.UNSIGNED_BYTE%2C%20data)%3B%0A%0A%20%20%20%20%20%20gl.deleteFramebuffer(framebuffer)%3B%0A%0A%20%20%20%20%20%20const%20imageData%20%3D%20new%20ImageData(width%2C%20height)%3B%0A%20%20%20%20%20%20imageData.data.set(data)%3B%0A%0A%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0A%20%20%20%20%20%20canvas.width%20%3D%20width%3B%0A%20%20%20%20%20%20canvas.height%20%3D%20height%3B%0A%20%20%20%20%20%20const%20context%20%3D%20canvas.getContext(%222d%22)%3B%0A%0A%20%20%20%20%20%20context.putImageData(imageData%2C%200%2C%200)%3B%0A%0A%20%20%20%20%20%20return%20canvas%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getCanvasFromSkin(skin)%20%7B%0A%20%20%20%20%20%20const%20emptyCanvas%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0A%20%20%20%20%20%20%20%20canvas.width%20%3D%201%3B%0A%20%20%20%20%20%20%20%20canvas.height%20%3D%201%3B%0A%20%20%20%20%20%20%20%20return%20canvas%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20switch%20(skin.constructor)%20%7B%0A%20%20%20%20%20%20%20%20case%20renderer.exports.BitmapSkin%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(skin._textureSize%5B0%5D%20%3C%201%20%7C%7C%20skin._textureSize%5B1%5D%20%3C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20emptyCanvas()%3B%0A%20%20%20%20%20%20%20%20%20%20return%20this.getCanvasFromTexture(%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer.gl%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20skin.getTexture()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20skin._textureSize%5B0%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20skin._textureSize%5B1%5D%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20renderer.exports.SVGSkin%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20code%20copy-pasted%20from%20scratch-render%0A%20%20%20%20%20%20%20%20%20%20const%20INDEX_OFFSET%20%3D%208%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20textureScale%20%3D%20200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20scaleMax%20%3D%20textureScale%20%3F%20Math.max(Math.abs(textureScale)%2C%20Math.abs(textureScale))%20%3A%20100%3B%0A%20%20%20%20%20%20%20%20%20%20const%20requestedScale%20%3D%20Math.min(scaleMax%20%2F%20100%2C%20skin._maxTextureScale)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20mipLevel%20%3D%20Math.max(Math.ceil(Math.log2(requestedScale))%20%2B%20INDEX_OFFSET%2C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20mipScale%20%3D%20Math.pow(2%2C%20mipLevel%20-%20INDEX_OFFSET)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20sizeX%20%3D%20Math.ceil(skin._size%5B0%5D%20*%20mipScale)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20sizeY%20%3D%20Math.ceil(skin._size%5B1%5D%20*%20mipScale)%0A%20%20%20%20%20%20%20%20%20%20if%20(sizeX%20%3C%201%20%7C%7C%20sizeY%20%3C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20emptyCanvas()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20return%20this.getCanvasFromTexture(%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer.gl%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20skin.getTexture(%5BtextureScale%2C%20textureScale%5D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20sizeX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20sizeY%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20console.error(%22Could%20not%20get%20skin%20image%20data%3A%22%2C%20skin)%3B%0A%20%20%20%20%20%20%20%20%20%20throw%20new%20TypeError(%22Could%20not%20get%20skin%20image%20data%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getSizeFromSkin(skin)%20%7B%0A%20%20%20%20%20%20switch%20(skin.constructor)%20%7B%0A%20%20%20%20%20%20%20%20case%20renderer.exports.BitmapSkin%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20skin._textureSize%5B0%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20skin._textureSize%5B1%5D%0A%20%20%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20renderer.exports.SVGSkin%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20skin._size%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20console.error(%22Could%20not%20get%20skin%20size%3A%22%2C%20skin)%3B%0A%20%20%20%20%20%20%20%20%20%20throw%20new%20TypeError(%22Could%20not%20get%20skin%20size%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20enable3DForDrawable(drawableID%2C%20type%20%3D%20%22flat%22)%20%7B%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5BdrawableID%5D%3B%0A%20%20%20%20%20%20if%20(dr%5BIN_3D%5D)%20return%3B%0A%0A%20%20%20%20%20%20dr%5BIN_3D%5D%20%3D%20true%3B%0A%0A%20%20%20%20%20%20let%20obj%3B%0A%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20%22sprite%22)%20%7B%0A%20%20%20%20%20%20%20%20obj%20%3D%20new%20THREE.Sprite()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20obj%20%3D%20new%20THREE.Mesh()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20dr%5BOBJECT%5D%20%3D%20obj%3B%0A%20%20%20%20%20%20this.updateMeshForDrawable(drawableID%2C%20type)%3B%0A%0A%20%20%20%20%20%20if%20(!(YAW%20in%20dr))%20dr%5BYAW%5D%20%3D%200%3B%0A%20%20%20%20%20%20if%20(!(PITCH%20in%20dr))%20dr%5BPITCH%5D%20%3D%200%3B%0A%20%20%20%20%20%20if%20(!(ROLL%20in%20dr))%20dr%5BROLL%5D%20%3D%200%3B%0A%20%20%20%20%20%20if%20(!(Z_POS%20in%20dr))%20dr%5BZ_POS%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20this.scene.add(obj)%3B%0A%20%20%20%20%20%20this.updateAttachment(dr)%3B%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20updateMeshForDrawable(drawableID%2C%20type)%20%7B%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5BdrawableID%5D%3B%0A%20%20%20%20%20%20if%20(!dr%5BIN_3D%5D)%20return%3B%0A%20%20%20%20%20%20const%20obj%20%3D%20dr%5BOBJECT%5D%3B%0A%0A%20%20%20%20%20%20if%20(obj.isSprite)%20%7B%0A%20%20%20%20%20%20%20%20if%20(obj.material)%20obj.material.dispose()%3B%0A%20%20%20%20%20%20%20%20obj.material%20%3D%20new%20THREE.SpriteMaterial()%3B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20size%20%3D%20this.getSizeFromSkin(dr.skin)%3B%0A%20%20%20%20%20%20%20%20%20%20obj._sizeX%20%3D%20size%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20obj._sizeY%20%3D%20size%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20obj._sizeZ%20%3D%20size%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20console.error(e)%3B%0A%20%20%20%20%20%20%20%20%20%20obj._sizeX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20obj._sizeY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20obj._sizeZ%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20obj.material%20%3D%20new%20THREE.MeshBasicMaterial()%3B%0A%20%20%20%20%20%20%20%20switch%20(type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20%22flat%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20obj.geometry%20%3D%20new%20THREE.PlaneGeometry(dr.skin.size%5B0%5D%2C%20dr.skin.size%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22flat%20triangle%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20geometry%20%3D%20new%20THREE.BufferGeometry()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20w%20%3D%20dr.skin.size%5B0%5D%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20h%20%3D%20dr.skin.size%5B1%5D%20%2F%202%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20vertices%20%3D%20new%20Float32Array(%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-w%2C%20-h%2C%200.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20w%2C%20-h%2C%200.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-w%2C%20h%2C%200.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20uvs%20%3D%20new%20Float32Array(%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201%2C%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%201%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20geometry.setIndex(%5B0%2C%201%2C%202%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20geometry.setAttribute(%22position%22%2C%20new%20THREE.BufferAttribute(vertices%2C%203))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20geometry.setAttribute(%22uv%22%2C%20new%20THREE.BufferAttribute(uvs%2C%202))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20obj.geometry%20%3D%20geometry%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22cube%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20obj.geometry%20%3D%20new%20THREE.BoxGeometry(dr.skin.size%5B0%5D%2C%20dr.skin.size%5B1%5D%2C%20dr.skin.size%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22sphere%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20obj.geometry%20%3D%20new%20THREE.SphereGeometry(Math.max(dr.skin.size%5B0%5D%2C%20dr.skin.size%5B1%5D)%20%2F%202%2C%2024%2C%2012)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22low-poly%20sphere%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20obj.geometry%20%3D%20new%20THREE.SphereGeometry(Math.max(dr.skin.size%5B0%5D%2C%20dr.skin.size%5B1%5D)%20%2F%202%2C%208%2C%206)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20obj._sizeX%20%3D%201%3B%0A%20%20%20%20%20%20%20%20obj._sizeY%20%3D%201%3B%0A%20%20%20%20%20%20%20%20obj._sizeZ%20%3D%201%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(obj%3F.material%3F.map)%20obj%3F.material%3F.map%3F.dispose()%3B%0A%20%20%20%20%20%20const%20texture%20%3D%20this.getThreeTextureFromSkin(dr.skin)%3B%0A%20%20%20%20%20%20obj.material.map%20%3D%20texture%3B%0A%20%20%20%20%20%20texture.colorSpace%20%3D%20THREE.SRGBColorSpace%3B%0A%20%20%20%20%20%20obj.material.alphaTest%20%3D%200.01%3B%0A%0A%20%20%20%20%20%20this.updateMaterialForDrawable(drawableID)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%20wrong%20type%0A%20%20%20%20%20%20dr.updateScale(dr.scale)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20updateMaterialForDrawable(drawableID)%20%7B%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5BdrawableID%5D%3B%0A%20%20%20%20%20%20if%20(!dr%5BIN_3D%5D)%20return%3B%0A%20%20%20%20%20%20const%20obj%20%3D%20dr%5BOBJECT%5D%3B%0A%0A%20%20%20%20%20%20if%20(!(SIDE_MODE%20in%20dr))%20dr%5BSIDE_MODE%5D%20%3D%20THREE.DoubleSide%3B%0A%20%20%20%20%20%20if%20(!(TEX_FILTER%20in%20dr))%20dr%5BTEX_FILTER%5D%20%3D%20THREE.LinearMipmapLinearFilter%3B%0A%0A%20%20%20%20%20%20obj.material.side%20%3D%20dr%5BSIDE_MODE%5D%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20const%20texture%20%3D%20obj.material.map%3B%0A%20%20%20%20%20%20texture.minFilter%20%3D%20dr%5BTEX_FILTER%5D%3B%0A%20%20%20%20%20%20texture.magFilter%20%3D%20dr%5BTEX_FILTER%5D%3B%0A%20%20%20%20%20%20if%20(texture.magFilter%20%3D%3D%3D%20THREE.LinearMipmapLinearFilter)%0A%20%20%20%20%20%20%20%20texture.magFilter%20%3D%20THREE.LinearFilter%3B%0A%0A%20%20%20%20%20%20obj.material.transparent%20%3D%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20disable3DForDrawable(drawableID)%20%7B%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5BdrawableID%5D%3B%0A%20%20%20%20%20%20if%20(!dr%5BIN_3D%5D)%20return%3B%0A%0A%20%20%20%20%20%20dr%5BIN_3D%5D%20%3D%20false%3B%0A%0A%20%20%20%20%20%20dr%5BZ_POS%5D%20%3D%20dr%5BOBJECT%5D.position.z%3B%0A%20%20%20%20%20%20delete%20dr%5BZ_STRETCH%5D%3B%0A%0A%20%20%20%20%20%20dr%5BOBJECT%5D.removeFromParent()%3B%0A%20%20%20%20%20%20dr%5BOBJECT%5D.material.dispose()%3B%0A%20%20%20%20%20%20if%20(dr%5BOBJECT%5D.material.map)%20dr%5BOBJECT%5D.material.map.dispose()%3B%0A%20%20%20%20%20%20dr%5BOBJECT%5D.geometry.dispose()%3B%0A%20%20%20%20%20%20dr%5BOBJECT%5D%20%3D%20null%3B%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20%2F%2F%2F%20BLOCKS%20%2F%2F%2F%0A%0A%20%20%20%20setMode(%7B%20MODE%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%0A%20%20%20%20%20%20this.init()%3B%0A%20%20%20%20%20%20switch%20(MODE)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22disabled%22%3A%0A%20%20%20%20%20%20%20%20%20%20this.disable3DForDrawable(util.target.drawableID)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22flat%22%3A%0A%20%20%20%20%20%20%20%20case%20%22flat%20triangle%22%3A%0A%20%20%20%20%20%20%20%20case%20%22sprite%22%3A%0A%20%20%20%20%20%20%20%20case%20%22cube%22%3A%0A%20%20%20%20%20%20%20%20case%20%22sphere%22%3A%0A%20%20%20%20%20%20%20%20case%20%22low-poly%20sphere%22%3A%0A%20%20%20%20%20%20%20%20%20%20this.disable3DForDrawable(util.target.drawableID)%3B%0A%20%20%20%20%20%20%20%20%20%20this.enable3DForDrawable(util.target.drawableID%2C%20MODE)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(util.target.renderer)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20properties%0A%20%20%20%20%20%20%20%20%20%20%20%20this.refreshThreeDrawable(util.target)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20refreshThreeDrawable(target)%20%7B%0A%20%20%20%20%20%20const%20%7Bdirection%2C%20scale%7D%20%3D%20target._getRenderedDirectionAndScale()%3B%0A%20%20%20%20%20%20const%20dr%20%3D%20target.renderer._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20dr.updatePosition(%5Btarget.x%2C%20target.y%5D)%3B%0A%20%20%20%20%20%20dr.updateDirection(direction)%3B%0A%20%20%20%20%20%20dr.updateScale(scale)%3B%0A%20%20%20%20%20%20dr.updateVisible(target.visible)%3B%0A%20%20%20%20%20%20if%20(dr%5BOBJECT%5D)%20%7B%0A%20%20%20%20%20%20%20%20dr%5BOBJECT%5D.position.z%20%3D%20dr%5BZ_POS%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.updateSpriteAngle(%7Btarget%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setZ(%7B%20Z%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%20%20%20%20%20%20if%20(!dr%5BIN_3D%5D)%20return%3B%0A%0A%20%20%20%20%20%20dr%5BOBJECT%5D.position.z%20%3D%20Scratch.Cast.toNumber(Z)%3B%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20changeZ(%7B%20Z%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%20%20%20%20%20%20if%20(!dr%5BIN_3D%5D)%20return%3B%0A%0A%20%20%20%20%20%20const%20z%20%3D%20Scratch.Cast.toNumber(Z)%3B%0A%20%20%20%20%20%20dr%5BOBJECT%5D.position.z%20%2B%3D%20z%3B%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getZ(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%200%3B%0A%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%20%20%20%20%20%20if%20(!dr%5BOBJECT%5D)%20return%200%3B%0A%20%20%20%20%20%20return%20dr%5BOBJECT%5D.position.z%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setZStretch(%7B%20STRETCH%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%20%20%20%20%20%20if%20(!dr%5BIN_3D%5D)%20return%3B%0A%0A%20%20%20%20%20%20%2F%2F%20empty%20strings%20and%20invalid%20numbers%20should%20use%20the%20horizontal%20scale%0A%20%20%20%20%20%20if%20(isNaN(STRETCH)%20%7C%7C%20(typeof%20STRETCH%20%3D%3D%3D%20%22string%22%20%26%26%20!STRETCH.trim()))%0A%20%20%20%20%20%20%20%20delete%20dr%5BZ_STRETCH%5D%3B%0A%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20dr%5BZ_STRETCH%5D%20%3D%20%2BSTRETCH%3B%0A%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%20wrong%20type%0A%20%20%20%20%20%20dr.updateScale(dr.scale)%3B%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getZStretch(_args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%20%22%22%3B%0A%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%20%20%20%20%20%20return%20dr%5BZ_STRETCH%5D%20%3F%3F%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20mod(n%2C%20modulus)%20%7B%0A%20%20%20%20%20%20let%20result%20%3D%20n%20%25%20modulus%3B%0A%20%20%20%20%20%20%2F%2F%20Scratch%20mod%20uses%20floored%20division%20instead%20of%20truncated%20division.%0A%20%20%20%20%20%20if%20(result%20%2F%20modulus%20%3C%200)%20result%20%2B%3D%20modulus%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20wrapClamp(n%2C%20min%2C%20max)%20%7B%0A%20%20%20%20%20%20const%20offset%20%3D%20n%20-%20min%3B%0A%20%20%20%20%20%20const%20range%20%3D%20max%20-%20min%3B%0A%20%20%20%20%20%20return%20min%20%2B%20this.mod(offset%2C%20range)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20updateSpriteAngle(util)%20%7B%0A%20%20%20%20%20%20let%20dr%3B%0A%20%20%20%20%20%20if%20(util%3F.target)%20%7B%0A%20%20%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%20%20%20%20%20%20%20%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20dr%20%3D%20util%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!dr%5BIN_3D%5D)%20return%3B%0A%20%20%20%20%20%20const%20obj%20%3D%20dr%5BOBJECT%5D%3B%0A%0A%20%20%20%20%20%20obj.rotation.x%20%3D%200%3B%0A%20%20%20%20%20%20obj.rotation.y%20%3D%200%3B%0A%20%20%20%20%20%20obj.rotation.z%20%3D%200%3B%0A%0A%20%20%20%20%20%20const%20WRAP_MIN%20%3D%20THREE.MathUtils.degToRad(-180)%3B%0A%20%20%20%20%20%20const%20WRAP_MAX%20%3D%20THREE.MathUtils.degToRad(180)%3B%0A%20%20%20%20%20%20dr%5BYAW%5D%20%3D%20this.wrapClamp(dr%5BYAW%5D%2C%20WRAP_MIN%2C%20WRAP_MAX)%3B%0A%20%20%20%20%20%20dr%5BPITCH%5D%20%3D%20this.wrapClamp(dr%5BPITCH%5D%2C%20WRAP_MIN%2C%20WRAP_MAX)%3B%0A%20%20%20%20%20%20dr%5BROLL%5D%20%3D%20this.wrapClamp(dr%5BROLL%5D%2C%20WRAP_MIN%2C%20WRAP_MAX)%3B%0A%0A%20%20%20%20%20%20obj.rotation.y%20%3D%20dr%5BYAW%5D%3B%0A%20%20%20%20%20%20obj.rotateOnAxis(%0A%20%20%20%20%20%20%20%20new%20THREE.Vector3(1%2C%200%2C%200)%2C%0A%20%20%20%20%20%20%20%20dr%5BPITCH%5D%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20obj.rotateOnAxis(%0A%20%20%20%20%20%20%20%20new%20THREE.Vector3(0%2C%200%2C%201)%2C%0A%20%20%20%20%20%20%20%20THREE.MathUtils.degToRad(90)%20-%20dr%5BROLL%5D%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20set3DPos(%7BX%2C%20Y%2C%20Z%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%0A%20%20%20%20%20%20X%20%3D%20Scratch.Cast.toNumber(X)%3B%0A%20%20%20%20%20%20Y%20%3D%20Scratch.Cast.toNumber(Y)%3B%0A%20%20%20%20%20%20util.target.setXY(X%2C%20Y)%3B%0A%20%20%20%20%20%20this.setZ(%7BZ%7D%2C%20util)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20change3DPos(%7BX%2C%20Y%2C%20Z%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%20%20%20%20%20%20const%20dx%20%3D%20Scratch.Cast.toNumber(X)%3B%0A%20%20%20%20%20%20const%20dy%20%3D%20Scratch.Cast.toNumber(Y)%3B%0A%20%20%20%20%20%20util.target.setXY(util.target.x%20%2B%20dx%2C%20util.target.y%20%2B%20dy)%3B%0A%0A%20%20%20%20%20%20this.changeZ(%7BZ%7D%2C%20util)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20moveSteps(%7BSTEPS%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%20%20%20%20%20%20if%20(!dr%5BIN_3D%5D)%20return%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20const%20add%20%3D%20new%20THREE.Vector3(0%2C%200%2C%201)%0A%20%20%20%20%20%20%20%20%20%20.applyQuaternion(dr%5BOBJECT%5D.quaternion)%0A%20%20%20%20%20%20%20%20%20%20.multiplyScalar(-Scratch.Cast.toNumber(STEPS))%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20util.target.setXY(util.target.x%20%2B%20add.x%2C%20util.target.y%20%2B%20add.y)%3B%0A%20%20%20%20%20%20this.changeZ(%7BZ%3A%20add.z%7D%2C%20util)%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20rotate3D(%7BDIRECTION%2C%20DEGREES%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%0A%20%20%20%20%20%20if%20(!dr%5BIN_3D%5D)%20return%3B%0A%0A%20%20%20%20%20%20if%20(!isFinite(DEGREES))%20return%3B%0A%0A%20%20%20%20%20%20DEGREES%20%3D%20Scratch.Cast.toNumber(DEGREES)%20*%0A%20%20%20%20%20%20%20%20((DIRECTION%20%3D%3D%3D%20%22left%22%20%7C%7C%20DIRECTION%20%3D%3D%3D%20%22down%22%20%7C%7C%20DIRECTION%20%3D%3D%3D%20%22ccw%22)%20%3F%20-1%20%3A%201)%3B%0A%0A%20%20%20%20%20%20switch%20(DIRECTION)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22left%22%3A%0A%20%20%20%20%20%20%20%20case%20%22right%22%3A%0A%20%20%20%20%20%20%20%20%20%20dr%5BYAW%5D%20-%3D%20THREE.MathUtils.degToRad(DEGREES)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22up%22%3A%0A%20%20%20%20%20%20%20%20case%20%22down%22%3A%0A%20%20%20%20%20%20%20%20%20%20dr%5BPITCH%5D%20%2B%3D%20THREE.MathUtils.degToRad(DEGREES)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22cw%22%3A%0A%20%20%20%20%20%20%20%20case%20%22ccw%22%3A%0A%20%20%20%20%20%20%20%20%20%20util.target.setDirection(util.target.direction%20%2B%20DEGREES)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.updateSpriteAngle(util)%3B%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20set3DDir(%7BDIRECTION%2C%20DEGREES%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%0A%20%20%20%20%20%20if%20(!dr%5BIN_3D%5D)%20return%3B%0A%0A%20%20%20%20%20%20DEGREES%20%3D%20Scratch.Cast.toNumber(DEGREES)%3B%0A%0A%20%20%20%20%20%20if%20(!isFinite(DEGREES))%20return%3B%0A%0A%20%20%20%20%20%20switch%20(DIRECTION)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22y%22%3A%0A%20%20%20%20%20%20%20%20case%20%22angle%22%3A%20%2F%2F%20Old%20versions%20of%20the%20extension%20used%20angle%2Faim%2Froll%20instead%20of%20rotation%20around%20Y%2FX%2FZ%0A%20%20%20%20%20%20%20%20%20%20dr%5BYAW%5D%20%3D%20-THREE.MathUtils.degToRad(DEGREES)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22x%22%3A%0A%20%20%20%20%20%20%20%20case%20%22aim%22%3A%0A%20%20%20%20%20%20%20%20%20%20dr%5BPITCH%5D%20%3D%20THREE.MathUtils.degToRad(DEGREES)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22z%22%3A%0A%20%20%20%20%20%20%20%20case%20%22roll%22%3A%0A%20%20%20%20%20%20%20%20%20%20util.target.setDirection(DEGREES%20%2B%2090)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.updateSpriteAngle(util)%3B%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20direction3D(%7BDIRECTION%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%200%3B%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%20%20%20%20%20%20if%20(!dr%5BIN_3D%5D)%20return%200%3B%0A%0A%20%20%20%20%20%20switch%20(DIRECTION)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22y%22%3A%0A%20%20%20%20%20%20%20%20case%20%22angle%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20-THREE.MathUtils.radToDeg(dr%5BYAW%5D)%3B%0A%20%20%20%20%20%20%20%20case%20%22x%22%3A%0A%20%20%20%20%20%20%20%20case%20%22aim%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20THREE.MathUtils.radToDeg(dr%5BPITCH%5D)%3B%0A%20%20%20%20%20%20%20%20case%20%22z%22%3A%0A%20%20%20%20%20%20%20%20case%20%22roll%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20THREE.MathUtils.radToDeg(dr%5BROLL%5D)%20-%2090%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setSideMode(%7BSIDE%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%0A%20%20%20%20%20%20this.init()%3B%0A%0A%20%20%20%20%20%20const%20sides%20%3D%20Object.assign(Object.create(null)%2C%20%7B%0A%20%20%20%20%20%20%20%20front%3A%20THREE.FrontSide%2C%0A%20%20%20%20%20%20%20%20back%3A%20THREE.BackSide%2C%0A%20%20%20%20%20%20%20%20both%3A%20THREE.DoubleSide%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20if%20(!(SIDE%20in%20sides))%20return%3B%0A%20%20%20%20%20%20dr%5BSIDE_MODE%5D%20%3D%20sides%5BSIDE%5D%3B%0A%20%20%20%20%20%20if%20(dr%5BOBJECT%5D%20%26%26%20dr%5BOBJECT%5D.material)%20%7B%0A%20%20%20%20%20%20%20%20dr%5BOBJECT%5D.material.side%20%3D%20sides%5BSIDE%5D%3B%0A%20%20%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20updateAttachment(dr)%20%7B%0A%20%20%20%20%20%20if%20(!this.scene)%20return%3B%0A%20%20%20%20%20%20if%20(dr%5BIN_3D%5D)%20%7B%0A%20%20%20%20%20%20%20%20const%20newParent%20%3D%20dr%5BATTACHED_TO%5D%3F.%5BOBJECT%5D%20%7C%7C%20this.scene%3B%0A%20%20%20%20%20%20%20%20if%20(dr%5BOBJECT%5D.parent%20!%3D%3D%20newParent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20dr%5BOBJECT%5D.removeFromParent()%3B%0A%20%20%20%20%20%20%20%20%20%20newParent.add(dr%5BOBJECT%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20attach(%7BTARGET%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%20%20%20%20%20%20const%20targetObj%20%3D%20runtime.getSpriteTargetByName(Scratch.Cast.toString(TARGET))%3B%0A%20%20%20%20%20%20if%20(!targetObj)%20return%3B%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%20%20%20%20%20%20const%20targetDr%20%3D%20renderer._allDrawables%5BtargetObj.drawableID%5D%3B%0A%20%20%20%20%20%20if%20(dr%20%3D%3D%3D%20targetDr)%20return%3B%0A%0A%20%20%20%20%20%20dr%5BATTACHED_TO%5D%20%3D%20targetDr%3B%0A%20%20%20%20%20%20this.updateAttachment(dr)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20attachVar(%7BVARIABLE%2C%20VALUE%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%20%20%20%20%20%20VARIABLE%20%3D%20Scratch.Cast.toString(VARIABLE)%3B%0A%20%20%20%20%20%20VALUE%20%3D%20Scratch.Cast.toString(VALUE)%3B%0A%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%20%20%20%20%20%20let%20targetDr%20%3D%20undefined%3B%0A%20%20%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20const%20variable%20%3D%20target.lookupVariableByNameAndType(VARIABLE%2C%20%22%22%2C%20true)%3B%0A%20%20%20%20%20%20%20%20if%20(variable%20%26%26%20Scratch.Cast.toString(variable%3F.value)%20%3D%3D%3D%20VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20targetDr%20%3D%20target.isStage%20%3F%20null%20%3A%20renderer._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(targetDr%20%3D%3D%3D%20undefined)%20return%3B%0A%20%20%20%20%20%20if%20(dr%20%3D%3D%3D%20targetDr)%20return%3B%0A%20%20%20%20%20%20dr%5BATTACHED_TO%5D%20%3D%20targetDr%3B%0A%20%20%20%20%20%20this.updateAttachment(dr)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20detach(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%20%20%20%20%20%20dr%5BATTACHED_TO%5D%20%3D%20null%3B%0A%0A%20%20%20%20%20%20this.updateAttachment(dr)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getAttachedSprite(dr)%20%7B%0A%20%20%20%20%20%20if%20(!dr%5BIN_3D%5D%20%7C%7C%20!dr%5BATTACHED_TO%5D)%20return%20null%3B%0A%20%20%20%20%20%20const%20attachedId%20%3D%20dr%5BATTACHED_TO%5D.id%3B%0A%20%20%20%20%20%20const%20attachedSprite%20%3D%20runtime.targets.find(target%20%3D%3E%20target.drawableID%20%3D%3D%3D%20attachedId)%3B%0A%20%20%20%20%20%20if%20(!attachedSprite)%20return%20null%3B%0A%20%20%20%20%20%20return%20attachedSprite%0A%20%20%20%20%7D%0A%0A%20%20%20%20attachedSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%20%22%22%3B%0A%0A%20%20%20%20%20%20const%20attachedSprite%20%3D%20this.getAttachedSprite(renderer._allDrawables%5Butil.target.drawableID%5D)%3B%0A%20%20%20%20%20%20if%20(!attachedSprite)%20return%20%22%22%3B%0A%20%20%20%20%20%20return%20attachedSprite.sprite.name%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20attachedSpriteVar(%7BVARIABLE%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%20%22%22%3B%0A%0A%20%20%20%20%20%20const%20attachedSprite%20%3D%20this.getAttachedSprite(renderer._allDrawables%5Butil.target.drawableID%5D)%3B%0A%20%20%20%20%20%20if%20(!attachedSprite)%20return%20%22%22%3B%0A%0A%20%20%20%20%20%20VARIABLE%20%3D%20Scratch.Cast.toString(VARIABLE)%3B%0A%20%20%20%20%20%20return%20attachedSprite.lookupVariableByNameAndType(VARIABLE%2C%20%22%22%2C%20true)%3F.value%20%3F%3F%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setTexFilter(%7BFILTER%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isStage)%20return%3B%0A%20%20%20%20%20%20const%20dr%20%3D%20renderer._allDrawables%5Butil.target.drawableID%5D%3B%0A%0A%20%20%20%20%20%20this.init()%3B%0A%0A%20%20%20%20%20%20const%20filters%20%3D%20Object.assign(Object.create(null)%2C%20%7B%0A%20%20%20%20%20%20%20%20nearest%3A%20THREE.NearestFilter%2C%0A%20%20%20%20%20%20%20%20linear%3A%20THREE.LinearMipmapLinearFilter%2C%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20if%20(!(FILTER%20in%20filters))%20return%3B%0A%20%20%20%20%20%20dr%5BTEX_FILTER%5D%20%3D%20filters%5BFILTER%5D%3B%0A%20%20%20%20%20%20if%20(dr%5BOBJECT%5D%20%26%26%20dr%5BOBJECT%5D.material%3F.map)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20i%20think%20for%20some%20reason%20you%20need%20to%20create%20a%20new%20texture%0A%20%20%20%20%20%20%20%20const%20cloned%20%3D%20dr%5BOBJECT%5D.material.map.clone()%3B%0A%20%20%20%20%20%20%20%20dr%5BOBJECT%5D.material.map.dispose()%3B%0A%20%20%20%20%20%20%20%20cloned.colorSpace%20%3D%20THREE.SRGBColorSpace%3B%0A%20%20%20%20%20%20%20%20dr%5BOBJECT%5D.material.map%20%3D%20cloned%3B%0A%20%20%20%20%20%20%20%20cloned.needsUpdate%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.updateMaterialForDrawable(util.target.drawableID)%0A%20%20%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20preUpdateCameraAngle()%20%7B%0A%20%20%20%20%20%20if%20(!(YAW%20in%20this.camera))%20this.camera%5BYAW%5D%20%3D%200%3B%0A%20%20%20%20%20%20if%20(!(PITCH%20in%20this.camera))%20this.camera%5BPITCH%5D%20%3D%200%3B%0A%20%20%20%20%20%20if%20(!(ROLL%20in%20this.camera))%20this.camera%5BROLL%5D%20%3D%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20updateCameraAngle()%20%7B%0A%20%20%20%20%20%20this.camera.rotation.x%20%3D%200%3B%0A%20%20%20%20%20%20this.camera.rotation.y%20%3D%200%3B%0A%20%20%20%20%20%20this.camera.rotation.z%20%3D%200%3B%0A%0A%20%20%20%20%20%20const%20WRAP_MIN%20%3D%20THREE.MathUtils.degToRad(-180)%3B%0A%20%20%20%20%20%20const%20WRAP_MAX%20%3D%20THREE.MathUtils.degToRad(180)%3B%0A%20%20%20%20%20%20this.camera%5BYAW%5D%20%3D%20this.wrapClamp(this.camera%5BYAW%5D%2C%20WRAP_MIN%2C%20WRAP_MAX)%3B%0A%20%20%20%20%20%20this.camera%5BPITCH%5D%20%3D%20this.wrapClamp(this.camera%5BPITCH%5D%2C%20WRAP_MIN%2C%20WRAP_MAX)%3B%0A%20%20%20%20%20%20this.camera%5BROLL%5D%20%3D%20this.wrapClamp(this.camera%5BROLL%5D%2C%20WRAP_MIN%2C%20WRAP_MAX)%3B%0A%0A%20%20%20%20%20%20this.camera.rotation.y%20%3D%20this.camera%5BYAW%5D%3B%0A%20%20%20%20%20%20this.camera.rotateOnAxis(%0A%20%20%20%20%20%20%20%20new%20THREE.Vector3(1%2C%200%2C%200)%2C%0A%20%20%20%20%20%20%20%20this.camera%5BPITCH%5D%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.camera.rotateOnAxis(%0A%20%20%20%20%20%20%20%20new%20THREE.Vector3(0%2C%200%2C%201)%2C%0A%20%20%20%20%20%20%20%20this.camera%5BROLL%5D%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setCam(%7B%20X%2C%20Y%2C%20Z%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20this.init()%3B%0A%0A%20%20%20%20%20%20const%20x%20%3D%20Scratch.Cast.toNumber(X)%3B%0A%20%20%20%20%20%20const%20y%20%3D%20Scratch.Cast.toNumber(Y)%3B%0A%20%20%20%20%20%20const%20z%20%3D%20Scratch.Cast.toNumber(Z)%3B%0A%20%20%20%20%20%20this.camera.position.set(x%2C%20y%2C%20z)%3B%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeCam(%7B%20X%2C%20Y%2C%20Z%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20this.init()%3B%0A%0A%20%20%20%20%20%20const%20x%20%3D%20Scratch.Cast.toNumber(X)%3B%0A%20%20%20%20%20%20const%20y%20%3D%20Scratch.Cast.toNumber(Y)%3B%0A%20%20%20%20%20%20const%20z%20%3D%20Scratch.Cast.toNumber(Z)%3B%0A%20%20%20%20%20%20const%20pos%20%3D%20this.camera.position%3B%0A%20%20%20%20%20%20pos.set(pos.x%20%2B%20x%2C%20pos.y%20%2B%20y%2C%20pos.z%20%2B%20z)%3B%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%20%20%20%20camX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20this.init()%3B%0A%20%20%20%20%20%20return%20this.camera.position.x%3B%0A%20%20%20%20%7D%0A%20%20%20%20camY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20this.init()%3B%0A%20%20%20%20%20%20return%20this.camera.position.y%3B%0A%20%20%20%20%7D%0A%20%20%20%20camZ(args%2C%20util)%20%7B%0A%20%20%20%20%20%20this.init()%3B%0A%20%20%20%20%20%20return%20this.camera.position.z%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20moveCamSteps(%7BSTEPS%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20this.init()%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20this.camera.position.add(%0A%20%20%20%20%20%20%20%20new%20THREE.Vector3(0%2C%200%2C%201)%0A%20%20%20%20%20%20%20%20%20%20.applyQuaternion(this.camera.quaternion)%0A%20%20%20%20%20%20%20%20%20%20.multiplyScalar(-Scratch.Cast.toNumber(STEPS))%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20rotateCam(%7B%20DIRECTION%2C%20DEGREES%20%7D)%20%7B%0A%20%20%20%20%20%20this.init()%3B%0A%0A%20%20%20%20%20%20DEGREES%20%3D%20Scratch.Cast.toNumber(DEGREES)%20*%0A%20%20%20%20%20%20%20%20((DIRECTION%20%3D%3D%3D%20%22left%22%20%7C%7C%20DIRECTION%20%3D%3D%3D%20%22down%22%20%7C%7C%20DIRECTION%20%3D%3D%3D%20%22ccw%22)%20%3F%20-1%20%3A%201)%3B%0A%0A%20%20%20%20%20%20this.preUpdateCameraAngle()%3B%0A%20%20%20%20%20%20switch%20(DIRECTION)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22left%22%3A%0A%20%20%20%20%20%20%20%20case%20%22right%22%3A%0A%20%20%20%20%20%20%20%20%20%20this.camera%5BYAW%5D%20-%3D%20THREE.MathUtils.degToRad(DEGREES)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22up%22%3A%0A%20%20%20%20%20%20%20%20case%20%22down%22%3A%0A%20%20%20%20%20%20%20%20%20%20this.camera%5BPITCH%5D%20%2B%3D%20THREE.MathUtils.degToRad(DEGREES)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22cw%22%3A%0A%20%20%20%20%20%20%20%20case%20%22ccw%22%3A%0A%20%20%20%20%20%20%20%20%20%20this.camera%5BROLL%5D%20%2B%3D%20THREE.MathUtils.degToRad(DEGREES)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.updateCameraAngle()%3B%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%20%20%20%20setCamDir(%7B%20DEGREES%2C%20DIRECTION%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20this.init()%3B%0A%0A%20%20%20%20%20%20DEGREES%20%3D%20Scratch.Cast.toNumber(DEGREES)%3B%0A%0A%20%20%20%20%20%20this.preUpdateCameraAngle()%3B%0A%20%20%20%20%20%20switch%20(DIRECTION)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22y%22%3A%0A%20%20%20%20%20%20%20%20case%20%22angle%22%3A%0A%20%20%20%20%20%20%20%20%20%20this.camera%5BYAW%5D%20%3D%20-THREE.MathUtils.degToRad(DEGREES)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22x%22%3A%0A%20%20%20%20%20%20%20%20case%20%22aim%22%3A%0A%20%20%20%20%20%20%20%20%20%20this.camera%5BPITCH%5D%20%3D%20THREE.MathUtils.degToRad(DEGREES)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22z%22%3A%0A%20%20%20%20%20%20%20%20case%20%22roll%22%3A%0A%20%20%20%20%20%20%20%20%20%20this.camera%5BROLL%5D%20%3D%20THREE.MathUtils.degToRad(DEGREES)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.updateCameraAngle()%3B%0A%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%20%20%20%20camDir(%7B%20DIRECTION%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20this.init()%3B%0A%0A%20%20%20%20%20%20this.preUpdateCameraAngle()%3B%0A%20%20%20%20%20%20switch%20(DIRECTION)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22y%22%3A%0A%20%20%20%20%20%20%20%20case%20%22angle%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20-THREE.MathUtils.radToDeg(this.camera%5BYAW%5D)%3B%0A%20%20%20%20%20%20%20%20case%20%22x%22%3A%0A%20%20%20%20%20%20%20%20case%20%22aim%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20THREE.MathUtils.radToDeg(this.camera%5BPITCH%5D)%3B%0A%20%20%20%20%20%20%20%20case%20%22z%22%3A%0A%20%20%20%20%20%20%20%20case%20%22roll%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20THREE.MathUtils.radToDeg(this.camera%5BROLL%5D)%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setCameraParam(%7BPARAM%2C%20VALUE%7D)%20%7B%0A%20%20%20%20%20%20this.init()%3B%0A%0A%20%20%20%20%20%20PARAM%20%3D%20Scratch.Cast.toString(PARAM)%3B%0A%20%20%20%20%20%20switch%20(PARAM)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22minimum%20render%20distance%22%3A%0A%20%20%20%20%20%20%20%20%20%20VALUE%20%3D%20Math.max(Scratch.Cast.toNumber(VALUE)%2C%200.1)%3B%0A%20%20%20%20%20%20%20%20%20%20this.camera.near%20%3D%20VALUE%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22maximum%20render%20distance%22%3A%0A%20%20%20%20%20%20%20%20%20%20VALUE%20%3D%20Math.min(Scratch.Cast.toNumber(VALUE)%2C%204800000)%3B%0A%20%20%20%20%20%20%20%20%20%20this.camera.far%20%3D%20VALUE%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22vertical%20FOV%22%3A%0A%20%20%20%20%20%20%20%20%20%20VALUE%20%3D%20Math.min(Math.max(Scratch.Cast.toNumber(VALUE)%2C%200.001)%2C%2036000)%0A%20%20%20%20%20%20%20%20%20%20this.camera.fov%20%3D%20VALUE%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this.camera.updateProjectionMatrix()%3B%0A%20%20%20%20%20%20this.updateRenderer()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20getCameraParam(%7BPARAM%7D)%20%7B%0A%20%20%20%20%20%20this.init()%3B%0A%0A%20%20%20%20%20%20PARAM%20%3D%20Scratch.Cast.toString(PARAM)%3B%0A%20%20%20%20%20%20switch%20(PARAM)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22minimum%20render%20distance%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20this.camera.near%3B%0A%20%20%20%20%20%20%20%20case%20%22maximum%20render%20distance%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20this.camera.far%3B%0A%20%20%20%20%20%20%20%20case%20%22vertical%20FOV%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20this.camera.fov%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20%40ts-expect-error%20-%20i%20have%20no%20idea%0A%20%20Scratch.extensions.register(new%20ThreeD())%3B%0A%7D)(Scratch)%3B","DICandSPmonitorsPlus":"https://sharkpools-extensions.vercel.app/extension-code/Variables-Expanded.js","lmsVideo":"https://extensions.turbowarp.org/Lily/Video.js","SPspotify":"https://sharkpools-extensions.vercel.app/extension-code/Spotify.js","dogeiscutbeepboxplayer":"https://extensions.penguinmod.com/extensions/DogeisCut/BeepBoxPlayer.js","SPpopups":"data:text/javascript;base64,Ly8gTmFtZTogUG9wdXAgUGhvZW5peAovLyBJRDogU1Bwb3B1cHMKLy8gRGVzY3JpcHRpb246IENyZWF0ZSBjdXN0b20gUG9wdXBzLiBJbnNwaXJlZCBieSAnQmV0dGVyIElucHV0Jy4KLy8gQnk6IFNoYXJrUG9vbAovLyBMaWNlbmNlOiBNSVQKCi8vIFZlcnNpb24gVi4xLjAuMDEKCihmdW5jdGlvbiAoU2NyYXRjaCkgewogICJ1c2Ugc3RyaWN0IjsKICBpZiAoIVNjcmF0Y2guZXh0ZW5zaW9ucy51bnNhbmRib3hlZCkgdGhyb3cgbmV3IEVycm9yKCJQb3B1cCBQaG9lbml4IG11c3QgcnVuIHVuc2FuZGJveGVkISIpOwoKICBjb25zdCBtZW51SWNvblVSSSA9CiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSTROeTQxTXpJaUlHaGxhV2RvZEQwaU9EY3VOVE15SWlCMmFXVjNRbTk0UFNJd0lEQWdPRGN1TlRNeUlEZzNMalV6TWlJK1BHY2djM1J5YjJ0bExYZHBaSFJvUFNJd0lpQnpkSEp2YTJVdGJXbDBaWEpzYVcxcGREMGlNVEFpUGp4d1lYUm9JR1E5SWswdU1EQXhJRFF6TGpjMk4wTXVNREF4SURFNUxqVTVOU0F4T1M0MU9UUXVNREF4SURRekxqYzJOaTR3TURGek5ETXVOelkySURFNUxqVTVOQ0EwTXk0M05qWWdORE11TnpZMkxURTVMalU1TkNBME15NDNOall0TkRNdU56WTJJRFF6TGpjMk5sTXdJRFkzTGprek9TQXdJRFF6TGpjMk55SWdabWxzYkQwaUl6Z3lNVGxpWmlJdlBqeHdZWFJvSUdROUlrMDFMakUyTlNBME15NDNOamRqTUMweU1TNHpNaUF4Tnk0eU9ESXRNemd1TmpBeUlETTRMall3TWkwek9DNDJNREp6TXpndU5qQXlJREUzTGpJNE1pQXpPQzQyTURJZ016Z3VOakF5TFRFM0xqSTRNaUF6T0M0Mk1ESXRNemd1TmpBeUlETTRMall3TWxNMUxqRTJOU0EyTlM0d09EY2dOUzR4TmpVZ05ETXVOelkzSWlCbWFXeHNQU0lqWVRneE1tWm1JaTgrUEhCaGRHZ2daRDBpYlRRd0xqTTVOeUExT0M0d09EY3RNeTQ0TlM0Mk1EY3RMakU0TVNBMExqZzNMVE11TVRZZ01TNDRNalV0TVM0ME5EUXROaTR5TVMwMExqRXpPUzB5TGpVMU5pQXhMamt3TkMwekxqTXpOQ0EwTGpRM05pQXlMakF3T0NBMExqUTNOUzB4TGpRME1TMHpMak00TkMwMExqVXlOaTB5TGpZNE9TQXlMakF3TVMwMExqa3lOeTB1T0RjMElESXVORFkxTFRNdU5Ua3RPQzQwTmpVZ01pNHlPVEl0TWk0MU5UWXROQzR3TkRVZ09DNHdOaTB4TGpneU9DMHhNQzR3TmpndExqYzJNeTB4TGpnME5pMDFMalExTVNBeE1DNHlPVEVnTVM0eU1qY3RNVEF1TXpZdE15NDVPQzQ1TnkwMkxqYzNPQ0E1TGpRNE15QTFMamt6TkMwNExqQTNOUzA1TGpjME5TQXpMakk1TmkwMUxqTTFOaUF4TWk0ME1qWWdNVFF1T0RBNExTNHpOelFnTnk0MU9DQTFMak16T1NBeExqQXlNU0ExTGpNMk5TMHhNUzR4T1RnZ09DNHdNRE1nTVM0MU9EUXRMakk1SURRdU16azNMVEl1T0RrNUxURXVNRE0xTFM0eU16TWdNeTQzTVNBeExqZ3pOU0F5TGpVME1pQTBMamMxTnkweExqRXRMakUyTWkwMkxqWTVOQ0EzTGpBeU15MDNMalkyT0NBMUxqSTVOeTAzTGpRd09DQXpMakkzTWlBekxqa3pOUzAzTGpneE1TQXhNUzR5TkRjZ09TNHhOelV0Tnk0d05pNHhPRGdnTnk0ME16TXRPUzQwTURFZ05DNHlOVEVnTVRBdU16VXRNUzQxTXkweExqWXlNU0EyTGpBekxURXdMakV6TXk0eE5Ea2dPUzR4TVRVZ01TNDFOaTB6TGprd055QTBMamMwT0MwNExqa3RNaTQ1TVRZZ01pNHpORGdnTXk0ek9EY3ROQzQzTURNZ01TNDFNaTB5TGpJNExUSXVNakl6TFRNdU5qYzVJRFF1T1RVMElEUXVNVFEzTGpjd01pQTFMakV3TnkweUxqTWdNUzQxTmpVZ015NDROQzAwTGpNeU15QXlMUzQ1TnpFZ05pNDFNemd0TXk0MU9EZ3RNUzR4TXpNdU1ETTVMVFV1TURZMUxUTXVPVE0zTFM0Mk16TXVORE1nTWk0M01ETWdOQzR6SURZdU5USTRMVEl1T0RNeUlETXVNelF0TWk0NU56TXRNeTR3TWpNdU56VWdOUzR6TnkwekxqRTVOeUF5TGpnNU5DMHlMamswTFRJdU9UWXVOVEkyTFRVdU1qazNMVEl1TnpnZ015NHhOVFV0TWk0MU5qUXRNeTQyTkNBMExqTTJPUzAyTGpVMk5Ib2lJR1pwYkd3OUlpTm1abVlpTHo0OEwyYytQQzl6ZG1jKyI7CiAgY29uc3QgZ2V0QmxvY2tJY29uID0gKG5hbWUpID0+IHsKICAgIC8vIGxvd2VyIGZpbGUgc2l6ZSBtb21lbnQKICAgIGNvbnN0IHN0YXJ0ID0gImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJIjsKICAgIHJldHVybiBzdGFydCArIHsKICAgICAgbWFpbjogIjNPUzR4T1RraUlHaGxhV2RvZEQwaU9EY3VPVEl5SWlCMmFXVjNRbTk0UFNJd0lEQWdOemt1TVRrNUlEZzNMamt5TWlJK1BIQmhkR2dnWkQwaWJUSTFMamt3TVNBMk5TNDFNRGN0TlM0eU5UVXRMakE0WXkweE1TNHdNeTB1TURndE1URXVOekEzTFM0d09DMHhNaTQ0T0RrdExqVTVPQzB1TXpjdExqRTFNaTB5TGpjMU9DMHlMalF5T1MweUxqYzFPQzB5TGpReU9WWXlOUzQwTnpkek1pNHdPRE10TWk0eE5TQXlMamMxT0MweUxqUXpZekV1TVRJMkxTNDBOemdnTVM0NE5UZ3RMalV4T0NBeE1pNDRPUzB1TlRrM2JEVXVNalV6TFM0d09Ib2lJSE4wY205clpUMGlJekF3TUNJZ2MzUnliMnRsTFhkcFpIUm9QU0l4TUNJZ2IzQmhZMmwwZVQwaUxqSTFJaTgrUEhCaGRHZ2daRDBpVFRNd0xqUTJPU0EyTlM0MU1EZHpMVEl4TGpVekxTNHhOaTB5TWk0M01TMHVOamMzWXkwdU5qYzNMUzR5T0MweUxqYzJMVEl1TkRNdE1pNDNOaTB5TGpRelZqSTFMalEzT0hNeUxqQTRNeTB5TGpFMU1TQXlMamMxT0MweUxqUXpZekV1TVRJM0xTNDBOemdnTWpJdU56RXlMUzQyTnpjZ01qSXVOekV5TFM0Mk56ZDZJaUJtYVd4c1BTSWpabVptSWk4K1BIQmhkR2dnWkQwaWJUVXpMall5T0NBeU1pNHpOeUEwTGpreU15NHdPR014TVM0d016RXVNRGdnTVRFdU56WXpMakV5SURFeUxqZzVMalU1T0M0Mk56UXVNamM1SURJdU56VTNJREl1TkRNZ01pNDNOVGNnTWk0ME0zWXpOaTQ1TWpOekxUSXVNRGd6SURJdU1UVXRNaTQzTlRnZ01pNDBNamxqTFRFdU1UZ3lMalV4T0MweExqZzFPQzQxTVRndE1USXVPRGc1TGpVNU9Hd3ROQzQ1TWpNdU1EaDZJaUJ6ZEhKdmEyVTlJaU13TURBaUlITjBjbTlyWlMxM2FXUjBhRDBpTVRBaUlHOXdZV05wZEhrOUlpNHlOU0l2UGp4d1lYUm9JR1E5SWswME9DNDRPVFVnTWpJdU16ZHpNakV1TlRnMUxqSWdNakl1TnpFdU5qYzRZeTQyTnpZdU1qYzVJREl1TnpVNUlESXVORE1nTWk0M05Ua2dNaTQwTTNZek5pNDVNak56TFRJdU1EZ3pJREl1TVRVdE1pNDNOVGdnTWk0ME1qbGpMVEV1TVRneUxqVXhPQzB5TWk0M01URXVOamMzTFRJeUxqY3hNUzQyTnpkNklpQm1hV3hzUFNJalptWm1JaTgrUEhCaGRHZ2daRDBpYlRJNUxqSTNPQ0ExTGpBd05TQXhNQzQ0TXpJdU1EUmpNVEF1TlRFMkxqQTRJREV3TGpnek5DNHhNaUF4TVM0MU1URXVOVGsySURJdU5ETWdNUzQ0TnpJZ01pNHpPU0EwTGprMExTNHhOVGtnTmk0Mk5USXRMamMxTnk0MU1UZ3RNUzR4TVRVdU5UVTNMVFF1TXpRdU5UVTNhQzB6TGpVd05uWTJNaTR4Tnpab015NDBOalZqTXk0NU5ETWdNQ0EwTGprdU16RTRJRFV1T0RFMUlERXVPVFV4SURFdU1ETTJJREV1T0RNekxqVXhPQ0F6TGprME5DMHhMakkzTlNBMUxqSTFPQzB1TmpjM0xqVXhPQzB1T1RrMUxqVXhPQzB4TVM0MU1TNDFPVGhzTFRFd0xqZ3pOQzR3T0MweExqRXhOaTB1TlRVNFl5MHhMakUxTlMwdU5qTTRMVEl1TVRrdE1pNHhOUzB5TGpFNUxUTXVNemcySURBdExqZzNOUzQ1T1RVdE1pNDJOamdnTVM0M09USXRNeTR5TmpVdU5UazNMUzQwTnpnZ01TNHhNVFV0TGpVeE9DQTBMak0wTWkwdU5UazRiRE11TmpZMExTNHdPRll4TWk0NE9Xd3RNeTQyTmpRdExqQTRZeTB6TGpJeU55MHVNRGd0TXk0M05EVXRMakV4T1MwMExqTTBNaTB1TlRrM0xTNDNPVGN0TGpVMU9DMHhMamM1TWkweUxqTTFMVEV1TnpreUxUTXVNalkySURBdE1TNHlNelV1T1RrMUxUSXVOemc0SURJdU1Ua3RNeTR6T0RaNklpQnpkSEp2YTJVOUlpTXdNREFpSUhOMGNtOXJaUzEzYVdSMGFEMGlNVEFpSUc5d1lXTnBkSGs5SWk0eU5TSXZQanh3WVhSb0lHUTlJbTB5T1M0eU56Z2dOUzR3TURVZ01UQXVPRE15TGpBMFl6RXdMalV4Tmk0d09DQXhNQzQ0TXpRdU1USWdNVEV1TlRFeExqVTVOaUF5TGpReklERXVPRGN5SURJdU16a2dOQzQ1TkMwdU1UVTVJRFl1TmpVeUxTNDNOVGN1TlRFNExURXVNVEUxTGpVMU55MDBMak0wTGpVMU4yZ3RNeTQxTURaMk5qSXVNVGMyYURNdU5EWTFZek11T1RReklEQWdOQzQ1TGpNeE9DQTFMamd4TlNBeExqazFNU0F4TGpBek5pQXhMamd6TXk0MU1UZ2dNeTQ1TkRRdE1TNHlOelVnTlM0eU5UZ3RMalkzTnk0MU1UZ3RMams1TlM0MU1UZ3RNVEV1TlRFdU5UazRiQzB4TUM0NE16UXVNRGd0TVM0eE1UWXRMalUxT0dNdE1TNHhOVFV0TGpZek9DMHlMakU1TFRJdU1UVXRNaTR4T1MwekxqTTROaUF3TFM0NE56VXVPVGsxTFRJdU5qWTRJREV1TnpreUxUTXVNalkxTGpVNU55MHVORGM0SURFdU1URTFMUzQxTVRnZ05DNHpOREl0TGpVNU9Hd3pMalkyTkMwdU1EaFdNVEl1T0Rsc0xUTXVOalkwTFM0d09HTXRNeTR5TWpjdExqQTRMVE11TnpRMUxTNHhNVGt0TkM0ek5ESXRMalU1TnkwdU56azNMUzQxTlRndE1TNDNPVEl0TWk0ek5TMHhMamM1TWkwekxqSTJOaUF3TFRFdU1qTTFMams1TlMweUxqYzRPQ0F5TGpFNUxUTXVNemcyZWlJZ1ptbHNiRDBpSTJabVppSXZQand2YzNablBnPT0iLAogICAgICBjb2xvcjogIjNOUzQxTXpVaUlHaGxhV2RvZEQwaU56RXVORGszSWlCMmFXVjNRbTk0UFNJd0lEQWdOelV1TlRNMUlEY3hMalE1TnlJK1BIQmhkR2dnWkQwaVRUSXhMak13TnlBeU1TNDBOakpETWpFdU16QTNJREV5TGpNM0lESTRMalkzTnlBMUlETTNMamMyT0NBMWN6RTJMalEyTVNBM0xqTTNJREUyTGpRMk1TQXhOaTQwTmpJdE55NHpOeUF4Tmk0ME5qRXRNVFl1TkRZeElERTJMalEyTVMweE5pNDBOakV0Tnk0ek55MHhOaTQwTmpFdE1UWXVORFl4ZWlJZ2MzUnliMnRsUFNJak1EQXdJaUJ2Y0dGamFYUjVQU0l1TWpVaUlITjBjbTlyWlMxM2FXUjBhRDBpTVRBaUx6NDhjR0YwYUNCa1BTSk5OU0ExTUM0d016WmpNQzA1TGpBNU1TQTNMak0zTFRFMkxqUTJNU0F4Tmk0ME5qSXRNVFl1TkRZeGN6RTJMalEyTVNBM0xqTTNJREUyTGpRMk1TQXhOaTQwTmpGak1DQTVMakE1TWkwM0xqTTNJREUyTGpRMk1pMHhOaTQwTmpFZ01UWXVORFl5UXpFeUxqTTNJRFkyTGpRNU9DQTFJRFU1TGpFeU9DQTFJRFV3TGpBek5ub2lJSE4wY205clpUMGlJekF3TUNJZ2IzQmhZMmwwZVQwaUxqSTFJaUJ6ZEhKdmEyVXRkMmxrZEdnOUlqRXdJaTgrUEhCaGRHZ2daRDBpVFRNM0xqWXhNeUExTUM0d016WmpNQzA1TGpBNU1TQTNMak0zTFRFMkxqUTJNU0F4Tmk0ME5qRXRNVFl1TkRZeElEa3VNRGt5SURBZ01UWXVORFl5SURjdU16Y2dNVFl1TkRZeUlERTJMalEyTVNBd0lEa3VNRGt5TFRjdU16Y2dNVFl1TkRZeUxURTJMalEyTWlBeE5pNDBOakp6TFRFMkxqUTJNUzAzTGpNM0xURTJMalEyTVMweE5pNDBOako2SWlCemRISnZhMlU5SWlNd01EQWlJRzl3WVdOcGRIazlJaTR5TlNJZ2MzUnliMnRsTFhkcFpIUm9QU0l4TUNJdlBqeHdZWFJvSUdROUlrMHlNUzR6TURjZ01qRXVORFl5UXpJeExqTXdOeUF4TWk0ek55QXlPQzQyTnpjZ05TQXpOeTQzTmpnZ05YTXhOaTQwTmpFZ055NHpOeUF4Tmk0ME5qRWdNVFl1TkRZeUxUY3VNemNnTVRZdU5EWXhMVEUyTGpRMk1TQXhOaTQwTmpFdE1UWXVORFl4TFRjdU16Y3RNVFl1TkRZeExURTJMalEyTVNJZ1ptbHNiRDBpSXpCbU1DSXZQanh3WVhSb0lHUTlJazAxSURVd0xqQXpObU13TFRrdU1Ea3hJRGN1TXpjdE1UWXVORFl4SURFMkxqUTJNaTB4Tmk0ME5qRnpNVFl1TkRZeElEY3VNemNnTVRZdU5EWXhJREUyTGpRMk1XTXdJRGt1TURreUxUY3VNemNnTVRZdU5EWXlMVEUyTGpRMk1TQXhOaTQwTmpKRE1USXVNemNnTmpZdU5EazRJRFVnTlRrdU1USTRJRFVnTlRBdU1ETTJJaUJtYVd4c1BTSnlaV1FpTHo0OGNHRjBhQ0JrUFNKTk16Y3VOakV6SURVd0xqQXpObU13TFRrdU1Ea3hJRGN1TXpjdE1UWXVORFl4SURFMkxqUTJNUzB4Tmk0ME5qRWdPUzR3T1RJZ01DQXhOaTQwTmpJZ055NHpOeUF4Tmk0ME5qSWdNVFl1TkRZeElEQWdPUzR3T1RJdE55NHpOeUF4Tmk0ME5qSXRNVFl1TkRZeUlERTJMalEyTW5NdE1UWXVORFl4TFRjdU16Y3RNVFl1TkRZeExURTJMalEyTWlJZ1ptbHNiRDBpSXpBd1ppSXZQand2YzNablBnPT0iLAogICAgICBlZmZlY3Q6ICIxTnk0ME5ESWlJR2hsYVdkb2REMGlOekF1TkRVaUlIWnBaWGRDYjNnOUlqQWdNQ0ExTnk0ME5ESWdOekF1TkRVaVBqeHdZWFJvSUdROUlrMDFJRFE1TGpBME4yTXRNeTQ1T0RndE9DNHhNVGN0TXk0NU9UWXRNVGd1TWpRekxqRTFNeTB5Tmk0ME1VTTVMamcwSURFekxqQTJNaUF4Tnk0M015QTRMamd4T0NBeU1DNDVJRGN1TkRNNFlUTXhMalFnTXpFdU5DQXdJREFnTVNBMkxqQTNOaTB5TGpBNE0yd3lMakV5TFM0ME5UZGpNUzQxTlRndExqTXlJRE11TVRFdU5qUTJJRE11TkRRM0lESXVNVGczTGpNMElERXVOVFExTFM0Mk5URWdNeTR3TmpZdE1pNHlNVFlnTXk0ME1ESnNMVEl1TURZekxqUTBOV0V5TlM0MElESTFMalFnTUNBd0lEQXROQzQ1TmlBeExqY3hObU10TWk0d09ETXVPVEF5TFRndU9UYzBJRFF1TXpreUxURXlMamswT1NBeE1pNDFNVFV0TXk0d01UY2dOUzQ1TXpNdE15NDVNVGNnTVRVdU16WTJMamd6TWlBeU15NHhOU0EwTGpNd015QTNMalE1T0NBeE15NHhNVElnTVRJdU1EazFJREl4TGpRMk9DQXhNUzR6TWpFZ055NDVNRE10TGpVMk9DQXhOUzR4TlRVdE5TNDRNamdnTVRjdU5qazRMVEV5TGpjNU5TQXlMalU0TVMwMkxqVTFNaTQ0TmpZdE1UTXVNalk1TFRFdU9UWTNMVEUzTGpBMU1pMHpMalF4TXkwMExqWTJMVGN1TmpZdE5pNHdPVFF0T1M0ek1qZ3ROaTQwT1RVdExqSTBPUzB1TURjMExUWXVNRGcxTFRFdU9ESTNMVEV4TGpJMExqYzFOQzB5TGpJeUlERXVNRFkwTFRVdU1Ea2dNeTQwTlRZdE5pNDJNamdnTnk0d05TMHhMalkySURNdU56RXlMVEV1TWpNZ09DNDBPRFFnTVM0d01pQXhNUzQyTlRVZ01pNHlOak1nTXk0ek9Ua2dOaTQxTXpJZ05TNHpNak1nTVRBdU1qQXpJRFF1TmpjZ015NDJOVFV0TGpVM05TQTJMakV5TnkwekxqSTVOQ0EyTGpjeE15MDFMalk0TXk0Mk9Ea3RNaTQxTmpndExqTTJPQzAwTGpjek9TMHhMakU1TXkwMUxqVXlMVEV1TkRBeExURXVNemd6TFRJdU5qRXhMVEV1TkRBMkxUSXVOall6TFRFdU5ERmhOU0ExSURBZ01DQXdMVEV1TURJMkxqQTFOR010TGpZMU5DNHlOQzB4TGpVNE1pNDNOalF0TVM0NE5UUWdNUzR6TVRZdExqQTBPQzR3T1MwdU1UY3VNelF1TURZMExqazJNeTQxTmpNZ01TNDBOemN0TGpFNU55QXpMakV6TFRFdU5qazBJRE11TmpnMUxURXVORGt1TlRVNExUTXVNVFkzTFM0eE9USXRNeTQzTXpNdE1TNDJOek10TGprek1TMHlMalExTFM0ME1UWXROQzR6TmpndU1UZ3ROUzQxTkRZZ01TNDFOVGd0TXk0d05qWWdOUzR4TnpZdE5DNHhOellnTlM0MU9EVXROQzR5T1RRdU1UZzNMUzR3TlRjdU16ZzFMUzR3T1RFdU5UZ3RMakV3T0M0ek9UZ3RMakEySURFdU1TMHVNVFUxSURJdU1EVXlMUzR4TVRnZ01pNHhOemd1TURJM0lEUXVOallnTVM0eE5qVWdOaTQxTmpNZ015NHdORFlnTWk0eU5EWWdNaTR4TWlBMExqQXdOaUEyTGpNNElESXVOelU0SURFeExqQXhNUzB4TGpJeE55QTBMamsxTnkwMUxqZzVOU0E1TGpBMU5pMHhNUzR6TlRNZ09TNDVNVFF0TlM0NE55QXhMakEwTnkweE1pNDBPREl0TVM0NE5EY3RNVFV1T1RjekxUY3VNRGswTFRNdU16WTFMVFF1TnpJNExUUXVNREE1TFRFeExqWTBOeTB4TGpVME9DMHhOeTR4TXpZZ01pNDNMVFl1TXpJZ055NDROVGt0T1M0eE9DQTVMak0zTXkwNUxqa3dOeUEzTGpJM09TMHpMall6TlNBeE5TNHdOVGt0TVM0eU16VWdNVFV1TXpnMkxURXVNVE0wSURJdU1Ea3pMalE1TkNBM0xqa3hNeUF5TGpRME15QXhNaTQwTXpjZ09DNDJNalVnTXk0ME56Y2dOQzQyTlNBMkxqSTVOeUF4TXk0ek16Y2dNaTQzTVRRZ01qSXVORE10TXk0eU56TWdPQzQ1TmpJdE1USXVOVGtnTVRVdU56Y3RNakl1TmpNNElERTJMalE1TXkwdU56ZzRMakEzTkMweExqVTROUzR4TVRVdE1pNHpPQzR4TVRVdE9TNDNOU0F3TFRFNUxqWXlOeTAxTGpZeUxUSTBMalU0TFRFMExqSTFJREFnTUMwdU9ESXhMVEV1TkRFNExURXVNVGd6TFRJdU1UVXplaUlnYzNSeWIydGxQU0lqTURBd0lpQnZjR0ZqYVhSNVBTSXVNalVpSUhOMGNtOXJaUzEzYVdSMGFEMGlNVEFpTHo0OGNHRjBhQ0JtYVd4c1BTSWpabVptSWlCa1BTSk5OaTR4T0RJZ05URXVNakF4WXkwMUxqRXpOQzA0TGpReUxUVXVOVFV6TFRFNUxqWTFOeTB4TGpBekxUSTRMalUyTlVNNUxqZzBJREV6TGpBMk1pQXhOeTQzTXlBNExqZ3hPQ0F5TUM0NUlEY3VORE00WVRNeExqUWdNekV1TkNBd0lEQWdNU0EyTGpBM05pMHlMakE0TTJ3eUxqRXlMUzQwTlRkak1TNDFOVGd0TGpNeUlETXVNVEV1TmpRMklETXVORFEzSURJdU1UZzNMak0wSURFdU5UUTFMUzQyTlRFZ015NHdOall0TWk0eU1UWWdNeTQwTURKc0xUSXVNRFl6TGpRME5XRXlOUzQwSURJMUxqUWdNQ0F3SURBdE5DNDVOaUF4TGpjeE5tTXRNaTR3T0RNdU9UQXlMVGd1T1RjMElEUXVNemt5TFRFeUxqazBPU0F4TWk0MU1UVXRNeTR3TVRjZ05TNDVNek10TXk0NU1UY2dNVFV1TXpZMkxqZ3pNaUF5TXk0eE5TQTBMak13TXlBM0xqUTVPQ0F4TXk0eE1USWdNVEl1TURrMUlESXhMalEyT0NBeE1TNHpNakVnTnk0NU1ETXRMalUyT0NBeE5TNHhOVFV0TlM0NE1qZ2dNVGN1TmprNExURXlMamM1TlNBeUxqVTRNUzAyTGpVMU1pNDROall0TVRNdU1qWTVMVEV1T1RZM0xURTNMakExTWkwekxqUXhNeTAwTGpZMkxUY3VOall0Tmk0d09UUXRPUzR6TWpndE5pNDBPVFV0TGpJME9TMHVNRGMwTFRZdU1EZzFMVEV1T0RJM0xURXhMakkwTGpjMU5DMHlMakl5SURFdU1EWTBMVFV1TURrZ015NDBOVFl0Tmk0Mk1qZ2dOeTR3TlMweExqWTJJRE11TnpFeUxURXVNak1nT0M0ME9EUWdNUzR3TWlBeE1TNDJOVFVnTWk0eU5qTWdNeTR6T1RrZ05pNDFNeklnTlM0ek1qTWdNVEF1TWpBeklEUXVOamNnTXk0Mk5UVXRMalUzTlNBMkxqRXlOeTB6TGpJNU5DQTJMamN4TXkwMUxqWTRNeTQyT0RrdE1pNDFOamd0TGpNMk9DMDBMamN6T1MweExqRTVNeTAxTGpVeUxURXVOREF4TFRFdU16Z3pMVEl1TmpFeExURXVOREEyTFRJdU5qWXpMVEV1TkRGaE5TQTFJREFnTUNBd0xURXVNREkyTGpBMU5HTXRMalkxTkM0eU5DMHhMalU0TWk0M05qUXRNUzQ0TlRRZ01TNHpNVFl0TGpBME9DNHdPUzB1TVRjdU16UXVNRFkwTGprMk15NDFOak1nTVM0ME56Y3RMakU1TnlBekxqRXpMVEV1TmprMElETXVOamcxTFRFdU5Ea3VOVFU0TFRNdU1UWTNMUzR4T1RJdE15NDNNek10TVM0Mk56TXRMamt6TVMweUxqUTFMUzQwTVRZdE5DNHpOamd1TVRndE5TNDFORFlnTVM0MU5UZ3RNeTR3TmpZZ05TNHhOell0TkM0eE56WWdOUzQxT0RVdE5DNHlPVFF1TVRnM0xTNHdOVGN1TXpnMUxTNHdPVEV1TlRndExqRXdPQzR6T1RndExqQTJJREV1TVMwdU1UVTFJREl1TURVeUxTNHhNVGdnTWk0eE56Z3VNREkzSURRdU5qWWdNUzR4TmpVZ05pNDFOak1nTXk0d05EWWdNaTR5TkRZZ01pNHhNaUEwTGpBd05pQTJMak00SURJdU56VTRJREV4TGpBeE1TMHhMakl4TnlBMExqazFOeTAxTGpnNU5TQTVMakExTmkweE1TNHpOVE1nT1M0NU1UUXROUzQ0TnlBeExqQTBOeTB4TWk0ME9ESXRNUzQ0TkRjdE1UVXVPVGN6TFRjdU1EazBMVE11TXpZMUxUUXVOekk0TFRRdU1EQTVMVEV4TGpZME55MHhMalUwT0MweE55NHhNellnTWk0M0xUWXVNeklnTnk0NE5Ua3RPUzR4T0NBNUxqTTNNeTA1TGprd055QTNMakkzT1MwekxqWXpOU0F4TlM0d05Ua3RNUzR5TXpVZ01UVXVNemcyTFRFdU1UTTBJREl1TURrekxqUTVOQ0EzTGpreE15QXlMalEwTXlBeE1pNDBNemNnT0M0Mk1qVWdNeTQwTnpjZ05DNDJOU0EyTGpJNU55QXhNeTR6TXpjZ01pNDNNVFFnTWpJdU5ETXRNeTR5TnpNZ09DNDVOakl0TVRJdU5Ua2dNVFV1TnpjdE1qSXVOak00SURFMkxqUTVNeTB1TnpnNExqQTNOQzB4TGpVNE5TNHhNVFV0TWk0ek9DNHhNVFV0T1M0M05TQXdMVEU1TGpZeU55MDFMall5TFRJMExqVTRMVEUwTGpJMUlpOCtQQzl6ZG1jKyIKICAgIH1bbmFtZV07CiAgfTsKCiAgY29uc3QgQ2FzdCA9IFNjcmF0Y2guQ2FzdDsKICBjb25zdCB2bSA9IFNjcmF0Y2gudm07CiAgY29uc3QgcnVudGltZSA9IHZtLnJ1bnRpbWU7CiAgY29uc3QgcmVuZGVyID0gdm0ucmVuZGVyZXI7CgogIGNvbnN0IGRlZmF1bHRGb250cyA9IFsKICAgICJTYW5zIFNlcmlmIiwgIlNlcmlmIiwgIkhhbmR3cml0aW5nIiwKICAgICJNYXJrZXIiLCAiQ3VybHkiLCAiUGl4ZWwiLCAiU2NyYXRjaCIKICBdOwogIGNvbnN0IHRyYW5zbGF0ZWRJbnB1dHMgPSB7CiAgICBwb3B1cDogU2NyYXRjaC50cmFuc2xhdGUoImRlZmF1bHQtcG9wdXAiKSwKICAgIGxhYmVsOiBTY3JhdGNoLnRyYW5zbGF0ZSgibmV3LWxhYmVsIiksCiAgICBpbnB1dDogU2NyYXRjaC50cmFuc2xhdGUoIm5ldy1pbnB1dCIpLAogICAgYnRuUm93OiBTY3JhdGNoLnRyYW5zbGF0ZSgiZGVmYXVsdC1idXR0b24tcm93IiksCiAgICBidXR0b246IFNjcmF0Y2gudHJhbnNsYXRlKCJzdWJtaXQtYnV0dG9uIikKICB9OwoKICBjb25zdCB2YWxpZElucHV0cyA9IFsKICAgIGNyZWF0ZU1lbnVJdGVtKCJ0ZXh0IiwgInRleHQiKSwKICAgIGNyZWF0ZU1lbnVJdGVtKCJtdWx0aS1saW5lIHRleHQiLCAidGV4dGFyZWEiKSwKICAgIGNyZWF0ZU1lbnVJdGVtKCJwYXNzd29yZCIsICJwYXNzd29yZCIpLAogICAgY3JlYXRlTWVudUl0ZW0oIm51bWJlciIsICJudW1iZXIiKSwKICAgIGNyZWF0ZU1lbnVJdGVtKCJjb2xvciIsICJjb2xvciIpLAogICAgY3JlYXRlTWVudUl0ZW0oImRhdGUiLCAiZGF0ZSIpLAogICAgY3JlYXRlTWVudUl0ZW0oImRyb3Bkb3duIiwgInNlbGVjdCIpLAogICAgY3JlYXRlTWVudUl0ZW0oIm11bHRpLXNlbGVjdCBkcm9wZG93biIsICJtdWx0aVNlbGVjdCIpLAogICAgY3JlYXRlTWVudUl0ZW0oImhvcml6b250YWwgc2xpZGVyIiwgInJhbmdlSG9yeiIpLAogICAgY3JlYXRlTWVudUl0ZW0oInZlcnRpY2FsIHNsaWRlciIsICJyYW5nZVZlcnQiKQogIF07CiAgY29uc3QgdmFsaWRCb3JkZXJzID0gWwogICAgY3JlYXRlTWVudUl0ZW0oIm5vbmUiLCAibm9uZSIpLAogICAgY3JlYXRlTWVudUl0ZW0oInNvbGlkIiwgInNvbGlkIiksCiAgICBjcmVhdGVNZW51SXRlbSgiZG90dGVkIiwgImRvdHRlZCIpLAogICAgY3JlYXRlTWVudUl0ZW0oImRhc2hlZCIsICJkYXNoZWQiKSwKICAgIGNyZWF0ZU1lbnVJdGVtKCJkb3VibGUiLCAiZG91YmxlIiksCiAgICBjcmVhdGVNZW51SXRlbSgiZ3Jvb3ZlIiwgImdyb292ZSIpLAogICAgY3JlYXRlTWVudUl0ZW0oInJpZGdlIiwgInJpZGdlIiksCiAgICBjcmVhdGVNZW51SXRlbSgiaW5zZXQiLCAiaW5zZXQiKSwKICAgIGNyZWF0ZU1lbnVJdGVtKCJvdXRzZXQiLCAib3V0c2V0IikKICBdOwogIGNvbnN0IHZhbGlkRWZmZWN0cyA9IFsKICAgIGNyZWF0ZU1lbnVJdGVtKCJibHVyIiwgImJsdXIiKSwKICAgIGNyZWF0ZU1lbnVJdGVtKCJicmlnaHRuZXNzIiwgImJyaWdodG5lc3MiKSwKICAgIGNyZWF0ZU1lbnVJdGVtKCJvcGFjaXR5IiwgIm9wYWNpdHkiKSwKICAgIGNyZWF0ZU1lbnVJdGVtKCJzYXR1cmF0aW9uIiwgInNhdHVyYXRlIiksCiAgICBjcmVhdGVNZW51SXRlbSgiaHVlIiwgImh1ZS1yb3RhdGUiKSwKICAgIGNyZWF0ZU1lbnVJdGVtKCJpbnZlcnQiLCAiaW52ZXJ0IiksCiAgICBjcmVhdGVNZW51SXRlbSgic2VwaWEiLCAic2VwaWEiKSwKICAgIGNyZWF0ZU1lbnVJdGVtKCJjb250cmFzdCIsICJjb250cmFzdCIpLAogICAgY3JlYXRlTWVudUl0ZW0oImRpcmVjdGlvbiIsICJyb3RhdGUiKSwKICAgIGNyZWF0ZU1lbnVJdGVtKCJzY2FsZSB4IiwgInNjYWxlWCIpLAogICAgY3JlYXRlTWVudUl0ZW0oInNjYWxlIHkiLCAic2NhbGVZIiksCiAgICBjcmVhdGVNZW51SXRlbSgic2tldyB4IiwgInNrZXdYIiksCiAgICBjcmVhdGVNZW51SXRlbSgic2tldyB5IiwgInNrZXdZIikKICBdOwoKICAvLyBpbnRlcm5hbHMKICBjb25zdCBzdHlsZVN0b3JhZ2UgPSB7CiAgICBwb3B1cHM6IE9iamVjdC5jcmVhdGUobnVsbCksCiAgICBsYWJlbHM6IE9iamVjdC5jcmVhdGUobnVsbCksCiAgICBpbnB1dHM6IE9iamVjdC5jcmVhdGUobnVsbCksCiAgICBidXR0b25zOiBPYmplY3QuY3JlYXRlKG51bGwpCiAgfQogIGNvbnN0IGVsZW1lbnRTdG9yYWdlID0gewogICAgcG9wdXBzOiBPYmplY3QuY3JlYXRlKG51bGwpLAogICAgbGFiZWxzOiBPYmplY3QuY3JlYXRlKG51bGwpLAogICAgaW5wdXRzOiBPYmplY3QuY3JlYXRlKG51bGwpLAogICAgYnV0dG9uUm93czogT2JqZWN0LmNyZWF0ZShudWxsKSwKICAgIGJ1dHRvbnM6IE9iamVjdC5jcmVhdGUobnVsbCkKICB9CgogIGNvbnN0IHhtbEVzY2FwZSA9IGZ1bmN0aW9uICh1bnNhZmUpIHsKICAgIHJldHVybiBDYXN0LnRvU3RyaW5nKHVuc2FmZSkucmVwbGFjZShuZXcgUmVnRXhwKGBbPD4mJyJdYCwgImciKSwgYyA9PiB7CiAgICAgIHN3aXRjaCAoYykgewogICAgICAgIGNhc2UgIjwiOiByZXR1cm4gIiZsdDsiOwogICAgICAgIGNhc2UgIj4iOiByZXR1cm4gIiZndDsiOwogICAgICAgIGNhc2UgIiYiOiByZXR1cm4gIiZhbXA7IjsKICAgICAgICBjYXNlICInIjogcmV0dXJuICImYXBvczsiOwogICAgICAgIGNhc2UgIlwiIjogcmV0dXJuICImcXVvdDsiOwogICAgICB9CiAgICB9KTsKICB9OwoKICBjb25zdCBjcmVhdGVMYWJlbCA9IChpZCwgdGV4dCkgPT4gewogICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgZWxlbWVudC5zdHlsZS53aWR0aCA9ICJtYXgtY29udGVudCI7CiAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInByZSIpOwogICAgbGFiZWwuaWQgPSB4bWxFc2NhcGUoaWQpOwogICAgbGFiZWwuaW5uZXJIVE1MID0geG1sRXNjYXBlKHRleHQpLnJlcGxhY2UoL1xuL2csICI8YnI+Iik7CiAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgY29tcGlsZVN0eWxlcyhpZCwgImxhYmVsIikpOwoKICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWwpOwogICAgcmV0dXJuIHsKICAgICAgdHlwZTogImxhYmVsIiwKICAgICAgZGF0YTogeyBpZCwgdGV4dCB9LAogICAgICBET01lbGVtZW50OiBlbGVtZW50LAogICAgfTsKICB9OwoKICBjb25zdCBjcmVhdGVJbnB1dCA9IChpZCwgdHlwZSwgb3B0aW9ucykgPT4gewogICAgY29uc3QgaW5wdXRIb2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGlucHV0SG9sZGVyLmlkID0geG1sRXNjYXBlKGlkKTsKICAgIGlucHV0SG9sZGVyLnN0eWxlLndpZHRoID0gIm1heC1jb250ZW50IjsKICAgIGxldCBlbGVtZW50OwoKICAgIGNvbnN0IHNldEVsZW1lbnRWYWx1ZSA9ICh2YWx1ZSkgPT4gewogICAgICBpbnB1dEhvbGRlci5zZXRBdHRyaWJ1dGUoInJldHVyblZhbHVlIiwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTsKICAgIH07CgogICAgaWYgKHR5cGUgPT09ICJzZWxlY3QiKSB7CiAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IG9wdGlvbnMuc2VsZWN0b3JzID8/IFsibm8gb3B0aW9ucyBjcmVhdGVkIl07CiAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTsKICAgICAgc2VsZWN0b3JzLmZvckVhY2goKG9wdGlvbikgPT4gewogICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKICAgICAgICBvcHQudmFsdWUgPSBvcHRpb247IG9wdC50ZXh0ID0gb3B0aW9uOwogICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0KTsKICAgICAgfSk7CgogICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIiwgKCkgPT4geyBvcHRpb25zLm1lbnVPcGVuZWQgPSB0cnVlIH0pOwogICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoImJsdXIiLCAoKSA9PiB7IG9wdGlvbnMubWVudU9wZW5lZCA9IGZhbHNlIH0pOwogICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIChlKSA9PiBzZXRFbGVtZW50VmFsdWUoW2UudGFyZ2V0LnZhbHVlXSkpOwogICAgICBzZXRFbGVtZW50VmFsdWUoW3NlbGVjdG9yc1swXV0pOwogICAgfSBlbHNlIGlmICh0eXBlID09PSAibXVsdGlTZWxlY3QiKSB7CiAgICAgIGNvbnN0IGNyZWF0ZU9wdGlvbiA9ICh0ZXh0LCBpbmRleCkgPT4gewogICAgICAgIGNvbnN0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgImRpc3BsYXk6IGZsZXg7IHBhZGRpbmc6IDVweDsgY3Vyc29yOiBwb2ludGVyIik7CgogICAgICAgIGNvbnN0IGNoZWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgICBjaGVjay50eXBlID0gImNoZWNrYm94IjsKICAgICAgICBjaGVjay5jaGVja2VkID0gaW5kZXggPT09IDAgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwcmUiKTsKICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSB4bWxFc2NhcGUodGV4dCkucmVwbGFjZSgvXG4vZywgIjxicj4iKTsKICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgIm1hcmdpbjowIDAgMCA1cHg7IGZvbnQtZmFtaWx5OiBpbmhlcml0OyIpOwoKICAgICAgICBob2xkZXIuYXBwZW5kKGNoZWNrLCBsYWJlbCk7CiAgICAgICAgcmV0dXJuIGhvbGRlcjsKICAgICAgfTsKCiAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IG9wdGlvbnMuc2VsZWN0b3JzID8/IFsibm8gb3B0aW9ucyBjcmVhdGVkIl07CiAgICAgIGxldCByZXNwb25zZSA9IFtzZWxlY3RvcnNbMF1dOwogICAgICBvcHRpb25zLm1lbnVPcGVuZWQgPSB0cnVlOwoKICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICBjb25zdCBvcHRpb25zRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIG9wdGlvbnNEaXYuc2V0QXR0cmlidXRlKCJzdHlsZSIsICJvdmVyZmxvdy15OiBzY3JvbGw7IGhlaWdodDogY2FsYygxMDAlIC0gMXB4KTsiKTsKICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb25zRGl2KTsKCiAgICAgIHNldEVsZW1lbnRWYWx1ZShyZXNwb25zZSk7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0b3JzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3Qgb3B0aW9uID0gY3JlYXRlT3B0aW9uKHNlbGVjdG9yc1tpXSwgaSk7CiAgICAgICAgb3B0aW9uc0Rpdi5hcHBlbmRDaGlsZChvcHRpb24pOwoKICAgICAgICBvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoZSkgPT4gewogICAgICAgICAgaWYgKGUudGFyZ2V0LnRhZ05hbWUgPT09ICJQUkUiKSBlLnRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoImlucHV0IikuY2xpY2soKTsKICAgICAgICAgIGVsc2UgaWYgKGUudGFyZ2V0LnRhZ05hbWUgPT09ICJJTlBVVCIpIHsKICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQpIHJlc3BvbnNlLnB1c2goc2VsZWN0b3JzW2ldKTsKICAgICAgICAgICAgZWxzZSByZXNwb25zZS5zcGxpY2UocmVzcG9uc2UuaW5kZXhPZihzZWxlY3RvcnNbaV0pLCAxKTsKICAgICAgICAgICAgc2V0RWxlbWVudFZhbHVlKHJlc3BvbnNlKTsKICAgICAgICAgIH0KICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gInRleHRhcmVhIikgewogICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGV4dGFyZWEiKTsKICAgICAgZWxlbWVudC52YWx1ZSA9IG9wdGlvbnMuZGVmYXVsdFZhbHVlID8/ICIiOwogICAgfSBlbHNlIGlmICh0eXBlLnN0YXJ0c1dpdGgoInJhbmdlIikpIHsKICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoKICAgICAgY29uc3QgY291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICBjb3VudGVyLnNldEF0dHJpYnV0ZSgic3R5bGUiLCAidGV4dC1hbGlnbjogY2VudGVyIik7CiAgICAgIGNvdW50ZXIuaW5uZXJUZXh0ID0gb3B0aW9ucy5kZWZhdWx0VmFsdWUgPz8gMDsKCiAgICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgcmFuZ2Uuc2V0QXR0cmlidXRlKCJzdHlsZSIsICJkaXNwbGF5OiBibG9jazsgbWFyZ2luOiBhdXRvOyIpOwogICAgICByYW5nZS50eXBlID0gInJhbmdlIjsKICAgICAgaWYgKHR5cGUuZW5kc1dpdGgoIlZlcnQiKSkgcmFuZ2Uuc3R5bGUud3JpdGluZ01vZGUgPSAic2lkZXdheXMtbHIiOwoKICAgICAgcmFuZ2Uuc2V0QXR0cmlidXRlKCJtYXgiLCBvcHRpb25zLm1heFYgPz8gMTAwKTsKICAgICAgcmFuZ2Uuc2V0QXR0cmlidXRlKCJtaW4iLCBvcHRpb25zLm1pblYgPz8gMCk7CiAgICAgIHJhbmdlLnZhbHVlID0gb3B0aW9ucy5kZWZhdWx0VmFsdWUgPz8gMDsKICAgICAgcmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCAoZSkgPT4gewogICAgICAgIGNvbnN0IHZhbHVlID0gZS50YXJnZXQudmFsdWU7CiAgICAgICAgc2V0RWxlbWVudFZhbHVlKFt2YWx1ZV0pOwogICAgICAgIGNvdW50ZXIuaW5uZXJUZXh0ID0gdmFsdWU7CiAgICAgIH0pOwoKICAgICAgZWxlbWVudC5hcHBlbmQocmFuZ2UsIGNvdW50ZXIpOwogICAgICBzZXRFbGVtZW50VmFsdWUoW2NvdW50ZXIuaW5uZXJUZXh0XSk7CiAgICB9IGVsc2UgewogICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgZWxlbWVudC50eXBlID0gdHlwZTsKICAgICAgZWxlbWVudC52YWx1ZSA9IG9wdGlvbnMuZGVmYXVsdFZhbHVlID8/ICIiOwoKICAgICAgaWYgKHR5cGUgPT09ICJjb2xvciIpIHsKICAgICAgICBpbnB1dEhvbGRlci5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyB3aWR0aDogMTAwJTsiKTsKICAgICAgICBjb25zdCBjb2xvclN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgICBjb2xvclN0eWxlLnRleHRDb250ZW50ID0gYAogICAgICAgICAgaW5wdXRbdHlwZT0iY29sb3IiXSB7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgIH0KICAgICAgICAgIGlucHV0W3R5cGU9ImNvbG9yIl06Oi13ZWJraXQtY29sb3Itc3dhdGNoIHsKICAgICAgICAgICAgYm9yZGVyOiBibGFjayBzb2xpZCAxcHg7CiAgICAgICAgICAgIG1hcmdpbjogMXB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgICB9CiAgICAgICAgICBpbnB1dFt0eXBlPSJjb2xvciJdOjotbW96LWNvbG9yLXN3YXRjaCB7CiAgICAgICAgICAgIGJvcmRlcjogYmxhY2sgc29saWQgMXB4OwogICAgICAgICAgICBtYXJnaW46IDFweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgICAgfQogICAgICAgICAgaW5wdXRbdHlwZT0iY29sb3IiXTo6LXdlYmtpdC1jb2xvci1zd2F0Y2gtd3JhcHBlciB7CiAgICAgICAgICAgIHBhZGRpbmc6IDBweDsKICAgICAgICAgIH0KICAgICAgICBgOwogICAgICAgIGVsZW1lbnQuYXBwZW5kKGNvbG9yU3R5bGUpOwogICAgICB9CiAgICB9CgogICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgY29tcGlsZVN0eWxlcyhpZCwgImlucHV0IikpOwogICAgaW5wdXRIb2xkZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7CiAgICByZXR1cm4gewogICAgICB0eXBlOiAiaW5wdXQiLAogICAgICBkYXRhOiB7IGlkLCB0eXBlLCBvcHRpb25zIH0sCiAgICAgIERPTWVsZW1lbnQ6IGlucHV0SG9sZGVyCiAgICB9OwogIH07CgogIGNvbnN0IGNyZWF0ZUJ1dHRvblJvdyA9IChpZCkgPT4gewogICAgY29uc3QgYnV0dG9uUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBidXR0b25Sb3cuaWQgPSB4bWxFc2NhcGUoaWQpOwogICAgYnV0dG9uUm93LnN0eWxlLndpZHRoID0gIm1heC1jb250ZW50IjsKCiAgICByZXR1cm4gewogICAgICB0eXBlOiAiYnV0dG9uUm93IiwKICAgICAgZGF0YTogeyBpZCwgYnV0dG9uczogW10gfSwKICAgICAgRE9NZWxlbWVudDogYnV0dG9uUm93CiAgICB9OwogIH07CgogIGNvbnN0IGNyZWF0ZUJ1dHRvbiA9IChpZCwgdGV4dCkgPT4gewogICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgZWxlbWVudC5pZCA9IHhtbEVzY2FwZShpZCk7CiAgICBlbGVtZW50LmlubmVySFRNTCA9IHhtbEVzY2FwZSh0ZXh0KS5yZXBsYWNlKC9cbi9nLCAiPGJyPiIpOwogICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoInJldHVyblZhbHVlIiwgaWQpOwogICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgY29tcGlsZVN0eWxlcyhpZCwgImJ1dHRvbiIpKTsKCiAgICByZXR1cm4gewogICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgZGF0YTogeyBpZCwgdGV4dCB9LAogICAgICBET01lbGVtZW50OiBlbGVtZW50CiAgICB9OwogIH07CgogIGNvbnN0IGdlbkRlZmF1bHRTdHlsZXMgPSAoaWQsIHR5cGUpID0+IHsKICAgIGlmICh0eXBlLmVuZHNXaXRoKCJzIikpIHR5cGUgPSB0eXBlLnN1YnN0cmluZygwLCB0eXBlLmxlbmd0aCAtIDEpOwogICAgaWYgKHR5cGUgPT09ICJwb3B1cCIpIHsKICAgICAgc3R5bGVTdG9yYWdlLnBvcHVwc1tpZF0gPSB7CiAgICAgICAgU1BzdG9yYWdlOiB7fSwKICAgICAgICAiZGlzcGxheSI6ICJmbGV4IiwKICAgICAgICAiZmxleC1kaXJlY3Rpb24iOiAiY29sdW1uIiwKICAgICAgICAicG9zaXRpb24iOiAiYWJzb2x1dGUiLAogICAgICAgICJwb2ludGVyLWV2ZW50cyI6ICJhdXRvIiwKICAgICAgICAidHJhbnNmb3JtIjogInRyYW5zbGF0ZSgtNTAlLCAtNTAlKSIsCiAgICAgICAgImZpbHRlciI6ICIiLAogICAgICAgICJsZWZ0IjogImNhbGMoNTAlICsgMHB4KSIsCiAgICAgICAgInRvcCI6ICJjYWxjKDUwJSArIDBweCkiLAogICAgICAgICJ3aWR0aCI6ICJtYXgtY29udGVudCIsCiAgICAgICAgImhlaWdodCI6ICJhdXRvIiwKICAgICAgICAicGFkZGluZyI6ICIxNXB4IiwKICAgICAgICAiYmFja2dyb3VuZCI6ICIjZmZmIiwKICAgICAgICAiYm94LXNoYWRvdyI6ICIjMDAwIDBweCAwcHggNXB4IiwKICAgICAgICAiYm9yZGVyIjogIjFweCBub25lICMwMDAiLAogICAgICAgICJib3JkZXItcmFkaXVzIjogIjVweCIsCiAgICAgIH07CiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJsYWJlbCIpIHsKICAgICAgc3R5bGVTdG9yYWdlLmxhYmVsc1tpZF0gPSB7CiAgICAgICAgU1BzdG9yYWdlOiB7fSwKICAgICAgICAiZm9udC1zaXplIjogIjE0cHgiLAogICAgICAgICJmb250LWZhbWlseSI6ICJTYW5zIFNlcmlmIiwKICAgICAgICAibWFyZ2luIjogIjVweCIsCiAgICAgICAgImNvbG9yIjogIiMwMDAiLAogICAgICAgICJ0ZXh0LXNoYWRvdyI6ICJub25lIiwKICAgICAgICAiLXdlYmtpdC10ZXh0LXN0cm9rZS13aWR0aCI6ICIwcHgiLAogICAgICAgICJ0cmFuc2Zvcm0iOiAiIiwKICAgICAgICAiZmlsdGVyIjogIiIKICAgICAgfTsKICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gImlucHV0IikgewogICAgICBzdHlsZVN0b3JhZ2UuaW5wdXRzW2lkXSA9IHsKICAgICAgICBTUHN0b3JhZ2U6IHt9LAogICAgICAgICJ3aWR0aCI6ICJtYXgtY29udGVudCIsCiAgICAgICAgImhlaWdodCI6ICJhdXRvIiwKICAgICAgICAibWFyZ2luIjogIjVweCIsCiAgICAgICAgInBhZGRpbmciOiAiNXB4IiwKICAgICAgICAiYm9yZGVyIjogIjFweCBzb2xpZCAjMDAwIiwKICAgICAgICAiYm9yZGVyLXJhZGl1cyI6ICI0cHgiLAogICAgICAgICJ0ZXh0LWFsaWduIjogImxlZnQiLAogICAgICAgICJmb250LXNpemUiOiAiMTRweCIsCiAgICAgICAgImZvbnQtZmFtaWx5IjogIlNhbnMgU2VyaWYiLAogICAgICAgICJiYWNrZ3JvdW5kIjogIiNhNWFlYzMiLAogICAgICAgICJhY2NlbnQtY29sb3IiOiAiIzlmNTBkOSIsCiAgICAgICAgImNvbG9yIjogIiMwMDAiLAogICAgICAgICJ0ZXh0LXNoYWRvdyI6ICJub25lIiwKICAgICAgICAiLXdlYmtpdC10ZXh0LXN0cm9rZS13aWR0aCI6ICIwcHgiLAogICAgICAgICJ0cmFuc2Zvcm0iOiAiIiwKICAgICAgICAiZmlsdGVyIjogIiIKICAgICAgfTsKICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gImJ1dHRvbiIpIHsKICAgICAgc3R5bGVTdG9yYWdlLmJ1dHRvbnNbaWRdID0gewogICAgICAgIFNQc3RvcmFnZToge30sCiAgICAgICAgIndpZHRoIjogImF1dG8iLAogICAgICAgICJoZWlnaHQiOiAiYXV0byIsCiAgICAgICAgImN1cnNvciI6ICJwb2ludGVyIiwKICAgICAgICAibWFyZ2luIjogIjVweCIsCiAgICAgICAgInBhZGRpbmciOiAiNXB4IDEwcHgiLAogICAgICAgICJib3JkZXItcmFkaXVzIjogIjVweCIsCiAgICAgICAgImJvcmRlciI6ICIxcHggbm9uZSAjZmZmIiwKICAgICAgICAiYmFja2dyb3VuZCI6ICIjMDA3NGQ5IiwKICAgICAgICAiZm9udC1zaXplIjogIjE0cHgiLAogICAgICAgICJmb250LWZhbWlseSI6ICJTYW5zIFNlcmlmIiwKICAgICAgICAiY29sb3IiOiAiI2ZmZiIsCiAgICAgICAgInRleHQtc2hhZG93IjogIm5vbmUiLAogICAgICAgICItd2Via2l0LXRleHQtc3Ryb2tlLXdpZHRoIjogIjBweCIsCiAgICAgICAgInRyYW5zZm9ybSI6ICIiLAogICAgICAgICJmaWx0ZXIiOiAiIgogICAgICB9OwogICAgfQogICAgcmV0dXJuIHN0eWxlU3RvcmFnZVt0eXBlICsgInMiXVtpZF07CiAgfQoKICBjb25zdCBnZW5EZWZhdWx0Qm94ID0gKGlkLCBvcHRFbXB0eUVsZW1lbnRzKSA9PiB7CiAgICBnZW5EZWZhdWx0U3R5bGVzKGlkLCAicG9wdXAiKTsKICAgIGNvbnN0IGRlZmF1bHRFbGVtZW50cyA9IFtdOwogICAgbGV0IHN1Ym1pdEJ0biwgY2FuY2VsQnRuOwogICAgaWYgKCFvcHRFbXB0eUVsZW1lbnRzKSB7CiAgICAgIGRlZmF1bHRFbGVtZW50cy5wdXNoKGNyZWF0ZUxhYmVsKCJkZWZhdWx0LWxhYmVsIiwgU2NyYXRjaC50cmFuc2xhdGUoIldoYXRzIFlvdXIgTmFtZT8iKSkpOwogICAgICBkZWZhdWx0RWxlbWVudHMucHVzaChjcmVhdGVJbnB1dCgKICAgICAgICAiZGVmYXVsdC1pbnB1dCIsICJ0ZXh0IiwKICAgICAgICB7IGRlZmF1bHRWYWx1ZTogU2NyYXRjaC50cmFuc2xhdGUoIi4uLnR5cGUgeW91ciBuYW1lIikgfQogICAgICApKTsKCiAgICAgIGNvbnN0IGJ1dHRvblJvdyA9IGNyZWF0ZUJ1dHRvblJvdygiZGVmYXVsdC1idXR0b24tcm93Iik7CiAgICAgIHN1Ym1pdEJ0biA9IGNyZWF0ZUJ1dHRvbigic3VibWl0LWJ1dHRvbiIsIFNjcmF0Y2gudHJhbnNsYXRlKCJTdWJtaXQiKSk7CiAgICAgIGNhbmNlbEJ0biA9IGNyZWF0ZUJ1dHRvbigiY2FuY2VsLWJ1dHRvbiIsIFNjcmF0Y2gudHJhbnNsYXRlKCJDYW5jZWwiKSk7CiAgICAgIGJ1dHRvblJvdy5kYXRhLmJ1dHRvbnMucHVzaChzdWJtaXRCdG4uZGF0YSwgY2FuY2VsQnRuLmRhdGEpOwogICAgICBidXR0b25Sb3cuRE9NZWxlbWVudC5hcHBlbmQoc3VibWl0QnRuLkRPTWVsZW1lbnQsIGNhbmNlbEJ0bi5ET01lbGVtZW50KTsKICAgICAgZGVmYXVsdEVsZW1lbnRzLnB1c2goYnV0dG9uUm93KTsKICAgIH0KCiAgICBjb25zdCBkZWZhdWx0Qm94ID0gewogICAgICB3YWl0aW5nOiBmYWxzZSwKICAgICAgaXNXaW5kb3dlZDogZmFsc2UsCiAgICAgIGZvY3VzZWQ6IGZhbHNlLAogICAgICBhdXRvQ29udHJvbDogdHJ1ZSwKICAgICAgZm9yY2VLZXk6IHVuZGVmaW5lZCwKICAgICAgbGFzdEJ0blByZXNzZWQ6IHVuZGVmaW5lZCwKICAgICAgdmFsdWU6IHVuZGVmaW5lZCwKICAgICAgRE9NZWxlbWVudDogdW5kZWZpbmVkLAogICAgICBlbGVtZW50czogZGVmYXVsdEVsZW1lbnRzCiAgICB9OwogICAgaWYgKCFvcHRFbXB0eUVsZW1lbnRzKSB7CiAgICAgIGVsZW1lbnRTdG9yYWdlLmxhYmVsc1siZGVmYXVsdC1sYWJlbCJdID0gZGVmYXVsdEVsZW1lbnRzWzBdOwogICAgICBlbGVtZW50U3RvcmFnZS5pbnB1dHNbImRlZmF1bHQtaW5wdXQiXSA9IGRlZmF1bHRFbGVtZW50c1sxXTsKICAgICAgZWxlbWVudFN0b3JhZ2UuYnV0dG9uc1sic3VibWl0LWJ1dHRvbiJdID0gc3VibWl0QnRuOwogICAgICBlbGVtZW50U3RvcmFnZS5idXR0b25zWyJjYW5jZWwtYnV0dG9uIl0gPSBjYW5jZWxCdG47CiAgICAgIGVsZW1lbnRTdG9yYWdlLmJ1dHRvblJvd3NbImRlZmF1bHQtYnV0dG9uLXJvdyJdID0gZGVmYXVsdEVsZW1lbnRzWzJdOwogICAgfQogICAgZWxlbWVudFN0b3JhZ2UucG9wdXBzW2lkXSA9IGRlZmF1bHRCb3g7CiAgICByZXR1cm4gZGVmYXVsdEJveDsKICB9CgogIC8vIHBvcHVwIGJveCBHVUkKICBjb25zdCBjb21waWxlU3R5bGVzID0gKGlkLCB0eXBlKSA9PiB7CiAgICBjb25zdCBib3hJbmZvID0gZWxlbWVudFN0b3JhZ2VbdHlwZSArICJzIl1baWRdOwogICAgY29uc3Qgc3R5bGVPYmogPSBzdHlsZVN0b3JhZ2VbdHlwZSArICJzIl1baWRdID8/IGdlbkRlZmF1bHRTdHlsZXMoaWQsIHR5cGUpOwogICAgaWYgKHR5cGUgPT09ICJpbnB1dCIgJiYgYm94SW5mbz8uZGF0YS50eXBlID09PSAiY29sb3IiKSB7CiAgICAgIC8vIGNvbG9yIGlucHV0cyB3aXRoIHRoZXNlIG9wdGlvbnMgbG9vayB3ZWlyZAogICAgICBpZiAoc3R5bGVPYmpbIndpZHRoIl0gPT09ICJtYXgtY29udGVudCIpIHN0eWxlT2JqWyJ3aWR0aCJdID0gIjgwJSI7CiAgICAgIGlmIChzdHlsZU9ialsiaGVpZ2h0Il0gPT09ICJhdXRvIilzdHlsZU9ialsiaGVpZ2h0Il0gPSAiMzBweCI7CiAgICB9CgogICAgbGV0IHN0eWxlU3RyaW5nID0gIiI7CiAgICBPYmplY3QuZW50cmllcyhzdHlsZU9iaikuZm9yRWFjaCgoc3R5bGUpID0+IHsKICAgICAgc3R5bGVTdHJpbmcgKz0gYCR7c3R5bGVbMF19OiAke3N0eWxlWzFdfTtgOwogICAgfSk7CiAgICByZXR1cm4gc3R5bGVTdHJpbmc7CiAgfTsKCiAgY29uc3QgY29tcGlsZUJveCA9IChpZCkgPT4gewogICAgY29uc3QgYm94SW5mbyA9IGVsZW1lbnRTdG9yYWdlLnBvcHVwc1tpZF07CiAgICBib3hJbmZvLndhaXRpbmcgPSB0cnVlOwogICAgbGV0IGJveElucHV0cyA9IFtdOwoKICAgIGNvbnN0IHBvcHVwQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBwb3B1cENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgInBvc2l0aW9uOiBmaXhlZDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsiKTsKICAgIHBvcHVwQ29udGFpbmVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBib3hJbmZvLmZvY3VzZWQgPyAiYXV0byIgOiAibm9uZSI7IAogICAgaWYgKGJveEluZm8uZm9jdXNlZCkgcG9wdXBDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gInJnYmEoMCwwLDAsMC41KSI7CiAgICBpZiAoYm94SW5mby5pc1dpbmRvd2VkKSBwb3B1cENvbnRhaW5lci5zdHlsZS56SW5kZXggPSAiOTk5OSI7CiAgICBlbHNlIHsKICAgICAgcG9wdXBDb250YWluZXIuc3R5bGUubGVmdCA9ICItNTAlIjsKICAgICAgcG9wdXBDb250YWluZXIuc3R5bGUudG9wID0gIi01MCUiOwogICAgfQoKICAgIGNvbnN0IHBvcHVwUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHBvcHVwUGFuZWwuY2xhc3NMaXN0LmFkZCgiU1AtUG9wdXAtQm94Iik7CiAgICBwb3B1cFBhbmVsLmlkID0geG1sRXNjYXBlKGlkKTsKICAgIHBvcHVwUGFuZWwuc2V0QXR0cmlidXRlKCJzdHlsZSIsIGNvbXBpbGVTdHlsZXMoaWQsICJwb3B1cCIpKTsKCiAgICAvLyB2YXJpb3VzIGVsZW1lbnQgdXRpbHMKICAgIGNvbnN0IGhhbmRsZUNsb3NlID0gKGV2ZW50KSA9PiB7CiAgICAgIC8vIGlmIHRoZXJlcyBubyBpbnB1dCwgc2V0IHRoZSB2YWx1ZSB0byB0aGUgYnV0dG9uIG5hbWUKICAgICAgaWYgKGV2ZW50KSBib3hJbmZvLmxhc3RCdG5QcmVzc2VkID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgicmV0dXJuVmFsdWUiKTsKICAgICAgaWYgKGJveElucHV0cy5sZW5ndGggPT09IDApIGJveEluZm8udmFsdWUgPSBib3hJbmZvLmxhc3RCdG5QcmVzc2VkID8/ICIiOwogICAgICBlbHNlIGNvbXBpbGVJbnB1dFZhbHVlcygpOwogICAgICBydW50aW1lLm9mZigiS0VZX1BSRVNTRUQiLCBmb3JjZUtleUhhbmRsZXIpOwogICAgICBjbG9zZUJveChpZCk7CiAgICB9OwogICAgY29uc3QgZm9yY2VLZXlIYW5kbGVyID0gKGtleSkgPT4gewogICAgICBpZiAoYm94SW5mby5mb3JjZUtleSA9PT0gInNoaWZ0RW50ZXIiKSB7CiAgICAgICAgaWYgKGtleSA9PT0gImVudGVyIiAmJiBydW50aW1lLmlvRGV2aWNlcy5rZXlib2FyZC5nZXRLZXlJc0Rvd24oInNoaWZ0IikpIGhhbmRsZUNsb3NlKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PSBib3hJbmZvLmZvcmNlS2V5LnRvTG93ZXJDYXNlKCkpIGhhbmRsZUNsb3NlKCk7CiAgICB9OwoKICAgIGNvbnN0IGNvbXBpbGVJbnB1dFZhbHVlcyA9ICgpID0+IHsKICAgICAgaWYgKGJveElucHV0cy5sZW5ndGggPT09IDApIGJveEluZm8udmFsdWUgPSAiIjsKICAgICAgZWxzZSBpZiAoYm94SW5wdXRzLmxlbmd0aCA9PT0gMSkgewogICAgICAgIGNvbnN0IGlucHV0ID0gYm94SW5wdXRzWzBdOwogICAgICAgIGNvbnN0IGVsZW1lbnQgPSBpbnB1dC5ET01lbGVtZW50OwoKICAgICAgICBjb25zdCByZXR1cm5WYWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJyZXR1cm5WYWx1ZSIpOwogICAgICAgIGJveEluZm8udmFsdWUgPSByZXR1cm5WYWx1ZSA/IEpTT04ucGFyc2UocmV0dXJuVmFsdWUpIDogZWxlbWVudC5maXJzdENoaWxkLnZhbHVlOwogICAgICB9IGVsc2UgewogICAgICAgIGJveEluZm8udmFsdWUgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm94SW5wdXRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjb25zdCBpbnB1dCA9IGJveElucHV0c1tpXTsKICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBpbnB1dC5ET01lbGVtZW50OwoKICAgICAgICAgIGNvbnN0IHJldHVyblZhbHVlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoInJldHVyblZhbHVlIik7CiAgICAgICAgICBib3hJbmZvLnZhbHVlW2lucHV0LmRhdGEuaWRdID0gcmV0dXJuVmFsdWUgPyBKU09OLnBhcnNlKHJldHVyblZhbHVlKSA6IGVsZW1lbnQuZmlyc3RDaGlsZC52YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgLy8gYXBwZW5kIGVsZW1lbnRzIHRvIHBhbmVsCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJveEluZm8uZWxlbWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgaXRlbSA9IGJveEluZm8uZWxlbWVudHNbaV07CiAgICAgIGxldCBlbGVtZW50ID0gaXRlbS5ET01lbGVtZW50OwogICAgICBpZiAoaXRlbS50eXBlID09PSAibGFiZWwiKSB7CiAgICAgICAgY29uc3QgcmVmcmVzaGVkTGFiZWwgPSBlbGVtZW50U3RvcmFnZS5sYWJlbHNbaXRlbS5kYXRhLmlkXTsKICAgICAgICBlbGVtZW50ID0gcmVmcmVzaGVkTGFiZWwuRE9NZWxlbWVudDsKICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICJpbnB1dCIpIHsKICAgICAgICBib3hJbnB1dHMucHVzaChpdGVtKTsKCiAgICAgICAgY29uc3QgcmVmcmVzaGVkSW5wdXQgPSBlbGVtZW50U3RvcmFnZS5pbnB1dHNbaXRlbS5kYXRhLmlkXTsKICAgICAgICBjb25zdCByZWNlbnREYXRhID0gcmVmcmVzaGVkSW5wdXQuZGF0YTsKICAgICAgICBlbGVtZW50ID0gY3JlYXRlSW5wdXQoCiAgICAgICAgICByZWNlbnREYXRhLmlkLCByZWNlbnREYXRhLnR5cGUsIHJlY2VudERhdGEub3B0aW9ucwogICAgICAgICkuRE9NZWxlbWVudDsKICAgICAgICBpdGVtLkRPTWVsZW1lbnQgPSBlbGVtZW50OwogICAgICB9CiAgICAgIHBvcHVwUGFuZWwuYXBwZW5kQ2hpbGQoZWxlbWVudCkKCiAgICAgIC8vIGFkZCBldmVudCBsaXN0ZW5lcnMKICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gImlucHV0IikgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBjb21waWxlSW5wdXRWYWx1ZXMpOwogICAgICBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICJidXR0b25Sb3ciKSB7CiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIChlKSA9PiB7CiAgICAgICAgICBpZiAoZS50YXJnZXQudGFnTmFtZSA9PT0gIkJVVFRPTiIpIGhhbmRsZUNsb3NlKGUpOwogICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIHBvcHVwQ29udGFpbmVyLmFwcGVuZENoaWxkKHBvcHVwUGFuZWwpOwogICAgaWYgKGJveEluZm8uaXNXaW5kb3dlZCkgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwb3B1cENvbnRhaW5lcik7CiAgICBlbHNlIHJlbmRlci5hZGRPdmVybGF5KHBvcHVwQ29udGFpbmVyLCAic2NhbGUtY2VudGVyZWQiKTsKICAgIGNvbXBpbGVJbnB1dFZhbHVlcygpOwogICAgYm94SW5mby5ET01lbGVtZW50ID0gcG9wdXBDb250YWluZXI7CgogICAgLy8gZXh0cmEgZXZlbnQgbGlzdGVuZXJzCiAgICBpZiAoYm94SW5mby5mb3JjZUtleSAhPT0gdW5kZWZpbmVkKSBydW50aW1lLm9uKCJLRVlfUFJFU1NFRCIsIGZvcmNlS2V5SGFuZGxlcik7CiAgfTsKCiAgY29uc3QgY2xvc2VCb3ggPSAoaWQsIG9wdEZvcmNlKSA9PiB7CiAgICBjb25zdCBib3hJbmZvID0gZWxlbWVudFN0b3JhZ2UucG9wdXBzW2lkXTsKICAgIGJveEluZm8ud2FpdGluZyA9IGZhbHNlOwoKICAgIGlmIChvcHRGb3JjZSB8fCBib3hJbmZvLmF1dG9Db250cm9sKSB7CiAgICAgIGlmIChib3hJbmZvLmlzV2luZG93ZWQpIGJveEluZm8uRE9NZWxlbWVudD8ucmVtb3ZlKCk7CiAgICAgIGVsc2UgcmVuZGVyLnJlbW92ZU92ZXJsYXkoYm94SW5mby5ET01lbGVtZW50KTsKICAgICAgYm94SW5mby5ET01lbGVtZW50ID0gdW5kZWZpbmVkOwogICAgfQogIH07CgogIGNvbnN0IHVwZGF0ZUJveFZpc3VhbHMgPSAoaWQsIHR5cGUpID0+IHsKICAgIGNvbnN0IGJveEluZm8gPSBlbGVtZW50U3RvcmFnZVt0eXBlXVtpZF07CiAgICBpZiAoIWJveEluZm8gfHwgIWJveEluZm8uRE9NZWxlbWVudCkgcmV0dXJuOwogICAgY29uc3QgZWxlbWVudCA9IHR5cGUgPT09ICJidXR0b25zIiA/IGJveEluZm8uRE9NZWxlbWVudCA6IGJveEluZm8uRE9NZWxlbWVudC5maXJzdENoaWxkOwogICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoCiAgICAgICJzdHlsZSIsIAogICAgICBjb21waWxlU3R5bGVzKGlkLCB0eXBlLnNsaWNlKDAsIHR5cGUubGVuZ3RoIC0gMSkpCiAgICApOwogIH07CgogIC8vIGV4dGVuc2lvbiB1dGlsaXRpZXMKICBmdW5jdGlvbiBjcmVhdGVCbG9ja0xhYmVsKHRleHQpIHsKICAgIHJldHVybiB7CiAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuTEFCRUwsIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKHRleHQpCiAgICB9OwogIH07CgogIGZ1bmN0aW9uIGNyZWF0ZU1lbnVJdGVtKHRleHQsIHZhbHVlKSB7CiAgICByZXR1cm4gewogICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSh0ZXh0KSwgdmFsdWUKICAgIH07CiAgfTsKCiAgZ2VuRGVmYXVsdEJveCgiZGVmYXVsdC1wb3B1cCIsIGZhbHNlKTsKCiAgY2xhc3MgU1Bwb3B1cHMgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHJ1bnRpbWUub24oIlBST0pFQ1RfU1RBUlQiLCAoKSA9PiB0aGlzLnJlbW92ZUFsbFBvcHVwcygpKTsKICAgICAgcnVudGltZS5vbigiUFJPSkVDVF9TVE9QX0FMTCIsICgpID0+IHRoaXMucmVtb3ZlQWxsUG9wdXBzKCkpOwogICAgfQogICAgZ2V0SW5mbygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogIlNQcG9wdXBzIiwKICAgICAgICBuYW1lOiBTY3JhdGNoLnRyYW5zbGF0ZSgiUG9wdXAgUGhvZW5peCIpLAogICAgICAgIGNvbG9yMTogIiNhODEyZmYiLAogICAgICAgIGNvbG9yMjogIiM5NDFjZDkiLAogICAgICAgIGNvbG9yMzogIiM4MjE5YmYiLAogICAgICAgIG1lbnVJY29uVVJJLAogICAgICAgIGJsb2NrSWNvblVSSTogZ2V0QmxvY2tJY29uKCJtYWluIiksCiAgICAgICAgYmxvY2tzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNob3dQb3B1cCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNob3cgcG9wdXAgd2l0aCBJRCBbSURdIGFuZCBbVFlQRV0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMucG9wdXAgfSwKICAgICAgICAgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkFXQUlUUyIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2hvd1BvcHVwUmVwb3J0IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNob3cgcG9wdXAgd2l0aCBJRCBbSURdIGFuZCB3YWl0IiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLnBvcHVwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInVzZXJJbnB1dCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJyZXNwb25zZSBmcm9tIFtJRF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMucG9wdXAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJyZW1vdmVQb3B1cCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInJlbW92ZSBwb3B1cCB3aXRoIElEIFtJRF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMucG9wdXAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicmVtb3ZlQWxsUG9wdXBzIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgicmVtb3ZlIGFsbCBwb3B1cHMiKQogICAgICAgICAgfSwKICAgICAgICAgIGNyZWF0ZUJsb2NrTGFiZWwoIlBvcHVwcyIpLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJjcmVhdGVQb3B1cCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImNyZWF0ZSBuZXcgcG9wdXAgd2l0aCBJRCBbSURdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiBTY3JhdGNoLnRyYW5zbGF0ZSgibmV3LXBvcHVwIikgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZGVsZXRlUG9wdXAiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJkZWxldGUgcG9wdXAgd2l0aCBJRCBbSURdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLnBvcHVwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICAiLS0tIiwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiYXBwZW5kMlBvcHVwIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiYXBwZW5kIFtUWVBFXSB3aXRoIElEIFtFTEVNRU5UX0lEXSB0byBwb3B1cCBbUE9QX0lEXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlVJX0VMRU1FTlRTIiB9LAogICAgICAgICAgICAgIEVMRU1FTlRfSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMubGFiZWwgfSwKICAgICAgICAgICAgICBQT1BfSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMucG9wdXAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicmVtb3ZlRnJvbVBvcHVwIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgicmVtb3ZlIFtUWVBFXSB3aXRoIElEIFtFTEVNRU5UX0lEXSBmcm9tIHBvcHVwIFtQT1BfSURdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFRZUEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVUlfRUxFTUVOVFMiIH0sCiAgICAgICAgICAgICAgRUxFTUVOVF9JRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogdHJhbnNsYXRlZElucHV0cy5sYWJlbCB9LAogICAgICAgICAgICAgIFBPUF9JRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogdHJhbnNsYXRlZElucHV0cy5wb3B1cCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJyZW1vdmVQb3B1cENvbnRlbnQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJyZW1vdmUgYWxsIGVsZW1lbnRzIGZyb20gcG9wdXAgW0lEXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogdHJhbnNsYXRlZElucHV0cy5wb3B1cCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldFBvcHVwUG9zIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2V0IHBvc2l0aW9uIG9mIFtJRF0gdG8geDogW1hdIHk6IFtZXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogdHJhbnNsYXRlZElucHV0cy5wb3B1cCB9LAogICAgICAgICAgICAgIFg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSIH0sCiAgICAgICAgICAgICAgWTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZ2V0UG9zIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIltUWVBFXSBwb3NpdGlvbiBvZiBbSURdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFRZUEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiUE9TSVRJT04iIH0sCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMucG9wdXAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIGNyZWF0ZUJsb2NrTGFiZWwoIkxhYmVscyIpLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJjcmVhdGVQb3BMYWJlbCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImNyZWF0ZSBuZXcgbGFiZWwgd2l0aCBJRCBbSURdIGFuZCB0ZXh0IFtURVhUXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogdHJhbnNsYXRlZElucHV0cy5sYWJlbCB9LAogICAgICAgICAgICAgIFRFWFQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IFNjcmF0Y2gudHJhbnNsYXRlKCJ3aGF0cyB5b3VyIG5hbWU/IikgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZGVsZXRlUG9wTGFiZWwiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJkZWxldGUgbGFiZWwgd2l0aCBJRCBbSURdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLmxhYmVsIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICBjcmVhdGVCbG9ja0xhYmVsKCJJbnB1dHMiKSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiY3JlYXRlUG9wSW5wdXQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJjcmVhdGUgbmV3IFtUWVBFXSBpbnB1dCB3aXRoIElEIFtJRF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJJTlBVVFMiIH0sCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMuaW5wdXQgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZGVsZXRlUG9wSW5wdXQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJkZWxldGUgcG9wdXAgd2l0aCBJRCBbSURdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLmlucHV0IH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICAiLS0tIiwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2V0RGVmYXVsdFZhbHVlIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2V0IGRlZmF1bHQgdmFsdWUgb2YgaW5wdXQgW0lEXSB0byBbVkFMVUVdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLmlucHV0IH0sCiAgICAgICAgICAgICAgVkFMVUU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IFNjcmF0Y2gudHJhbnNsYXRlKGAuLi50eXBlIGhlcmVgKSB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldFNsaWRlclBhcmFtcyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNldCBzbGlkZXIgW0lEXSBtaW4gW01JTl0gbWF4IFtNQVhdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLmlucHV0IH0sCiAgICAgICAgICAgICAgTUlOOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAtMTAwIH0sCiAgICAgICAgICAgICAgTUFYOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxMDAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICAiLS0tIiwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2V0RHJvcE9wdGlvbnMiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzZXQgb3B0aW9ucyBvZiBkcm9wZG93biBbSURdIHRvIFtBUlJBWV0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMuaW5wdXQgfSwKICAgICAgICAgICAgICBBUlJBWTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogU2NyYXRjaC50cmFuc2xhdGUoYFsiT3B0aW9uIDEiLCAiT3B0aW9uIDIiLCAiT3B0aW9uIDMiXWApIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImlzRHJvcE9wZW4iLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJpcyBkcm9wZG93biBbRFJPUF9JRF0gaW4gcG9wdXAgW1BPUF9JRF0gb3Blbj8iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgRFJPUF9JRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogdHJhbnNsYXRlZElucHV0cy5pbnB1dCB9LAogICAgICAgICAgICAgIFBPUF9JRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogdHJhbnNsYXRlZElucHV0cy5wb3B1cCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgY3JlYXRlQmxvY2tMYWJlbCgiQnV0dG9ucyIpLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJjcmVhdGVCdG5Sb3ciLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJjcmVhdGUgbmV3IGJ1dHRvbiByb3cgd2l0aCBJRCBbSURdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLmJ0blJvdyB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJjcmVhdGVQb3BCdG4iLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJjcmVhdGUgbmV3IGJ1dHRvbiB3aXRoIElEIFtJRF0gYW5kIHRleHQgW1RFWFRdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLmJ1dHRvbiB9LAogICAgICAgICAgICAgIFRFWFQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IFNjcmF0Y2gudHJhbnNsYXRlKCJTdWJtaXQiKSB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJkZWxldGVCdG5Sb3ciLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJkZWxldGUgYnV0dG9uIHJvdyB3aXRoIElEIFtJRF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMuYnRuUm93IH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImRlbGV0ZVBvcEJ0biIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImRlbGV0ZSBidXR0b24gd2l0aCBJRCBbSURdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLmJ1dHRvbiB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImFwcGVuZDJSb3ciLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJhcHBlbmQgYnV0dG9uIFtCVE5fSURdIHRvIHJvdyBbUk9XX0lEXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBCVE5fSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMuYnV0dG9uIH0sCiAgICAgICAgICAgICAgUk9XX0lEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLmJ0blJvdyB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJyZW1vdmVGcm9tUm93IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgicmVtb3ZlIGJ1dHRvbiBbQlROX0lEXSBmcm9tIHJvdyBbUk9XX0lEXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBCVE5fSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMuYnV0dG9uIH0sCiAgICAgICAgICAgICAgUk9XX0lEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLmJ0blJvdyB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJyZW1vdmVSb3dDb250ZW50IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgicmVtb3ZlIGFsbCBidXR0b25zIGZyb20gcm93IFtJRF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMuYnRuUm93IH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICBjcmVhdGVCbG9ja0xhYmVsKCJPcGVyYXRvcnMiKSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiYWxsRWxlbWVudHMiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiYWxsIFtUWVBFXSBJRHMiKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJVSV9TRUxFQ1QiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInBvcHVwV2FpdGluZyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQk9PTEVBTiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImlzIHBvcHVwIFtJRF0gd2FpdGluZz8iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMucG9wdXAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAibGFzdEJ1dHRvblByZXNzIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImxhc3QgYnV0dG9uIHByZXNzZWQgaW4gW0lEXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogdHJhbnNsYXRlZElucHV0cy5wb3B1cCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldFBvcHVwVGFyZ2V0IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2hvdyBuZXh0IHBvcHVwIHdpdGggSUQgW0lEXSBvbiB0aGUgW1RZUEVdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLnBvcHVwIH0sCiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJQT1BVUF9MT0NBVElPTiIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAidG9nZ2xlT3B0aW9uIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgidG9nZ2xlIFtPUFRJT05dIGluIHBvcHVwIFtJRF0gW1RZUEVdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIE9QVElPTjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJFWFRSQV9PUFRTIiB9LAogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLnBvcHVwIH0sCiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUT0dHTEVSIiB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzZXRGb3JjZUNsb3NlIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2V0IGF1dG8tY2xvc2UgYWN0aW9uIGluIHBvcHVwIFtJRF0gdG8gW0tFWV0ga2V5IiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLnBvcHVwIH0sCiAgICAgICAgICAgICAgS0VZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkZPUkNFX0tFWSIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIGNyZWF0ZUJsb2NrTGFiZWwoIkN1c3RvbWl6YXRpb24iKSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2V0UG9wdXBBbGlnbiIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgYmxvY2tJY29uVVJJOiBnZXRCbG9ja0ljb24oImNvbG9yIiksCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzZXQgYWxpZ25tZW50IG9mIHBvcHVwIFtJRF0gdG8gW1RZUEVdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLnBvcHVwIH0sCiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJBTElHTk1FTlQiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldElucHV0QWxpZ24iLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIGJsb2NrSWNvblVSSTogZ2V0QmxvY2tJY29uKCJjb2xvciIpLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2V0IGFsaWdubWVudCBvZiBpbnB1dCBbSURdIHRvIFtUWVBFXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogdHJhbnNsYXRlZElucHV0cy5pbnB1dCB9LAogICAgICAgICAgICAgIFRZUEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiQUxJR05NRU5UIiB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldElucHV0Rm9udCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgYmxvY2tJY29uVVJJOiBnZXRCbG9ja0ljb24oImNvbG9yIiksCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzZXQgZm9udCBvZiBbRUxFTUVOVF0gW0lEXSB0byBbRk9OVF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgRUxFTUVOVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJVSV9NQUlOMiIgfSwKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogdHJhbnNsYXRlZElucHV0cy5sYWJlbCB9LAogICAgICAgICAgICAgIEZPTlQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiRk9OVFMiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldElucHV0Rm9udFNaIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICBibG9ja0ljb25VUkk6IGdldEJsb2NrSWNvbigiY29sb3IiKSwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNldCBmb250IHNpemUgb2YgW0VMRU1FTlRdIFtJRF0gdG8gW1NJWkVdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEVMRU1FTlQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVUlfTUFJTjIiIH0sCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMubGFiZWwgfSwKICAgICAgICAgICAgICBTSVpFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxNSB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzZXRFbGVtZW50T3V0bGluZSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgYmxvY2tJY29uVVJJOiBnZXRCbG9ja0ljb24oImNvbG9yIiksCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzZXQgdGV4dCBvdXRsaW5lIG9mIFtFTEVNRU5UXSBbSURdIHRvIGNvbG9yIFtDT0xPUl0gd2VpZ2h0IFtXRUlHSFRdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEVMRU1FTlQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVUlfTUFJTjIiIH0sCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMubGFiZWwgfSwKICAgICAgICAgICAgICBDT0xPUjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5DT0xPUiB9LAogICAgICAgICAgICAgIFdFSUdIVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogNSB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldEVsZW1lbnRBdHQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIGJsb2NrSWNvblVSSTogZ2V0QmxvY2tJY29uKCJjb2xvciIpLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2V0IFtQQVJBTV0gb2YgW0VMRU1FTlRdIFtJRF0gdG8gW1ZBTFVFXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBQQVJBTTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJQT1BfU1RZTEVTIiB9LAogICAgICAgICAgICAgIEVMRU1FTlQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVUlfTUFJTiIgfSwKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogdHJhbnNsYXRlZElucHV0cy5wb3B1cCB9LAogICAgICAgICAgICAgIFZBTFVFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiI2ZmMDAwMCIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2V0RWxlbWVudEJvcmRlciIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgYmxvY2tJY29uVVJJOiBnZXRCbG9ja0ljb24oImNvbG9yIiksCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzZXQgYm9yZGVyIG9mIFtFTEVNRU5UXSBbSURdIHRvIFtUWVBFXSBbQ09MT1JdIHdlaWdodCBbV0VJR0hUXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBFTEVNRU5UOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlVJX01BSU4iIH0sCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMucG9wdXAgfSwKICAgICAgICAgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkJPUkRFUlMiIH0sCiAgICAgICAgICAgICAgQ09MT1I6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQ09MT1IgfSwKICAgICAgICAgICAgICBXRUlHSFQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDUgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2V0RWxlbWVudFNoYWRvdyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgYmxvY2tJY29uVVJJOiBnZXRCbG9ja0ljb24oImNvbG9yIiksCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzZXQgc2hhZG93IG9mIFtFTEVNRU5UXSBbSURdIHRvIHg6IFtYXSB5OiBbWV0gY29sb3IgW0NPTE9SXSBibHVyIFtBTVRdIHN0cmVuZ3RoIFtCTFVSXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBFTEVNRU5UOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlVJX01BSU4iIH0sCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMucG9wdXAgfSwKICAgICAgICAgICAgICBYOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiB9LAogICAgICAgICAgICAgIFk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSIH0sCiAgICAgICAgICAgICAgQ09MT1I6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQ09MT1IgfSwKICAgICAgICAgICAgICBBTVQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDUgfSwKICAgICAgICAgICAgICBCTFVSOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiA1IH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICAiLS0tIiwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicmVzZXRFbGVtZW50RWZmZWN0IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICBibG9ja0ljb25VUkk6IGdldEJsb2NrSWNvbigiZWZmZWN0IiksCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJyZXNldCBlZmZlY3RzIG9mIFtFTEVNRU5UXSBbSURdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEVMRU1FTlQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVUlfTUFJTiIgfSwKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogdHJhbnNsYXRlZElucHV0cy5wb3B1cCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzZXRFbGVtZW50RWZmZWN0IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICBibG9ja0ljb25VUkk6IGdldEJsb2NrSWNvbigiZWZmZWN0IiksCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzZXQgW0VGRkVDVF0gb2YgW0VMRU1FTlRdIFtJRF0gdG8gW1ZBTFVFXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBFRkZFQ1Q6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiRUZGRUNUUyIgfSwKICAgICAgICAgICAgICBFTEVNRU5UOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlVJX01BSU4iIH0sCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IHRyYW5zbGF0ZWRJbnB1dHMucG9wdXAgfSwKICAgICAgICAgICAgICBWQUxVRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogNSB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJnZXRFbGVtZW50RWZmZWN0IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgYmxvY2tJY29uVVJJOiBnZXRCbG9ja0ljb24oImVmZmVjdCIpLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiW0VGRkVDVF0gb2YgW0VMRU1FTlRdIFtJRF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgRUZGRUNUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkVGRkVDVFMiIH0sCiAgICAgICAgICAgICAgRUxFTUVOVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJVSV9NQUlOIiB9LAogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiB0cmFuc2xhdGVkSW5wdXRzLnBvcHVwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBtZW51czogewogICAgICAgICAgRk9OVFM6IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogImdldEZvbnRzIiB9LAogICAgICAgICAgUE9QX1NUWUxFUzogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiB0aGlzLmdlblN0eWxlTGlzdCgicG9wdXAiKSB9LAogICAgICAgICAgTEFCX1NUWUxFUzogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiB0aGlzLmdlblN0eWxlTGlzdCgibGFiZWwiKSB9LAogICAgICAgICAgSU5QX1NUWUxFUzogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiB0aGlzLmdlblN0eWxlTGlzdCgiaW5wdXQiKSB9LAogICAgICAgICAgQlVUX1NUWUxFUzogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiB0aGlzLmdlblN0eWxlTGlzdCgiYnV0dG9uIikgfSwKICAgICAgICAgIElOUFVUUzogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiB2YWxpZElucHV0cyB9LAogICAgICAgICAgQk9SREVSUzogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiB2YWxpZEJvcmRlcnMgfSwKICAgICAgICAgIEVGRkVDVFM6IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogdmFsaWRFZmZlY3RzIH0sCiAgICAgICAgICBVSV9FTEVNRU5UUzogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiB0aGlzLmdlbkVsZW1lbnRMaXN0KGZhbHNlLCB0cnVlLCBmYWxzZSkgfSwKICAgICAgICAgIFVJX01BSU46IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogdGhpcy5nZW5FbGVtZW50TGlzdCh0cnVlLCBmYWxzZSwgdHJ1ZSkgfSwKICAgICAgICAgIFVJX01BSU4yOiB7IGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwgaXRlbXM6IHRoaXMuZ2VuRWxlbWVudExpc3QoZmFsc2UsIGZhbHNlLCB0cnVlKSB9LAogICAgICAgICAgVUlfU0VMRUNUOiB7IGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwgaXRlbXM6IHRoaXMuZ2VuRWxlbWVudExpc3QodHJ1ZSwgdHJ1ZSwgdHJ1ZSkgfSwKICAgICAgICAgIEFXQUlUUzogewogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IGZhbHNlLAogICAgICAgICAgICBpdGVtczogW2NyZWF0ZU1lbnVJdGVtKCJ3YWl0IiwgIndhaXQiKSwgY3JlYXRlTWVudUl0ZW0oImNvbnRpbnVlIiwgImNvbnRpbnVlIildCiAgICAgICAgICB9LAogICAgICAgICAgVE9HR0xFUjogewogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IGZhbHNlLAogICAgICAgICAgICBpdGVtczogW2NyZWF0ZU1lbnVJdGVtKCJvbiIsICJvbiIpLCBjcmVhdGVNZW51SXRlbSgib2ZmIiwgIm9mZiIpXQogICAgICAgICAgfSwKICAgICAgICAgIFBPU0lUSU9OOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogZmFsc2UsCiAgICAgICAgICAgIGl0ZW1zOiBbY3JlYXRlTWVudUl0ZW0oIngiLCAieCIpLCBjcmVhdGVNZW51SXRlbSgieSIsICJ5IildCiAgICAgICAgICB9LAogICAgICAgICAgUE9QVVBfTE9DQVRJT046IHsKICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiBmYWxzZSwKICAgICAgICAgICAgaXRlbXM6IFtjcmVhdGVNZW51SXRlbSgid2luZG93IiwgIndpbmRvdyIpLCBjcmVhdGVNZW51SXRlbSgiY2FudmFzIiwgImNhbnZhcyIpXQogICAgICAgICAgfSwKICAgICAgICAgIEFMSUdOTUVOVDogewogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IGZhbHNlLAogICAgICAgICAgICBpdGVtczogWwogICAgICAgICAgICAgIGNyZWF0ZU1lbnVJdGVtKCJsZWZ0IiwgImxlZnQiKSwKICAgICAgICAgICAgICBjcmVhdGVNZW51SXRlbSgicmlnaHQiLCAiZmxleC1lbmQiKSwKICAgICAgICAgICAgICBjcmVhdGVNZW51SXRlbSgiY2VudGVyIiwgImNlbnRlciIpCiAgICAgICAgICAgIF0KICAgICAgICAgIH0sCiAgICAgICAgICBGT1JDRV9LRVk6IHsKICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLAogICAgICAgICAgICBpdGVtczogWwogICAgICAgICAgICAgIGNyZWF0ZU1lbnVJdGVtKCJub25lIiwgIm5vbmUiKSwKICAgICAgICAgICAgICBjcmVhdGVNZW51SXRlbSgiZW50ZXIiLCAiZW50ZXIiKSwKICAgICAgICAgICAgICBjcmVhdGVNZW51SXRlbSgic2hpZnQgJiBlbnRlciIsICJzaGlmdEVudGVyIikKICAgICAgICAgICAgXQogICAgICAgICAgfSwKICAgICAgICAgIEVYVFJBX09QVFM6IHsKICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLAogICAgICAgICAgICBpdGVtczogWwogICAgICAgICAgICAgIGNyZWF0ZU1lbnVJdGVtKCJmb2N1cyBtb2RlIiwgImZvY3VzIiksCiAgICAgICAgICAgICAgY3JlYXRlTWVudUl0ZW0oImF1dG8gY2xvc2UiLCAiYXV0b0Nsb3NlIikKICAgICAgICAgICAgXQogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICB9OwogICAgfQoKICAgIC8vIEhlbHBlciBGdW5jcwogICAgZ2V0Rm9udHMoKSB7CiAgICAgIGNvbnN0IGN1c3RGb250cyA9IHJ1bnRpbWUuZm9udE1hbmFnZXIgPyBydW50aW1lLmZvbnRNYW5hZ2VyLmdldEZvbnRzKCkubWFwKChpKSA9PiAoeyB0ZXh0OiBpLm5hbWUsIHZhbHVlOiBpLmZhbWlseSB9KSkgOiBbXTsKICAgICAgcmV0dXJuIFsgLi4uZGVmYXVsdEZvbnRzLCAuLi5jdXN0Rm9udHMgXTsKICAgIH0KCiAgICBnZW5FbGVtZW50TGlzdChhZGRQb3B1cCwgYWRkUm93LCBhZGRCdXR0b24pIHsKICAgICAgY29uc3QgbGlzdCA9IFtdOwogICAgICBpZiAoYWRkUG9wdXApIGxpc3QucHVzaChjcmVhdGVNZW51SXRlbSgicG9wdXAiLCAicG9wdXAiKSk7CiAgICAgIGxpc3QucHVzaChjcmVhdGVNZW51SXRlbSgibGFiZWwiLCAibGFiZWwiKSwgY3JlYXRlTWVudUl0ZW0oImlucHV0IiwgImlucHV0IikpOwogICAgICBpZiAoYWRkUm93KSBsaXN0LnB1c2goY3JlYXRlTWVudUl0ZW0oImJ1dHRvbiByb3ciLCAiYnV0dG9uUm93IikpOwogICAgICBpZiAoYWRkQnV0dG9uKSBsaXN0LnB1c2goY3JlYXRlTWVudUl0ZW0oImJ1dHRvbiIsICJidXR0b24iKSk7CiAgICAgIHJldHVybiBsaXN0OwogICAgfQoKICAgIGdlblN0eWxlTGlzdCgpIHsKICAgICAgcmV0dXJuIFsKICAgICAgICBjcmVhdGVNZW51SXRlbSgiYmFja2dyb3VuZCBjb2xvciIsICJiYWNrZ3JvdW5kIiksCiAgICAgICAgY3JlYXRlTWVudUl0ZW0oInRleHQgY29sb3IiLCAiY29sb3IiKSwKICAgICAgICBjcmVhdGVNZW51SXRlbSgiYWNjZW50IGNvbG9yIiwgImFjY2VudC1jb2xvciIpLAogICAgICAgIGNyZWF0ZU1lbnVJdGVtKCJtYXJnaW5zIiwgIm1hcmdpbiIpLAogICAgICAgIGNyZWF0ZU1lbnVJdGVtKCJwYWRkaW5nIiwgInBhZGRpbmciKSwKICAgICAgICBjcmVhdGVNZW51SXRlbSgid2lkdGgiLCAid2lkdGgiKSwKICAgICAgICBjcmVhdGVNZW51SXRlbSgiaGVpZ2h0IiwgImhlaWdodCIpLAogICAgICAgIGNyZWF0ZU1lbnVJdGVtKCJib3JkZXIgcmFkaXVzIiwgImJvcmRlci1yYWRpdXMiKQogICAgICBdOwogICAgfQoKICAgIGdldEVsZW1lbnRQYXRoKHBhdGgsIHVzZUJ0biwgdXNlUG9wdXApIHsKICAgICAgY29uc3QgdmFsaWRQYXRocyA9IFsibGFiZWwiLCAiaW5wdXQiLCB1c2VCdG4gPyAiYnV0dG9uIiA6ICJidXR0b25Sb3ciXTsKICAgICAgaWYgKHVzZVBvcHVwKSB2YWxpZFBhdGhzLnB1c2goInBvcHVwIik7CiAgICAgIHJldHVybiB2YWxpZFBhdGhzLmluY2x1ZGVzKHBhdGgpID8gcGF0aCA6ICJsYWJlbCI7CiAgICB9CgogICAgb3BlblBvcHVwSGFuZGxlcihhcmdzLCB1dGlsLCByZXBvcnRSZXNwb25zZSkgewogICAgICBjb25zdCBpZCA9IENhc3QudG9TdHJpbmcoYXJncy5JRCk7CiAgICAgIGxldCBwb3B1cCA9IGVsZW1lbnRTdG9yYWdlLnBvcHVwc1tpZF07CiAgICAgIGlmICghdXRpbC5zdGFja0ZyYW1lLmF3YWl0aW5nSW5wdXQpIHsKICAgICAgICBpZiAocG9wdXAgPT09IHVuZGVmaW5lZCkgcG9wdXAgPSBnZW5EZWZhdWx0Qm94KGlkLCBmYWxzZSk7CiAgICAgICAgaWYgKHBvcHVwLkRPTWVsZW1lbnQpIGNsb3NlQm94KGlkLCB0cnVlKTsKICAgICAgICBjb21waWxlQm94KGlkKTsKICAgICAgICB1dGlsLnN0YWNrRnJhbWUuYXdhaXRpbmdJbnB1dCA9IHRydWU7CiAgICAgIH0KCiAgICAgIGlmICgocmVwb3J0UmVzcG9uc2UgPyB0cnVlIDogYXJncy5UWVBFID09PSAid2FpdCIpICYmIHBvcHVwPy53YWl0aW5nKSB1dGlsLnlpZWxkKCk7CiAgICAgIGlmIChyZXBvcnRSZXNwb25zZSkgcmV0dXJuIHR5cGVvZiBwb3B1cC52YWx1ZSA9PT0gIm9iamVjdCIgPyAKICAgICAgICBKU09OLnN0cmluZ2lmeShwb3B1cC52YWx1ZSkgOiBwb3B1cC52YWx1ZSB8fCAiIjsKICAgIH0KCiAgICAvLyBCbG9jayBGdW5jcwogICAgLyogbWFpbiAqLwogICAgc2hvd1BvcHVwKGFyZ3MsIHV0aWwpIHsKICAgICAgdGhpcy5vcGVuUG9wdXBIYW5kbGVyKGFyZ3MsIHV0aWwsIGZhbHNlKTsKICAgIH0KCiAgICBzaG93UG9wdXBSZXBvcnQoYXJncywgdXRpbCkgewogICAgICByZXR1cm4gdGhpcy5vcGVuUG9wdXBIYW5kbGVyKGFyZ3MsIHV0aWwsIHRydWUpOwogICAgfQoKICAgIHVzZXJJbnB1dChhcmdzKSB7CiAgICAgIGNvbnN0IGlkID0gQ2FzdC50b1N0cmluZyhhcmdzLklEKTsKICAgICAgY29uc3QgcG9wdXAgPSBlbGVtZW50U3RvcmFnZS5wb3B1cHNbaWRdOwogICAgICBpZiAocG9wdXAgPT09IHVuZGVmaW5lZCkgcmV0dXJuICIiOwogICAgICByZXR1cm4gdHlwZW9mIHBvcHVwLnZhbHVlID09PSAib2JqZWN0IiA/IEpTT04uc3RyaW5naWZ5KHBvcHVwLnZhbHVlKSA6IHBvcHVwLnZhbHVlIHx8ICIiOwogICAgfQoKICAgIHJlbW92ZVBvcHVwKGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBjb25zdCBwb3B1cCA9IGVsZW1lbnRTdG9yYWdlLnBvcHVwc1tpZF07CiAgICAgIGlmIChwb3B1cCAhPT0gdW5kZWZpbmVkICYmIHBvcHVwLkRPTWVsZW1lbnQpIGNsb3NlQm94KGlkLCB0cnVlKTsKICAgIH0KCiAgICByZW1vdmVBbGxQb3B1cHMoKSB7CiAgICAgIGNvbnN0IGFsbFBvcHVwcyA9IE9iamVjdC5lbnRyaWVzKGVsZW1lbnRTdG9yYWdlLnBvcHVwcyk7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsUG9wdXBzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgZW50cnkgPSBhbGxQb3B1cHNbaV07CiAgICAgICAgaWYgKGVudHJ5WzFdLkRPTWVsZW1lbnQpIGNsb3NlQm94KGVudHJ5WzBdLCB0cnVlKTsKICAgICAgfQogICAgfQoKICAgIC8qIHBvcHVwcyAqLwogICAgY3JlYXRlUG9wdXAoYXJncykgewogICAgICB0aGlzLnJlbW92ZVBvcHVwKGFyZ3MpOwogICAgICBjb25zdCBpZCA9IENhc3QudG9TdHJpbmcoYXJncy5JRCk7CiAgICAgIGdlbkRlZmF1bHRCb3goaWQsIHRydWUpOwogICAgfQoKICAgIGRlbGV0ZVBvcHVwKGFyZ3MpIHsKICAgICAgdGhpcy5yZW1vdmVQb3B1cChhcmdzKTsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBkZWxldGUgc3R5bGVTdG9yYWdlLnBvcHVwc1tpZF07CiAgICAgIGRlbGV0ZSBlbGVtZW50U3RvcmFnZS5wb3B1cHNbaWRdOwogICAgfQoKICAgIGFwcGVuZDJQb3B1cChhcmdzKSB7CiAgICAgIGNvbnN0IHBvcHVwID0gZWxlbWVudFN0b3JhZ2UucG9wdXBzW0Nhc3QudG9TdHJpbmcoYXJncy5QT1BfSUQpXTsKICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0RWxlbWVudFBhdGgoQ2FzdC50b1N0cmluZyhhcmdzLlRZUEUpKTsKICAgICAgY29uc3QgZWxlbWVudElEID0gQ2FzdC50b1N0cmluZyhhcmdzLkVMRU1FTlRfSUQpOwogICAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudFN0b3JhZ2VbcGF0aCArICJzIl1bZWxlbWVudElEXTsKICAgICAgaWYgKHBvcHVwID09PSB1bmRlZmluZWQgfHwgZWxlbWVudCA9PT0gdW5kZWZpbmVkKSByZXR1cm47CgogICAgICBjb25zdCBlbGVtZW50SW5kZXggPSBwb3B1cC5lbGVtZW50cy5maW5kSW5kZXgoKGkpID0+IHsKICAgICAgICByZXR1cm4gaS50eXBlID09PSBwYXRoICYmIGkuZGF0YS5pZCA9PT0gZWxlbWVudElECiAgICAgIH0pOwogICAgICBpZiAoZWxlbWVudEluZGV4ID09PSAtMSkgcG9wdXAuZWxlbWVudHMucHVzaChlbGVtZW50KTsKICAgIH0KCiAgICByZW1vdmVGcm9tUG9wdXAoYXJncykgewogICAgICBjb25zdCBwb3B1cCA9IGVsZW1lbnRTdG9yYWdlLnBvcHVwc1tDYXN0LnRvU3RyaW5nKGFyZ3MuUE9QX0lEKV07CiAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldEVsZW1lbnRQYXRoKENhc3QudG9TdHJpbmcoYXJncy5UWVBFKSk7CiAgICAgIGNvbnN0IGVsZW1lbnRJRCA9IENhc3QudG9TdHJpbmcoYXJncy5FTEVNRU5UX0lEKTsKICAgICAgaWYgKHBvcHVwID09PSB1bmRlZmluZWQpIHJldHVybjsKCiAgICAgIGNvbnN0IGVsZW1lbnRJbmRleCA9IHBvcHVwLmVsZW1lbnRzLmZpbmRJbmRleCgoaSkgPT4gewogICAgICAgIHJldHVybiBpLnR5cGUgPT09IHBhdGggJiYgaS5kYXRhLmlkID09PSBlbGVtZW50SUQKICAgICAgfSk7CiAgICAgIGlmIChlbGVtZW50SW5kZXggPiAtMSkgcG9wdXAuZWxlbWVudHMuc3BsaWNlKGVsZW1lbnRJbmRleCwgMSk7CiAgICB9CgogICAgcmVtb3ZlUG9wdXBDb250ZW50KGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBjb25zdCBwb3B1cCA9IGVsZW1lbnRTdG9yYWdlLnBvcHVwc1tpZF07CiAgICAgIGlmIChwb3B1cCAhPT0gdW5kZWZpbmVkKSBwb3B1cC5lbGVtZW50cyA9IFtdOwogICAgfQoKICAgIHNldFBvcHVwUG9zKGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBjb25zdCBzdHlsZXMgPSBzdHlsZVN0b3JhZ2UucG9wdXBzW2lkXSA/PyBnZW5EZWZhdWx0U3R5bGVzKGlkLCAicG9wdXAiKTsKICAgICAgc3R5bGVzLmxlZnQgPSBgY2FsYyg1MCUgKyAke0Nhc3QudG9OdW1iZXIoYXJncy5YKX1weClgOwogICAgICBzdHlsZXMudG9wID0gYGNhbGMoNTAlICsgJHtDYXN0LnRvTnVtYmVyKGFyZ3MuWSkgKiAtMX1weClgOwogICAgICB1cGRhdGVCb3hWaXN1YWxzKGlkLCAicG9wdXBzIik7CiAgICB9CgogICAgZ2V0UG9zKGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBjb25zdCBzdHlsZXMgPSBzdHlsZVN0b3JhZ2UucG9wdXBzW2lkXSA/PyBnZW5EZWZhdWx0U3R5bGVzKGlkLCAicG9wdXAiKTsKICAgICAgaWYgKGFyZ3MuVFlQRSA9PT0gIngiKSByZXR1cm4gcGFyc2VGbG9hdChzdHlsZXMubGVmdC5yZXBsYWNlKCJjYWxjKDUwJSArICIsICIiKSk7CiAgICAgIGVsc2UgcmV0dXJuIHBhcnNlRmxvYXQoc3R5bGVzLnRvcC5yZXBsYWNlKCJjYWxjKDUwJSArICIsICIiKSkgKiAtMTsKICAgIH0KCiAgICAvKiBsYWJlbHMgKi8KICAgIGNyZWF0ZVBvcExhYmVsKGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBjb25zdCB0ZXh0ID0gQ2FzdC50b1N0cmluZyhhcmdzLlRFWFQpOwogICAgICBlbGVtZW50U3RvcmFnZS5sYWJlbHNbaWRdID0gY3JlYXRlTGFiZWwoaWQsIHRleHQpOwogICAgfQoKICAgIGRlbGV0ZVBvcExhYmVsKGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBkZWxldGUgc3R5bGVTdG9yYWdlLmxhYmVsc1tpZF07CiAgICAgIGRlbGV0ZSBlbGVtZW50U3RvcmFnZS5sYWJlbHNbaWRdOwogICAgfQoKICAgIC8qIGlucHV0cyAqLwogICAgY3JlYXRlUG9wSW5wdXQoYXJncykgewogICAgICBjb25zdCBpZCA9IENhc3QudG9TdHJpbmcoYXJncy5JRCk7CiAgICAgIGxldCB0eXBlID0gQ2FzdC50b1N0cmluZyhhcmdzLlRZUEUpOwoKICAgICAgY29uc3QgaXNWYWxpZElucHV0ID0gdmFsaWRJbnB1dHMuZmluZEluZGV4KChpKSA9PiB7IHJldHVybiBpLnZhbHVlID09PSB0eXBlIH0pOwogICAgICBpZiAoaXNWYWxpZElucHV0ID09PSAtMSkgdHlwZSA9ICJ0ZXh0IjsKICAgICAgZWxlbWVudFN0b3JhZ2UuaW5wdXRzW2lkXSA9IGNyZWF0ZUlucHV0KGlkLCB0eXBlLCB7fSk7CiAgICB9CgogICAgZGVsZXRlUG9wSW5wdXQoYXJncykgewogICAgICBjb25zdCBpZCA9IENhc3QudG9TdHJpbmcoYXJncy5JRCk7CiAgICAgIGRlbGV0ZSBzdHlsZVN0b3JhZ2UuaW5wdXRzW2lkXTsKICAgICAgZGVsZXRlIGVsZW1lbnRTdG9yYWdlLmlucHV0c1tpZF07CiAgICB9CgogICAgc2V0RGVmYXVsdFZhbHVlKGFyZ3MpIHsKICAgICAgY29uc3QgaW5wdXQgPSBlbGVtZW50U3RvcmFnZS5pbnB1dHNbQ2FzdC50b1N0cmluZyhhcmdzLklEKV07CiAgICAgIGlmIChpbnB1dCkgaW5wdXQuZGF0YS5vcHRpb25zLmRlZmF1bHRWYWx1ZSA9IENhc3QudG9TdHJpbmcoYXJncy5WQUxVRSk7CiAgICB9CgogICAgc2V0U2xpZGVyUGFyYW1zKGFyZ3MpIHsKICAgICAgY29uc3QgaW5wdXQgPSBlbGVtZW50U3RvcmFnZS5pbnB1dHNbQ2FzdC50b1N0cmluZyhhcmdzLklEKV07CiAgICAgIGlmIChpbnB1dCkgewogICAgICAgIGlucHV0LmRhdGEub3B0aW9ucy5taW5WID0gQ2FzdC50b051bWJlcihhcmdzLk1JTik7CiAgICAgICAgaW5wdXQuZGF0YS5vcHRpb25zLm1heFYgPSBDYXN0LnRvTnVtYmVyKGFyZ3MuTUFYKTsKICAgICAgfQogICAgfQoKICAgIHNldERyb3BPcHRpb25zKGFyZ3MpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBhcnJheSA9IEpTT04ucGFyc2UoYXJncy5BUlJBWSk7CiAgICAgICAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkgYXJyYXkucHVzaCgibm8gb3B0aW9ucyBjcmVhdGVkIik7CiAgICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICAgIGNvbnN0IGlucHV0ID0gZWxlbWVudFN0b3JhZ2UuaW5wdXRzW2lkXTsKICAgICAgICBpZiAoaW5wdXQpIGlucHV0LmRhdGEub3B0aW9ucy5zZWxlY3RvcnMgPSBhcnJheTsKICAgICAgfSBjYXRjaCB7CiAgICAgICAgY29uc29sZS53YXJuKCJGYWlsZWQgdG8gc2V0IERyb3Bkb3duIE9wdGlvbnMsIGludmFsaWQgQXJyYXkhIik7CiAgICAgIH0KICAgIH0KCiAgICBpc0Ryb3BPcGVuKGFyZ3MpIHsKICAgICAgY29uc3QgcG9wdXAgPSBlbGVtZW50U3RvcmFnZS5wb3B1cHNbQ2FzdC50b1N0cmluZyhhcmdzLlBPUF9JRCldOwogICAgICBjb25zdCBkcm9wSUQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuRFJPUF9JRCk7CiAgICAgIGlmIChwb3B1cCA9PT0gdW5kZWZpbmVkIHx8ICFwb3B1cC53YWl0aW5nKSByZXR1cm4gZmFsc2U7CiAgICAgIGNvbnN0IGRyb3Bkb3duID0gcG9wdXAuZWxlbWVudHMuZmluZCgoZSkgPT4gewogICAgICAgIHJldHVybiBlLnR5cGUgPT09ICJpbnB1dCIgJiYgZS5kYXRhLmlkID09PSBkcm9wSUQKICAgICAgfSk7CiAgICAgIGlmIChkcm9wZG93bikgcmV0dXJuIGRyb3Bkb3duLmRhdGEub3B0aW9ucy5tZW51T3BlbmVkID8/IGZhbHNlOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyogYnV0dG9ucyAqLwogICAgY3JlYXRlQnRuUm93KGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBlbGVtZW50U3RvcmFnZS5idXR0b25Sb3dzW2lkXSA9IGNyZWF0ZUJ1dHRvblJvdyhpZCk7CiAgICB9CgogICAgY3JlYXRlUG9wQnRuKGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBjb25zdCB0ZXh0ID0gQ2FzdC50b1N0cmluZyhhcmdzLlRFWFQpOwogICAgICBlbGVtZW50U3RvcmFnZS5idXR0b25zW2lkXSA9IGNyZWF0ZUJ1dHRvbihpZCwgdGV4dCk7CiAgICB9CgogICAgZGVsZXRlQnRuUm93KGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBkZWxldGUgZWxlbWVudFN0b3JhZ2UuYnV0dG9uUm93c1tpZF07CiAgICB9CgogICAgZGVsZXRlUG9wQnRuKGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBkZWxldGUgc3R5bGVTdG9yYWdlLmJ1dHRvbnNbaWRdOwogICAgICBkZWxldGUgZWxlbWVudFN0b3JhZ2UuYnV0dG9uc1tpZF07CiAgICB9CgogICAgYXBwZW5kMlJvdyhhcmdzKSB7CiAgICAgIGNvbnN0IGJ0biA9IGVsZW1lbnRTdG9yYWdlLmJ1dHRvbnNbQ2FzdC50b1N0cmluZyhhcmdzLkJUTl9JRCldOwogICAgICBjb25zdCByb3cgPSBlbGVtZW50U3RvcmFnZS5idXR0b25Sb3dzW0Nhc3QudG9TdHJpbmcoYXJncy5ST1dfSUQpXTsKICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IGJ0biA9PT0gdW5kZWZpbmVkKSByZXR1cm47CgogICAgICBjb25zdCBidG5MaXN0ID0gcm93LmRhdGEuYnV0dG9uczsKICAgICAgY29uc3QgYnRuSW5kZXggPSBidG5MaXN0LmZpbmRJbmRleCgoaSkgPT4geyByZXR1cm4gaS5pZCA9PT0gYnRuLmRhdGEuaWR9KTsKICAgICAgaWYgKGJ0bkluZGV4ID4gLTEpIHJldHVybjsKICAgICAgYnRuTGlzdC5wdXNoKGJ0bi5kYXRhKTsKICAgICAgcm93LkRPTWVsZW1lbnQuYXBwZW5kQ2hpbGQoYnRuLkRPTWVsZW1lbnQpOwogICAgfQoKICAgIHJlbW92ZUZyb21Sb3coYXJncykgewogICAgICBjb25zdCBidG4gPSBlbGVtZW50U3RvcmFnZS5idXR0b25zW0Nhc3QudG9TdHJpbmcoYXJncy5CVE5fSUQpXTsKICAgICAgY29uc3Qgcm93ID0gZWxlbWVudFN0b3JhZ2UuYnV0dG9uUm93c1tDYXN0LnRvU3RyaW5nKGFyZ3MuUk9XX0lEKV07CiAgICAgIGlmIChyb3cgPT09IHVuZGVmaW5lZCB8fCBidG4gPT09IHVuZGVmaW5lZCkgcmV0dXJuOwoKICAgICAgY29uc3QgYnRuTGlzdCA9IHJvdy5kYXRhLmJ1dHRvbnM7CiAgICAgIGNvbnN0IGJ0bkluZGV4ID0gYnRuTGlzdC5maW5kSW5kZXgoKGkpID0+IHsgcmV0dXJuIGkuaWQgPT09IGJ0bi5kYXRhLmlkfSk7CiAgICAgIGlmIChidG5JbmRleCA9PT0gLTEpIHJldHVybjsKICAgICAgYnRuTGlzdC5zcGxpY2UoYnRuSW5kZXgsIDEpOwogICAgICByb3cuRE9NZWxlbWVudC5jaGlsZHJlbltidG5JbmRleF0ucmVtb3ZlKCk7CiAgICB9CgogICAgcmVtb3ZlUm93Q29udGVudChhcmdzKSB7CiAgICAgIGNvbnN0IHJvdyA9IGVsZW1lbnRTdG9yYWdlLmJ1dHRvblJvd3NbQ2FzdC50b1N0cmluZyhhcmdzLklEKV07CiAgICAgIGlmIChyb3cgPT09IHVuZGVmaW5lZCkgcmV0dXJuOwoKICAgICAgQXJyYXkuZnJvbShyb3cuRE9NZWxlbWVudC5jaGlsZHJlbikuZm9yRWFjaCgoYnV0dG9uKSA9PiBidXR0b24ucmVtb3ZlKCkpOwogICAgICByb3cuZGF0YS5idXR0b25zID0gW107CiAgICB9CgogICAgLyogb3BlcmF0aW9ucyAqLwogICAgYWxsRWxlbWVudHMoYXJncykgewogICAgICBjb25zdCBuYW1lc3BhY2UgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuVFlQRSkgKyAicyI7CiAgICAgIGNvbnN0IGl0ZW1zID0gZWxlbWVudFN0b3JhZ2VbbmFtZXNwYWNlXTsKICAgICAgaWYgKCFpdGVtcykgcmV0dXJuICJbXSI7CiAgICAgIGVsc2UgcmV0dXJuIEpTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKGl0ZW1zKSk7CiAgICB9CgogICAgcG9wdXBXYWl0aW5nKGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBsZXQgcG9wdXAgPSBlbGVtZW50U3RvcmFnZS5wb3B1cHNbaWRdOwogICAgICBpZiAocG9wdXAgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gcG9wdXAud2FpdGluZzsKICAgIH0KCiAgICBsYXN0QnV0dG9uUHJlc3MoYXJncykgewogICAgICBjb25zdCBpZCA9IENhc3QudG9TdHJpbmcoYXJncy5JRCk7CiAgICAgIGxldCBwb3B1cCA9IGVsZW1lbnRTdG9yYWdlLnBvcHVwc1tpZF07CiAgICAgIGlmIChwb3B1cCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gIiI7CiAgICAgIHJldHVybiBwb3B1cC5sYXN0QnRuUHJlc3NlZCA/PyAiIjsKICAgIH0KCiAgICBzZXRQb3B1cFRhcmdldChhcmdzKSB7CiAgICAgIGNvbnN0IGlkID0gQ2FzdC50b1N0cmluZyhhcmdzLklEKTsKICAgICAgbGV0IHBvcHVwID0gZWxlbWVudFN0b3JhZ2UucG9wdXBzW2lkXTsKICAgICAgaWYgKHBvcHVwID09PSB1bmRlZmluZWQpIHJldHVybjsKICAgICAgcG9wdXAuaXNXaW5kb3dlZCA9IGFyZ3MuVFlQRSA9PT0gIndpbmRvdyI7CiAgICB9CgogICAgdG9nZ2xlT3B0aW9uKGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBsZXQgcG9wdXAgPSBlbGVtZW50U3RvcmFnZS5wb3B1cHNbaWRdOwogICAgICBpZiAocG9wdXAgPT09IHVuZGVmaW5lZCkgcmV0dXJuOwoKICAgICAgY29uc3Qgb3B0aW9uID0gQ2FzdC50b1N0cmluZyhhcmdzLk9QVElPTik7CiAgICAgIHBvcHVwWwogICAgICAgIG9wdGlvbiA9PT0gImZvY3VzIiA/ICJmb2N1c2VkIiA6ICJhdXRvQ29udHJvbCIKICAgICAgXSA9IGFyZ3MuVFlQRSA9PT0gIm9uIjsKICAgIH0KCiAgICBzZXRGb3JjZUNsb3NlKGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBsZXQgcG9wdXAgPSBlbGVtZW50U3RvcmFnZS5wb3B1cHNbaWRdOwogICAgICBpZiAocG9wdXAgPT09IHVuZGVmaW5lZCkgcmV0dXJuOwoKICAgICAgY29uc3Qga2V5ID0gQ2FzdC50b1N0cmluZyhhcmdzLktFWSk7CiAgICAgIHBvcHVwLmZvcmNlS2V5ID0ga2V5ID09PSAibm9uZSIgPyB1bmRlZmluZWQgOiBrZXk7CiAgICB9CgogICAgLyogY3VzdG9taXphdGlvbiAqLwogICAgc2V0UG9wdXBBbGlnbihhcmdzKSB7CiAgICAgIGNvbnN0IGlkID0gQ2FzdC50b1N0cmluZyhhcmdzLklEKTsKICAgICAgY29uc3Qgc3R5bGVzID0gc3R5bGVTdG9yYWdlLnBvcHVwc1tpZF0gPz8gZ2VuRGVmYXVsdFN0eWxlcyhpZCwgInBvcHVwIik7CiAgICAgIHN0eWxlc1siYWxpZ24taXRlbXMiXSA9IGFyZ3MuVFlQRTsKICAgICAgc3R5bGVzWyJqdXN0aWZ5LWNvbnRlbnQiXSA9IGFyZ3MuVFlQRTsKICAgICAgdXBkYXRlQm94VmlzdWFscyhpZCwgInBvcHVwcyIpOwogICAgfQoKICAgIHNldElucHV0QWxpZ24oYXJncykgewogICAgICBjb25zdCBpZCA9IENhc3QudG9TdHJpbmcoYXJncy5JRCk7CiAgICAgIGNvbnN0IHN0eWxlcyA9IHN0eWxlU3RvcmFnZS5pbnB1dHNbaWRdID8/IGdlbkRlZmF1bHRTdHlsZXMoaWQsICJpbnB1dCIpOwogICAgICBzdHlsZXNbInRleHQtYWxpZ24iXSA9IGFyZ3MuVFlQRSA9PT0gImZsZXgtZW5kIiA/ICJyaWdodCIgOiBhcmdzLlRZUEU7CiAgICAgIHVwZGF0ZUJveFZpc3VhbHMoaWQsICJpbnB1dHMiKTsKICAgIH0KCiAgICBzZXRJbnB1dEZvbnQoYXJncykgewogICAgICBjb25zdCBpZCA9IENhc3QudG9TdHJpbmcoYXJncy5JRCk7CiAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldEVsZW1lbnRQYXRoKENhc3QudG9TdHJpbmcoYXJncy5FTEVNRU5UKSwgdHJ1ZSkgKyAicyI7CiAgICAgIGNvbnN0IHN0eWxlcyA9IHN0eWxlU3RvcmFnZVtwYXRoXVtpZF0gPz8gZ2VuRGVmYXVsdFN0eWxlcyhpZCwgcGF0aCk7CiAgICAgIHN0eWxlc1siZm9udC1mYW1pbHkiXSA9IENhc3QudG9TdHJpbmcoYXJncy5GT05UKTsKICAgICAgdXBkYXRlQm94VmlzdWFscyhpZCwgcGF0aCk7CiAgICB9CgogICAgc2V0SW5wdXRGb250U1ooYXJncykgewogICAgICBjb25zdCBpZCA9IENhc3QudG9TdHJpbmcoYXJncy5JRCk7CiAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldEVsZW1lbnRQYXRoKENhc3QudG9TdHJpbmcoYXJncy5FTEVNRU5UKSwgdHJ1ZSkgKyAicyI7CiAgICAgIGNvbnN0IHN0eWxlcyA9IHN0eWxlU3RvcmFnZVtwYXRoXVtpZF0gPz8gZ2VuRGVmYXVsdFN0eWxlcyhpZCwgcGF0aCk7CiAgICAgIHN0eWxlc1siZm9udC1zaXplIl0gPSBgJHtDYXN0LnRvTnVtYmVyKGFyZ3MuU0laRSl9cHhgOwogICAgICB1cGRhdGVCb3hWaXN1YWxzKGlkLCBwYXRoKTsKICAgIH0KCiAgICBzZXRFbGVtZW50T3V0bGluZShhcmdzKSB7CiAgICAgIGNvbnN0IGlkID0gQ2FzdC50b1N0cmluZyhhcmdzLklEKTsKICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0RWxlbWVudFBhdGgoQ2FzdC50b1N0cmluZyhhcmdzLkVMRU1FTlQpLCB0cnVlKSArICJzIjsKICAgICAgY29uc3Qgc3R5bGVzID0gc3R5bGVTdG9yYWdlW3BhdGhdW2lkXSA/PyBnZW5EZWZhdWx0U3R5bGVzKGlkLCBwYXRoKTsKICAgICAgc3R5bGVzWyItd2Via2l0LXRleHQtc3Ryb2tlLXdpZHRoIl0gPSBgJHtDYXN0LnRvTnVtYmVyKGFyZ3MuV0VJR0hUKX1weGA7CiAgICAgIHN0eWxlc1siLXdlYmtpdC10ZXh0LXN0cm9rZS1jb2xvciJdID0gYXJncy5DT0xPUjsKICAgICAgdXBkYXRlQm94VmlzdWFscyhpZCwgcGF0aCk7CiAgICB9CgogICAgc2V0RWxlbWVudEF0dChhcmdzKSB7CiAgICAgIGNvbnN0IGlkID0gQ2FzdC50b1N0cmluZyhhcmdzLklEKTsKICAgICAgY29uc3QgcGFyYW0gPSBDYXN0LnRvU3RyaW5nKGFyZ3MuUEFSQU0pOwogICAgICBsZXQgdmFsdWUgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuVkFMVUUpOwogICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRFbGVtZW50UGF0aChDYXN0LnRvU3RyaW5nKGFyZ3MuRUxFTUVOVCksIHRydWUsIHRydWUpICsgInMiOwogICAgICBjb25zdCBzdHlsZXMgPSBzdHlsZVN0b3JhZ2VbcGF0aF1baWRdID8/IGdlbkRlZmF1bHRTdHlsZXMoaWQsIHBhdGgpOwogICAgICBjb25zdCBpc1ZhbGlkU3R5bGUgPSB0aGlzLmdlblN0eWxlTGlzdCgpLmZpbmRJbmRleCgoaSkgPT4geyByZXR1cm4gaS52YWx1ZSA9PT0gcGFyYW0gfSk7CgogICAgICBpZiAoIXBhcmFtLmluY2x1ZGVzKCJjb2xvciIpICYmIHBhcmFtICE9PSAiYmFja2dyb3VuZCIpIHsKICAgICAgICBpZiAocGFyYW0gPT09ICJ3aWR0aCIgfHwgcGFyYW0gPT09ICJoZWlnaHQiKSB7CiAgICAgICAgICAvLyBhbGxvdyB1c2VycyB0byBpbnB1dCB0aGluZ3MgbGlrZSAiYXV0byIgd2hpbGUgc3RpbGwgYWRkaW5nICJweCIgdG8gbnVtYmVycwogICAgICAgICAgdmFsdWUgPSAvXlxkKyQvLnRlc3QodmFsdWUpID8gYCR7dmFsdWV9cHhgIDogdmFsdWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGhhbmRsZSBjYXNlcyB3aGVyZSB1c2VycyB0byBpbnB1dCBzcGVjaWZpYyBhdHRyaWJ1dGVzIGxpa2UgIm1hcmdpbi1sZWZ0IgogICAgICAgICAgaWYgKHZhbHVlLmluY2x1ZGVzKCIgIikpIHZhbHVlID0gL15cZCskLy50ZXN0KHZhbHVlLnJlcGxhY2VBbGwoIiAiLCAiIikpID8gdmFsdWUucmVwbGFjZUFsbCgiICIsICJweCAiKSA6IHZhbHVlOwogICAgICAgICAgZWxzZSB2YWx1ZSA9IGAke3ZhbHVlfXB4YDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChpc1ZhbGlkU3R5bGUgPiAtMSkgc3R5bGVzW3BhcmFtXSA9IHZhbHVlOwogICAgICB1cGRhdGVCb3hWaXN1YWxzKGlkLCBwYXRoKTsKICAgIH0KCiAgICBzZXRFbGVtZW50Qm9yZGVyKGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBjb25zdCB3ZWlnaHQgPSBDYXN0LnRvTnVtYmVyKGFyZ3MuV0VJR0hUKTsKICAgICAgY29uc3QgaXNCb3JkZXJWYWxpZCA9IHZhbGlkQm9yZGVycy5maW5kSW5kZXgoKGkpID0+IHsgcmV0dXJuIGkudmFsdWUgPT09IGFyZ3MuVFlQRSB9KTsKICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0RWxlbWVudFBhdGgoQ2FzdC50b1N0cmluZyhhcmdzLkVMRU1FTlQpLCB0cnVlLCB0cnVlKSArICJzIjsKICAgICAgY29uc3Qgc3R5bGVzID0gc3R5bGVTdG9yYWdlW3BhdGhdW2lkXSA/PyBnZW5EZWZhdWx0U3R5bGVzKGlkLCBwYXRoKTsKICAgICAgc3R5bGVzW3BhdGggPT09ICJsYWJlbHMiID8gImJvcmRlci1ib3R0b20iIDogImJvcmRlciJdID0gCiAgICAgICAgYCR7aXNCb3JkZXJWYWxpZCA+IC0xID8gYXJncy5UWVBFIDogIm5vbmUifSAke2FyZ3MuQ09MT1J9ICR7d2VpZ2h0fXB4YDsKICAgICAgdXBkYXRlQm94VmlzdWFscyhpZCwgcGF0aCk7CiAgICB9CgogICAgc2V0RWxlbWVudFNoYWRvdyhhcmdzKSB7CiAgICAgIGNvbnN0IGlkID0gQ2FzdC50b1N0cmluZyhhcmdzLklEKTsKICAgICAgY29uc3QgcG9zID0gW0Nhc3QudG9OdW1iZXIoYXJncy5YKSwgQ2FzdC50b051bWJlcihhcmdzLlkpXTsKICAgICAgY29uc3Qgd2VpZ2h0ID0gW0Nhc3QudG9OdW1iZXIoYXJncy5BTVQpLCBDYXN0LnRvTnVtYmVyKGFyZ3MuQkxVUildOwogICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRFbGVtZW50UGF0aChDYXN0LnRvU3RyaW5nKGFyZ3MuRUxFTUVOVCksIHRydWUsIHRydWUpICsgInMiOwogICAgICBjb25zdCBzdHlsZXMgPSBzdHlsZVN0b3JhZ2VbcGF0aF1baWRdID8/IGdlbkRlZmF1bHRTdHlsZXMoaWQsIHBhdGgpOwogICAgICBpZiAocGF0aCA9PT0gImxhYmVscyIpIHN0eWxlc1sidGV4dC1zaGFkb3ciXSA9IGAke2FyZ3MuQ09MT1J9ICR7cG9zWzBdfXB4ICR7cG9zWzFdfXB4ICR7d2VpZ2h0WzBdfXB4YDsKICAgICAgZWxzZSBzdHlsZXNbImJveC1zaGFkb3ciXSA9IGAke2FyZ3MuQ09MT1J9ICR7cG9zWzBdfXB4ICR7cG9zWzFdfXB4ICR7d2VpZ2h0WzBdfXB4ICR7d2VpZ2h0WzFdfXB4YDsKICAgICAgdXBkYXRlQm94VmlzdWFscyhpZCwgcGF0aCk7CiAgICB9CgogICAgcmVzZXRFbGVtZW50RWZmZWN0KGFyZ3MpIHsKICAgICAgY29uc3QgaWQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOwogICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRFbGVtZW50UGF0aChDYXN0LnRvU3RyaW5nKGFyZ3MuRUxFTUVOVCksIHRydWUsIHRydWUpICsgInMiOwogICAgICBjb25zdCBzdHlsZXMgPSBzdHlsZVN0b3JhZ2VbcGF0aF1baWRdID8/IGdlbkRlZmF1bHRTdHlsZXMoaWQsIHBhdGgpOwogICAgICBpZiAocGF0aCA9PT0gInBvcHVwcyIpIHN0eWxlc1sidHJhbnNmb3JtIl0gPSAidHJhbnNsYXRlKC01MCUsIC01MCUpIjsKICAgICAgc3R5bGVzWyJmaWx0ZXIiXSA9ICIiOwogICAgICB1cGRhdGVCb3hWaXN1YWxzKGlkLCBwYXRoKTsKICAgIH0KCiAgICBzZXRFbGVtZW50RWZmZWN0KGFyZ3MpIHsKICAgICAgY29uc3QgZWZmZWN0ID0gQ2FzdC50b1N0cmluZyhhcmdzLkVGRkVDVCk7CiAgICAgIGNvbnN0IGVmZmVjdEluZGV4ID0gdmFsaWRFZmZlY3RzLmZpbmRJbmRleCgoaSkgPT4geyByZXR1cm4gaS52YWx1ZSA9PT0gZWZmZWN0IH0pOwogICAgICBpZiAoZWZmZWN0SW5kZXggPT09IC0xKSByZXR1cm47CiAgICAgIGNvbnN0IGlkID0gQ2FzdC50b1N0cmluZyhhcmdzLklEKTsKICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0RWxlbWVudFBhdGgoQ2FzdC50b1N0cmluZyhhcmdzLkVMRU1FTlQpLCB0cnVlLCB0cnVlKSArICJzIjsKICAgICAgY29uc3Qgc3R5bGVzID0gc3R5bGVTdG9yYWdlW3BhdGhdW2lkXSA/PyBnZW5EZWZhdWx0U3R5bGVzKGlkLCBwYXRoKTsKCiAgICAgIGxldCB2YWx1ZSA9IENhc3QudG9OdW1iZXIoYXJncy5WQUxVRSk7CiAgICAgIGNvbnN0IGNzc1RhcmdldCA9IGVmZmVjdEluZGV4ID4gNyA/ICJ0cmFuc2Zvcm0iIDogImZpbHRlciI7CiAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgJHtlZmZlY3R9XFwoKFteKV0qKVxcKWApOwogICAgICBzdHlsZXNbIlNQc3RvcmFnZSJdW2VmZmVjdF0gPSB2YWx1ZTsKCiAgICAgIHN3aXRjaCAoZWZmZWN0KSB7CiAgICAgICAgY2FzZSAiYmx1ciI6CiAgICAgICAgICB2YWx1ZSArPSAicHgiOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiYnJpZ2h0bmVzcyI6CiAgICAgICAgICB2YWx1ZSA9IGAkezEwMCAtICh2YWx1ZSAqIC0xKX0lYDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIm9wYWNpdHkiOgogICAgICAgICAgdmFsdWUgPSAxIC0gKHZhbHVlIC8gMTAwKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgInNhdHVyYXRlIjoKICAgICAgICBjYXNlICJzZXBpYSI6CiAgICAgICAgY2FzZSAiaW52ZXJ0IjoKICAgICAgICAgIHZhbHVlICs9ICIlIjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImh1ZS1yb3RhdGUiOgogICAgICAgICAgdmFsdWUgKz0gImRlZyI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJjb250cmFzdCI6CiAgICAgICAgICB2YWx1ZSA9IGAkezEwMCArIHZhbHVlfSVgOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAicm90YXRlIjoKICAgICAgICAgIHZhbHVlID0gYCR7dmFsdWUgLSA5MH1kZWdgOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAic2NhbGVYIjoKICAgICAgICBjYXNlICJzY2FsZVkiOgogICAgICAgICAgdmFsdWUgLz0gMTAwOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAic2tld1giOgogICAgICAgIGNhc2UgInNrZXdZIjoKICAgICAgICAgIHZhbHVlICs9ICJkZWciOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIGNvbnN0IG5ld0NTUyA9IHN0eWxlc1tjc3NUYXJnZXRdLnJlcGxhY2UocmVnZXgsICIiKTsKICAgICAgc3R5bGVzW2Nzc1RhcmdldF0gPSBuZXdDU1MgKyBgJHtlZmZlY3R9KCR7dmFsdWV9KWA7CiAgICAgIHVwZGF0ZUJveFZpc3VhbHMoaWQsIHBhdGgpOwogICAgfQoKICAgIGdldEVsZW1lbnRFZmZlY3QoYXJncykgewogICAgICBjb25zdCBlZmZlY3QgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuRUZGRUNUKTsKICAgICAgY29uc3QgaXNWYWxpZEVmZmVjdCA9IHZhbGlkRWZmZWN0cy5maW5kSW5kZXgoKGkpID0+IHsgcmV0dXJuIGkudmFsdWUgPT09IGVmZmVjdCB9KTsKICAgICAgaWYgKGlzVmFsaWRFZmZlY3QgPT09IC0xKSByZXR1cm4gIiI7CgogICAgICBjb25zdCBpZCA9IENhc3QudG9TdHJpbmcoYXJncy5JRCk7CiAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldEVsZW1lbnRQYXRoKENhc3QudG9TdHJpbmcoYXJncy5FTEVNRU5UKSwgdHJ1ZSwgdHJ1ZSkgKyAicyI7CiAgICAgIGNvbnN0IHN0eWxlcyA9IHN0eWxlU3RvcmFnZVtwYXRoXVtpZF0gPz8gZ2VuRGVmYXVsdFN0eWxlcyhpZCwgcGF0aCk7CiAgICAgIHJldHVybiBzdHlsZXNbIlNQc3RvcmFnZSJdW2VmZmVjdF0gPz8gIiI7CiAgICB9CiAgfQoKICBTY3JhdGNoLmV4dGVuc2lvbnMucmVnaXN0ZXIobmV3IFNQcG9wdXBzKCkpOwp9KShTY3JhdGNoKTsK"},"customFonts":[{"system":false,"family":"zeroes three","fallback":"Sans Serif","md5ext":"5457277fad73a489af817f4649233fc4.ttf"}],"meta":{"semver":"3.0.0","platform":{"name":"PenguinMod","url":"https://penguinmod.com/","version":"stable"}}}